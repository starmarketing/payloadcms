/*! For license information please see 444.3082cff9a2c79f6ab618.js.LICENSE.txt */
(self.webpackChunkpayload_starter_typescript=self.webpackChunkpayload_starter_typescript||[]).push([[444],{6907:e=>{"use strict";e.exports=function(e){if(e=String(e||""),n.test(e))return"rtl";if(a.test(e))return"ltr";return"neutral"};var t="֑-߿יִ-﷽ﹰ-ﻼ",r="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",n=new RegExp("^[^"+r+"]*["+t+"]"),a=new RegExp("^[^"+t+"]*["+r+"]")},8156:(e,t)=>{"use strict";for(var r="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},a={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=1;i<20;i++)o["f"+i]=111+i;function s(e,t,r){t&&!("byKey"in t)&&(r=t,t=null),Array.isArray(e)||(e=[e]);var n=e.map((function(e){return l(e,t)})),a=function(e){return n.some((function(t){return c(t,e)}))};return null==r?a:a(r)}function l(e,t){var r=t&&t.byKey,i={},s=(e=e.replace("++","+add")).split("+"),l=s.length;for(var c in n)i[n[c]]=!1;var f=!0,h=!1,v=void 0;try{for(var p,g=s[Symbol.iterator]();!(f=(p=g.next()).done);f=!0){var m=p.value,w=m.endsWith("?")&&m.length>1;w&&(m=m.slice(0,-1));var y=d(m),b=n[y];if(m.length>1&&!b&&!a[m]&&!o[y])throw new TypeError('Unknown modifier: "'+m+'"');1!==l&&b||(r?i.key=y:i.which=u(m)),b&&(i[b]=!w||null)}}catch(e){h=!0,v=e}finally{try{!f&&g.return&&g.return()}finally{if(h)throw v}}return i}function c(e,t){for(var r in e){var n=e[r],a=void 0;if(null!=n&&((null!=(a="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&a!==n))return!1}return!0}function u(e){return e=d(e),o[e]||e.toUpperCase().charCodeAt(0)}function d(e){return e=e.toLowerCase(),e=a[e]||e}t.ZP=s},2705:(e,t,r)=>{var n=r(8638).Symbol;e.exports=n},4239:(e,t,r)=>{var n=r(2705),a=r(9607),o=r(2333),i=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":i&&i in Object(e)?a(e):o(e)}},7561:(e,t,r)=>{var n=r(7990),a=/^\s+/;e.exports=function(e){return e?e.slice(0,n(e)+1).replace(a,""):e}},1957:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},9607:(e,t,r)=>{var n=r(2705),a=Object.prototype,o=a.hasOwnProperty,i=a.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var a=i.call(e);return n&&(t?e[s]=r:delete e[s]),a}},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},8638:(e,t,r)=>{var n=r(1957),a="object"==typeof self&&self&&self.Object===Object&&self,o=n||a||Function("return this")();e.exports=o},7990:e=>{var t=/\s/;e.exports=function(e){for(var r=e.length;r--&&t.test(e.charAt(r)););return r}},3279:(e,t,r)=>{var n=r(3218),a=r(7771),o=r(4841),i=Math.max,s=Math.min;e.exports=function(e,t,r){var l,c,u,d,f,h,v=0,p=!1,g=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function w(t){var r=l,n=c;return l=c=void 0,v=t,d=e.apply(n,r)}function y(e){return v=e,f=setTimeout(E,t),p?w(e):d}function b(e){var r=e-h;return void 0===h||r>=t||r<0||g&&e-v>=u}function E(){var e=a();if(b(e))return x(e);f=setTimeout(E,function(e){var r=t-(e-h);return g?s(r,u-(e-v)):r}(e))}function x(e){return f=void 0,m&&l?w(e):(l=c=void 0,d)}function O(){var e=a(),r=b(e);if(l=arguments,c=this,h=e,r){if(void 0===f)return y(h);if(g)return clearTimeout(f),f=setTimeout(E,t),w(h)}return void 0===f&&(f=setTimeout(E,t)),d}return t=o(t)||0,n(r)&&(p=!!r.leading,u=(g="maxWait"in r)?i(o(r.maxWait)||0,t):u,m="trailing"in r?!!r.trailing:m),O.cancel=function(){void 0!==f&&clearTimeout(f),v=0,l=h=c=f=void 0},O.flush=function(){return void 0===f?d:x(a())},O}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},3448:(e,t,r)=>{var n=r(4239),a=r(7005);e.exports=function(e){return"symbol"==typeof e||a(e)&&"[object Symbol]"==n(e)}},7771:(e,t,r)=>{var n=r(8638);e.exports=function(){return n.Date.now()}},3493:(e,t,r)=>{var n=r(3279),a=r(3218);e.exports=function(e,t,r){var o=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return a(r)&&(o="leading"in r?!!r.leading:o,i="trailing"in r?!!r.trailing:i),n(e,t,{leading:o,maxWait:t,trailing:i})}},4841:(e,t,r)=>{var n=r(7561),a=r(3218),o=r(3448),i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=s.test(e);return r||l.test(e)?c(e.slice(2),r?2:8):i.test(e)?NaN:+e}},4444:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>di});var n=r(7294),a=r(8156);function o(e){return"[object Object]"===Object.prototype.toString.call(e)}function i(e){var t,r;return!1!==o(e)&&(void 0===(t=e.constructor)||!1!==o(r=t.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))}function s(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function l(e){return!!e&&!!e[J]}function c(e){return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===Q}(e)||Array.isArray(e)||!!e[K]||!!e.constructor[K]||g(e)||m(e))}function u(e,t,r){void 0===r&&(r=!1),0===d(e)?(r?Object.keys:G)(e).forEach((function(n){r&&"symbol"==typeof n||t(n,e[n],e)})):e.forEach((function(r,n){return t(n,r,e)}))}function d(e){var t=e[J];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:g(e)?2:m(e)?3:0}function f(e,t){return 2===d(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function h(e,t){return 2===d(e)?e.get(t):e[t]}function v(e,t,r){var n=d(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function p(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function g(e){return H&&e instanceof Map}function m(e){return Z&&e instanceof Set}function w(e){return e.o||e.t}function y(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=X(e);delete t[J];for(var r=G(t),n=0;n<r.length;n++){var a=r[n],o=t[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),t)}function b(e,t){return void 0===t&&(t=!1),x(e)||l(e)||!c(e)||(d(e)>1&&(e.set=e.add=e.clear=e.delete=E),Object.freeze(e),t&&u(e,(function(e,t){return b(t,!0)}),!0)),e}function E(){s(2)}function x(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function O(e){var t=Y[e];return t||s(18,e),t}function k(){return V}function P(e,t){t&&(O("Patches"),e.u=[],e.s=[],e.v=t)}function C(e){D(e),e.p.forEach(S),e.p=null}function D(e){e===V&&(V=e.l)}function N(e){return V={p:[],l:V,h:e,m:!0,_:0}}function S(e){var t=e[J];0===t.i||1===t.i?t.j():t.O=!0}function j(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.g||O("ES5").S(t,e,n),n?(r[J].P&&(C(t),s(4)),c(e)&&(e=F(t,e),t.l||A(t,e)),t.u&&O("Patches").M(r[J].t,e,t.u,t.s)):e=F(t,r,[]),C(t),t.u&&t.v(t.u,t.s),e!==U?e:void 0}function F(e,t,r){if(x(t))return t;var n=t[J];if(!n)return u(t,(function(a,o){return B(e,n,t,a,o,r)}),!0),t;if(n.A!==e)return t;if(!n.P)return A(e,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var a=4===n.i||5===n.i?n.o=y(n.k):n.o;u(3===n.i?new Set(a):a,(function(t,o){return B(e,n,a,t,o,r)})),A(e,a,!1),r&&e.u&&O("Patches").R(n,r,e.u,e.s)}return n.o}function B(e,t,r,n,a,o){if(l(a)){var i=F(e,a,o&&t&&3!==t.i&&!f(t.D,n)?o.concat(n):void 0);if(v(r,n,i),!l(i))return;e.m=!1}if(c(a)&&!x(a)){if(!e.h.F&&e._<1)return;F(e,a),t&&t.A.l||A(e,a)}}function A(e,t,r){void 0===r&&(r=!1),e.h.F&&e.m&&b(t,r)}function M(e,t){var r=e[J];return(r?w(r):e)[t]}function R(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function T(e){e.P||(e.P=!0,e.l&&T(e.l))}function _(e){e.o||(e.o=y(e.t))}function L(e,t,r){var n=g(t)?O("MapSet").N(t,r):m(t)?O("MapSet").T(t,r):e.g?function(e,t){var r=Array.isArray(e),n={i:r?1:0,A:t?t.A:k(),P:!1,I:!1,D:{},l:t,t:e,k:null,o:null,j:null,C:!1},a=n,o=ee;r&&(a=[n],o=te);var i=Proxy.revocable(a,o),s=i.revoke,l=i.proxy;return n.k=l,n.j=s,l}(t,r):O("ES5").J(t,r);return(r?r.A:k()).p.push(n),n}function z(e){return l(e)||s(22,e),function e(t){if(!c(t))return t;var r,n=t[J],a=d(t);if(n){if(!n.P&&(n.i<4||!O("ES5").K(n)))return n.t;n.I=!0,r=W(t,a),n.I=!1}else r=W(t,a);return u(r,(function(t,a){n&&h(n.t,t)===a||v(r,t,e(a))})),3===a?new Set(r):r}(e)}function W(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return y(e)}var I,V,q="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),H="undefined"!=typeof Map,Z="undefined"!=typeof Set,$="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,U=q?Symbol.for("immer-nothing"):((I={})["immer-nothing"]=!0,I),K=q?Symbol.for("immer-draftable"):"__$immer_draftable",J=q?Symbol.for("immer-state"):"__$immer_state",Q=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),G="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,X=Object.getOwnPropertyDescriptors||function(e){var t={};return G(e).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)})),t},Y={},ee={get:function(e,t){if(t===J)return e;var r=w(e);if(!f(r,t))return function(e,t,r){var n,a=R(t,r);return a?"value"in a?a.value:null===(n=a.get)||void 0===n?void 0:n.call(e.k):void 0}(e,r,t);var n=r[t];return e.I||!c(n)?n:n===M(e.t,t)?(_(e),e.o[t]=L(e.A.h,n,e)):n},has:function(e,t){return t in w(e)},ownKeys:function(e){return Reflect.ownKeys(w(e))},set:function(e,t,r){var n=R(w(e),t);if(null==n?void 0:n.set)return n.set.call(e.k,r),!0;if(!e.P){var a=M(w(e),t),o=null==a?void 0:a[J];if(o&&o.t===r)return e.o[t]=r,e.D[t]=!1,!0;if(p(r,a)&&(void 0!==r||f(e.t,t)))return!0;_(e),T(e)}return e.o[t]===r&&"number"!=typeof r&&(void 0!==r||t in e.o)||(e.o[t]=r,e.D[t]=!0,!0)},deleteProperty:function(e,t){return void 0!==M(e.t,t)||t in e.t?(e.D[t]=!1,_(e),T(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=w(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty:function(){s(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){s(12)}},te={};u(ee,(function(e,t){te[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),te.deleteProperty=function(e,t){return te.set.call(this,e,t,void 0)},te.set=function(e,t,r){return ee.set.call(this,e[0],t,r,e[0])};var re=function(){function e(e){var t=this;this.g=$,this.F=!0,this.produce=function(e,r,n){if("function"==typeof e&&"function"!=typeof r){var a=r;r=e;var o=t;return function(e){var t=this;void 0===e&&(e=a);for(var n=arguments.length,i=Array(n>1?n-1:0),s=1;s<n;s++)i[s-1]=arguments[s];return o.produce(e,(function(e){var n;return(n=r).call.apply(n,[t,e].concat(i))}))}}var i;if("function"!=typeof r&&s(6),void 0!==n&&"function"!=typeof n&&s(7),c(e)){var l=N(t),u=L(t,e,void 0),d=!0;try{i=r(u),d=!1}finally{d?C(l):D(l)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return P(l,n),j(e,l)}),(function(e){throw C(l),e})):(P(l,n),j(i,l))}if(!e||"object"!=typeof e){if(void 0===(i=r(e))&&(i=e),i===U&&(i=void 0),t.F&&b(i,!0),n){var f=[],h=[];O("Patches").M(e,i,f,h),n(f,h)}return i}s(21,e)},this.produceWithPatches=function(e,r){if("function"==typeof e)return function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];return t.produceWithPatches(r,(function(t){return e.apply(void 0,[t].concat(a))}))};var n,a,o=t.produce(e,r,(function(e,t){n=e,a=t}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,n,a]})):[o,n,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){c(e)||s(8),l(e)&&(e=z(e));var t=N(this),r=L(this,e,void 0);return r[J].C=!0,D(t),r},t.finishDraft=function(e,t){var r=(e&&e[J]).A;return P(r,t),j(void 0,r)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!$&&s(20),this.g=e},t.applyPatches=function(e,t){var r;for(r=t.length-1;r>=0;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));var a=O("Patches").$;return l(e)?a(e,t):this.produce(e,(function(e){return a(e,t)}))},e}(),ne=new re,ae=ne.produce,oe=(ne.produceWithPatches.bind(ne),ne.setAutoFreeze.bind(ne),ne.setUseProxies.bind(ne),ne.applyPatches.bind(ne),ne.createDraft.bind(ne)),ie=ne.finishDraft.bind(ne);function se(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var le=new WeakMap,ce=new WeakMap,ue=new WeakMap,de=new WeakMap,fe=new WeakMap,he=new WeakMap;function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ge=()=>{var e={children:[],operations:[],selection:null,marks:null,isInline:()=>!1,isVoid:()=>!1,onChange:()=>{},apply:t=>{for(var r of $e.pathRefs(e))rt.transform(r,t);for(var n of $e.pointRefs(e))it.transform(n,t);for(var a of $e.rangeRefs(e))ut.transform(a,t);var o=new Set,i=[],s=e=>{if(e){var t=e.join(",");o.has(t)||(o.add(t),i.push(e))}},l=le.get(e)||[],c=me(t);for(var u of l){s(tt.transform(u,t))}for(var d of c)s(d);le.set(e,i),Mt.transform(e,t),e.operations.push(t),$e.normalize(e),"set_selection"===t.type&&(e.marks=null),ce.get(e)||(ce.set(e,!0),Promise.resolve().then((()=>{ce.set(e,!1),e.onChange(),e.operations=[]})))},addMark:(t,r)=>{var{selection:n}=e;if(n)if(ct.isExpanded(n))Mt.setNodes(e,{[t]:r},{match:gt.isText,split:!0});else{var a=pe(pe({},$e.marks(e)||{}),{},{[t]:r});e.marks=a,ce.get(e)||e.onChange()}},deleteBackward:t=>{var{selection:r}=e;r&&ct.isCollapsed(r)&&Mt.delete(e,{unit:t,reverse:!0})},deleteForward:t=>{var{selection:r}=e;r&&ct.isCollapsed(r)&&Mt.delete(e,{unit:t})},deleteFragment:t=>{var{selection:r}=e;r&&ct.isExpanded(r)&&Mt.delete(e,{reverse:"backward"===t})},getFragment:()=>{var{selection:t}=e;return t?Ge.fragment(e,t):[]},insertBreak:()=>{Mt.splitNodes(e,{always:!0})},insertFragment:t=>{Mt.insertFragment(e,t)},insertNode:t=>{Mt.insertNodes(e,t)},insertText:t=>{var{selection:r,marks:n}=e;if(r){if(ct.isCollapsed(r)){var a=$e.above(e,{match:t=>$e.isInline(e,t),mode:"highest"});if(a){var[,o]=a;if($e.isEnd(e,r.anchor,o)){var i=$e.after(e,o);Mt.setSelection(e,{anchor:i,focus:i})}}}if(n){var s=pe({text:t},n);Mt.insertNodes(e,s)}else Mt.insertText(e,t);e.marks=null}},normalizeNode:t=>{var[r,n]=t;if(!gt.isText(r))if(We.isElement(r)&&0===r.children.length){Mt.insertNodes(e,{text:""},{at:n.concat(0),voids:!0})}else for(var a=!$e.isEditor(r)&&(We.isElement(r)&&(e.isInline(r)||0===r.children.length||gt.isText(r.children[0])||e.isInline(r.children[0]))),o=0,i=0;i<r.children.length;i++,o++){var s=Ge.get(e,n);if(!gt.isText(s)){var l=r.children[i],c=s.children[o-1],u=i===r.children.length-1;if((gt.isText(l)||We.isElement(l)&&e.isInline(l))!==a)Mt.removeNodes(e,{at:n.concat(o),voids:!0}),o--;else if(We.isElement(l)){if(e.isInline(l))if(null!=c&&gt.isText(c)){if(u){Mt.insertNodes(e,{text:""},{at:n.concat(o+1),voids:!0}),o++}}else{Mt.insertNodes(e,{text:""},{at:n.concat(o),voids:!0}),o++}}else null!=c&&gt.isText(c)&&(gt.equals(l,c,{loose:!0})?(Mt.mergeNodes(e,{at:n.concat(o),voids:!0}),o--):""===c.text?(Mt.removeNodes(e,{at:n.concat(o-1),voids:!0}),o--):""===l.text&&(Mt.removeNodes(e,{at:n.concat(o),voids:!0}),o--))}}},removeMark:t=>{var{selection:r}=e;if(r)if(ct.isExpanded(r))Mt.unsetNodes(e,t,{match:gt.isText,split:!0});else{var n=pe({},$e.marks(e)||{});delete n[t],e.marks=n,ce.get(e)||e.onChange()}}};return e},me=e=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":var{path:t}=e;return tt.levels(t);case"insert_node":var{node:r,path:n}=e,a=tt.levels(n),o=gt.isText(r)?[]:Array.from(Ge.nodes(r),(e=>{var[,t]=e;return n.concat(t)}));return[...a,...o];case"merge_node":var{path:i}=e;return[...tt.ancestors(i),tt.previous(i)];case"move_node":var{path:s,newPath:l}=e;if(tt.equals(s,l))return[];var c=[],u=[];for(var d of tt.ancestors(s)){var f=tt.transform(d,e);c.push(f)}for(var h of tt.ancestors(l)){var v=tt.transform(h,e);u.push(v)}var p=u[u.length-1],g=l[l.length-1],m=p.concat(g);return[...c,...u,m];case"remove_node":var{path:w}=e;return[...tt.ancestors(w)];case"split_node":var{path:y}=e;return[...tt.levels(y),tt.next(y)];default:return[]}};function we(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var ye=/\s/,be=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,Ee=/['\u2018\u2019]/,xe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!t,n=0,a=null,o=r?e:Te(e);for(var i of o){var s=i.codePointAt(0);if(!s)break;if(Be(s))n+=i.length,a="ZWJ";else{var[l,c]=r?[De,Ne]:[Ne,De];if(l(s)){if("KC"===a)break;n+=i.length,a="KC"}else{if(c(s)){n+=i.length;break}if(Ce(s)){if(n+=i.length,r&&"BMP"===a)break;a="VAR"}else if(Se(s)){if(r&&a&&"ZWJ"!==a&&"VAR"!==a)break;if(n+=i.length,t&&"VAR"===a)break;a="BMP"}else if(Pe(s))n+=i.length,a="MOD";else{var[u,d]=r?[Ae,Re]:[Re,Ae];if(u(s)){if("TAG"===a)break;n+=i.length,a="TAG"}else{if(d(s)){n+=i.length;break}if("TAG"===a&&Me(s))n+=i.length;else if(je(s)){if(n+=i.length,"RI"===a)break;a="RI"}else{if(Fe(s)){if(r&&"MOD"===a){n+=i.length;break}break}if("NSEQ"===a)break;n+=i.length,a="NSEQ"}}}}}}return n||1},Oe=(e,t,r)=>{if(r){var n=e.length-t;return[e.slice(n,e.length),e.slice(0,n)]}return[e.slice(0,t),e.slice(t)]},ke=function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ye.test(t))return!1;if(Ee.test(t)){var a=xe(r,n),[o,i]=Oe(r,a,n);if(e(o,i,n))return!0}return!be.test(t)},Pe=e=>e>=127995&&e<=127999,Ce=e=>e<=65039&&e>=65024,De=e=>e>=48&&e<=57||35===e||42===e,Ne=e=>8419===e,Se=e=>10084===e||9794===e||9792===e||9760===e||9877===e||9992===e||9711===e||11014===e||8599===e||10145===e||8600===e||11015===e||8601===e||11013===e||8598===e||8597===e||8596===e||8617===e||8618===e||10548===e||10549===e,je=e=>e>=127462&&e<=127487,Fe=e=>e<=65535,Be=e=>8205===e,Ae=e=>127988===e,Me=e=>e>=917504&&e<=917631,Re=e=>917631===e,Te=function*(e){for(var t=e.length-1,r=0;r<e.length;r++){var n=e.charAt(t-r);if(Le(n.charCodeAt(0))){var a=e.charAt(t-r-1);if(_e(a.charCodeAt(0))){yield a+n,r++;continue}}yield n}},_e=e=>e>=55296&&e<=56319,Le=e=>e>=56320&&e<=57343,ze=e=>i(e)&&Ge.isNodeList(e.children)&&!$e.isEditor(e),We={isAncestor:e=>i(e)&&Ge.isNodeList(e.children),isElement:ze,isElementList:e=>Array.isArray(e)&&e.every((e=>We.isElement(e))),isElementProps:e=>void 0!==e.children,isElementType:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"type";return ze(e)&&e[r]===t},matches(e,t){for(var r in t)if("children"!==r&&e[r]!==t[r])return!1;return!0}},Ie=["text"],Ve=["text"];function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ze=new WeakMap,$e={above(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{voids:r=!1,mode:n="lowest",at:a=e.selection,match:o}=t;if(a){var i=$e.path(e,a),s="lowest"===n;for(var[l,c]of $e.levels(e,{at:i,voids:r,match:o,reverse:s}))if(!gt.isText(l)&&!tt.equals(i,c))return[l,c]}},addMark(e,t,r){e.addMark(t,r)},after(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={anchor:$e.point(e,t,{edge:"end"}),focus:$e.end(e,[])},{distance:o=1}=n,i=0;for(var s of $e.positions(e,He(He({},n),{},{at:a}))){if(i>o)break;0!==i&&(r=s),i++}return r},before(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={anchor:$e.start(e,[]),focus:$e.point(e,t,{edge:"start"})},{distance:o=1}=n,i=0;for(var s of $e.positions(e,He(He({},n),{},{at:a,reverse:!0}))){if(i>o)break;0!==i&&(r=s),i++}return r},deleteBackward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:r="character"}=t;e.deleteBackward(r)},deleteForward(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{unit:r="character"}=t;e.deleteForward(r)},deleteFragment(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{direction:r="forward"}=t;e.deleteFragment(r)},edges:(e,t)=>[$e.start(e,t),$e.end(e,t)],end:(e,t)=>$e.point(e,t,{edge:"end"}),first(e,t){var r=$e.path(e,t,{edge:"start"});return $e.node(e,r)},fragment(e,t){var r=$e.range(e,t);return Ge.fragment(e,r)},hasBlocks:(e,t)=>t.children.some((t=>$e.isBlock(e,t))),hasInlines:(e,t)=>t.children.some((t=>gt.isText(t)||$e.isInline(e,t))),hasTexts:(e,t)=>t.children.every((e=>gt.isText(e))),insertBreak(e){e.insertBreak()},insertFragment(e,t){e.insertFragment(t)},insertNode(e,t){e.insertNode(t)},insertText(e,t){e.insertText(t)},isBlock:(e,t)=>We.isElement(t)&&!e.isInline(t),isEditor(e){if(!i(e))return!1;var t=Ze.get(e);if(void 0!==t)return t;var r="function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteBackward&&"function"==typeof e.deleteForward&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isInline&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&(null===e.marks||i(e.marks))&&(null===e.selection||ct.isRange(e.selection))&&Ge.isNodeList(e.children)&&et.isOperationList(e.operations);return Ze.set(e,r),r},isEnd(e,t,r){var n=$e.end(e,r);return ot.equals(t,n)},isEdge:(e,t,r)=>$e.isStart(e,t,r)||$e.isEnd(e,t,r),isEmpty(e,t){var{children:r}=t,[n]=r;return 0===r.length||1===r.length&&gt.isText(n)&&""===n.text&&!e.isVoid(t)},isInline:(e,t)=>We.isElement(t)&&e.isInline(t),isNormalizing(e){var t=ue.get(e);return void 0===t||t},isStart(e,t,r){if(0!==t.offset)return!1;var n=$e.start(e,r);return ot.equals(t,n)},isVoid:(e,t)=>We.isElement(t)&&e.isVoid(t),last(e,t){var r=$e.path(e,t,{edge:"end"});return $e.node(e,r)},leaf(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=$e.path(e,t,r);return[Ge.leaf(e,n),n]},*levels(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:r=e.selection,reverse:n=!1,voids:a=!1}=t,{match:o}=t;if(null==o&&(o=()=>!0),r){var i=[],s=$e.path(e,r);for(var[l,c]of Ge.levels(e,s))if(o(l,c)&&(i.push([l,c]),!a&&$e.isVoid(e,l)))break;n&&i.reverse(),yield*i}},marks(e){var{marks:t,selection:r}=e;if(!r)return null;if(t)return t;if(ct.isExpanded(r)){var[n]=$e.nodes(e,{match:gt.isText});if(n){var[a]=n;return we(a,Ie)}return{}}var{anchor:o}=r,{path:i}=o,[s]=$e.leaf(e,i);if(0===o.offset){var l=$e.previous(e,{at:i,match:gt.isText}),c=$e.above(e,{match:t=>$e.isBlock(e,t)});if(l&&c){var[u,d]=l,[,f]=c;tt.isAncestor(f,d)&&(s=u)}}return we(s,Ve)},next(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:a,at:o=e.selection}=t;if(o){var i=$e.after(e,o,{voids:n});if(i){var[,s]=$e.last(e,[]),l=[i.path,s];if(tt.isPath(o)&&0===o.length)throw new Error("Cannot get the next node from the root node!");if(null==a)if(tt.isPath(o)){var[c]=$e.parent(e,o);a=e=>c.children.includes(e)}else a=()=>!0;var[u]=$e.nodes(e,{at:l,match:a,mode:r,voids:n});return u}}},node(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=$e.path(e,t,r);return[Ge.get(e,n),n]},*nodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:r=e.selection,mode:n="all",universal:a=!1,reverse:o=!1,voids:i=!1}=t,{match:s}=t;if(s||(s=()=>!0),r){var l,c;if(Ue.isSpan(r))l=r[0],c=r[1];else{var u=$e.path(e,r,{edge:"start"}),d=$e.path(e,r,{edge:"end"});l=o?d:u,c=o?u:d}var f,h=Ge.nodes(e,{reverse:o,from:l,to:c,pass:t=>{var[r]=t;return!i&&$e.isVoid(e,r)}}),v=[];for(var[p,g]of h){var m=f&&0===tt.compare(g,f[1]);if("highest"!==n||!m)if(s(p,g))if("lowest"===n&&m)f=[p,g];else{var w="lowest"===n?f:[p,g];w&&(a?v.push(w):yield w),f=[p,g]}else if(a&&!m&&gt.isText(p))return}"lowest"===n&&f&&(a?v.push(f):yield f),a&&(yield*v)}},normalize(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{force:r=!1}=t,n=e=>le.get(e)||[];if($e.isNormalizing(e)){if(r){var a=Array.from(Ge.nodes(e),(e=>{var[,t]=e;return t}));le.set(e,a)}0!==n(e).length&&$e.withoutNormalizing(e,(()=>{for(var t of n(e))if(Ge.has(e,t)){var r=$e.node(e,t),[a,o]=r;We.isElement(a)&&0===a.children.length&&e.normalizeNode(r)}for(var i=42*n(e).length,s=0;0!==n(e).length;){if(s>i)throw new Error("\n            Could not completely normalize the editor after ".concat(i," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          "));var l=n(e).pop();if(Ge.has(e,l)){var c=$e.node(e,l);e.normalizeNode(c)}s++}}))}},parent(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=$e.path(e,t,r),a=tt.parent(n);return $e.node(e,a)},path(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{depth:n,edge:a}=r;if(tt.isPath(t))if("start"===a){var[,o]=Ge.first(e,t);t=o}else if("end"===a){var[,i]=Ge.last(e,t);t=i}return ct.isRange(t)&&(t="start"===a?ct.start(t):"end"===a?ct.end(t):tt.common(t.anchor.path,t.focus.path)),ot.isPoint(t)&&(t=t.path),null!=n&&(t=t.slice(0,n)),t},hasPath:(e,t)=>Ge.has(e,t),pathRef(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,a={current:t,affinity:n,unref(){var{current:t}=a;return $e.pathRefs(e).delete(a),a.current=null,t}};return $e.pathRefs(e).add(a),a},pathRefs(e){var t=de.get(e);return t||(t=new Set,de.set(e,t)),t},point(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{edge:n="start"}=r;if(tt.isPath(t)){var a;if("end"===n){var[,o]=Ge.last(e,t);a=o}else{var[,i]=Ge.first(e,t);a=i}var s=Ge.get(e,a);if(!gt.isText(s))throw new Error("Cannot get the ".concat(n," point in the node at path [").concat(t,"] because it has no ").concat(n," text node."));return{path:a,offset:"end"===n?s.text.length:0}}if(ct.isRange(t)){var[l,c]=ct.edges(t);return"start"===n?l:c}return t},pointRef(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,a={current:t,affinity:n,unref(){var{current:t}=a;return $e.pointRefs(e).delete(a),a.current=null,t}};return $e.pointRefs(e).add(a),a},pointRefs(e){var t=fe.get(e);return t||(t=new Set,fe.set(e,t)),t},*positions(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{at:r=e.selection,unit:n="offset",reverse:a=!1,voids:o=!1}=t;if(r){var i=$e.range(e,r),[s,l]=ct.edges(i),c=a?l:s,u=!1,d="",f=0,h=0,v=0;for(var[p,g]of $e.nodes(e,{at:r,reverse:a,voids:o})){if(We.isElement(p)){if(!o&&e.isVoid(p)){yield $e.start(e,g);continue}if(e.isInline(p))continue;if($e.hasInlines(e,p)){var m=tt.isAncestor(g,l.path)?l:$e.end(e,g),w=tt.isAncestor(g,s.path)?s:$e.start(e,g);d=$e.string(e,{anchor:w,focus:m},{voids:o}),u=!0}}if(gt.isText(p)){var y=tt.equals(g,c.path);for(y?(h=a?c.offset:p.text.length-c.offset,v=c.offset):(h=p.text.length,v=a?h:0),(y||u||"offset"===n)&&(yield{path:g,offset:v},u=!1);;){if(0===f){if(""===d)break;f=b(d,n,a),d=Oe(d,f,a)[1]}if(v=a?v-f:v+f,(h-=f)<0){f=-h;break}f=0,yield{path:g,offset:v}}}}}function b(e,t,r){return"character"===t?xe(e,r):"word"===t?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=0,n=!1;e.length>0;){var a=xe(e,t),[o,i]=Oe(e,a,t);if(ke(o,i,t))n=!0,r+=a;else{if(n)break;r+=a}e=i}return r}(e,r):"line"===t||"block"===t?e.length:1}},previous(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:a,at:o=e.selection}=t;if(o){var i=$e.before(e,o,{voids:n});if(i){var[,s]=$e.first(e,[]),l=[i.path,s];if(tt.isPath(o)&&0===o.length)throw new Error("Cannot get the previous node from the root node!");if(null==a)if(tt.isPath(o)){var[c]=$e.parent(e,o);a=e=>c.children.includes(e)}else a=()=>!0;var[u]=$e.nodes(e,{reverse:!0,at:l,match:a,mode:r,voids:n});return u}}},range:(e,t,r)=>ct.isRange(t)&&!r?t:{anchor:$e.start(e,t),focus:$e.end(e,r||t)},rangeRef(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{affinity:n="forward"}=r,a={current:t,affinity:n,unref(){var{current:t}=a;return $e.rangeRefs(e).delete(a),a.current=null,t}};return $e.rangeRefs(e).add(a),a},rangeRefs(e){var t=he.get(e);return t||(t=new Set,he.set(e,t)),t},removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){ue.set(e,t)},start:(e,t)=>$e.point(e,t,{edge:"start"}),string(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:n=!1}=r,a=$e.range(e,t),[o,i]=ct.edges(a),s="";for(var[l,c]of $e.nodes(e,{at:a,match:gt.isText,voids:n})){var u=l.text;tt.equals(c,i.path)&&(u=u.slice(0,i.offset)),tt.equals(c,o.path)&&(u=u.slice(o.offset)),s+=u}return s},unhangRange(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{voids:n=!1}=r,[a,o]=ct.edges(t);if(0!==a.offset||0!==o.offset||ct.isCollapsed(t))return t;var i=$e.above(e,{at:o,match:t=>$e.isBlock(e,t)}),s=i?i[1]:[],l={anchor:$e.start(e,[]),focus:o},c=!0;for(var[u,d]of $e.nodes(e,{at:l,match:gt.isText,reverse:!0,voids:n}))if(c)c=!1;else if(""!==u.text||tt.isBefore(d,s)){o={path:d,offset:u.text.length};break}return{anchor:a,focus:o}},void(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $e.above(e,He(He({},t),{},{match:t=>$e.isVoid(e,t)}))},withoutNormalizing(e,t){var r=$e.isNormalizing(e);$e.setNormalizing(e,!1);try{t()}finally{$e.setNormalizing(e,r)}$e.normalize(e)}},Ue={isSpan:e=>Array.isArray(e)&&2===e.length&&e.every(tt.isPath)},Ke=["children"],Je=["text"],Qe=new WeakMap,Ge={ancestor(e,t){var r=Ge.get(e,t);if(gt.isText(r))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(r));return r},*ancestors(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var n of tt.ancestors(t,r)){var a=[Ge.ancestor(e,n),n];yield a}},child(e,t){if(gt.isText(e))throw new Error("Cannot get the child of a text node: ".concat(JSON.stringify(e)));var r=e.children[t];if(null==r)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(JSON.stringify(e)));return r},*children(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{reverse:n=!1}=r,a=Ge.ancestor(e,t),{children:o}=a,i=n?o.length-1:0;n?i>=0:i<o.length;){var s=Ge.child(a,i),l=t.concat(i);yield[s,l],i=n?i-1:i+1}},common(e,t,r){var n=tt.common(t,r);return[Ge.get(e,n),n]},descendant(e,t){var r=Ge.get(e,t);if($e.isEditor(r))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(r));return r},*descendants(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[r,n]of Ge.nodes(e,t))0!==n.length&&(yield[r,n])},*elements(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[r,n]of Ge.nodes(e,t))We.isElement(r)&&(yield[r,n])},extractProps:e=>We.isAncestor(e)?we(e,Ke):we(e,Je),first(e,t){for(var r=t.slice(),n=Ge.get(e,r);n&&!gt.isText(n)&&0!==n.children.length;)n=n.children[0],r.push(0);return[n,r]},fragment(e,t){if(gt.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(JSON.stringify(e)));var r=ae({children:e.children},(e=>{var[r,n]=ct.edges(t),a=Ge.nodes(e,{reverse:!0,pass:e=>{var[,r]=e;return!ct.includes(t,r)}});for(var[,o]of a){if(!ct.includes(t,o)){var i=Ge.parent(e,o),s=o[o.length-1];i.children.splice(s,1)}if(tt.equals(o,n.path)){var l=Ge.leaf(e,o);l.text=l.text.slice(0,n.offset)}if(tt.equals(o,r.path)){var c=Ge.leaf(e,o);c.text=c.text.slice(r.offset)}}$e.isEditor(e)&&(e.selection=null)}));return r.children},get(e,t){for(var r=e,n=0;n<t.length;n++){var a=t[n];if(gt.isText(r)||!r.children[a])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(JSON.stringify(e)));r=r.children[a]}return r},has(e,t){for(var r=e,n=0;n<t.length;n++){var a=t[n];if(gt.isText(r)||!r.children[a])return!1;r=r.children[a]}return!0},isNode:e=>gt.isText(e)||We.isElement(e)||$e.isEditor(e),isNodeList(e){if(!Array.isArray(e))return!1;var t=Qe.get(e);if(void 0!==t)return t;var r=e.every((e=>Ge.isNode(e)));return Qe.set(e,r),r},last(e,t){for(var r=t.slice(),n=Ge.get(e,r);n&&!gt.isText(n)&&0!==n.children.length;){var a=n.children.length-1;n=n.children[a],r.push(a)}return[n,r]},leaf(e,t){var r=Ge.get(e,t);if(!gt.isText(r))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(r));return r},*levels(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};for(var n of tt.levels(t,r)){var a=Ge.get(e,n);yield[a,n]}},matches:(e,t)=>We.isElement(e)&&We.isElementProps(t)&&We.matches(e,t)||gt.isText(e)&&gt.isTextProps(t)&&gt.matches(e,t),*nodes(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{pass:r,reverse:n=!1}=t,{from:a=[],to:o}=t,i=new Set,s=[],l=e;!o||!(n?tt.isBefore(s,o):tt.isAfter(s,o));)if(i.has(l)||(yield[l,s]),i.has(l)||gt.isText(l)||0===l.children.length||null!=r&&!1!==r([l,s])){if(0===s.length)break;if(!n){var c=tt.next(s);if(Ge.has(e,c)){s=c,l=Ge.get(e,s);continue}}if(n&&0!==s[s.length-1])s=tt.previous(s),l=Ge.get(e,s);else s=tt.parent(s),l=Ge.get(e,s),i.add(l)}else{i.add(l);var u=n?l.children.length-1:0;tt.isAncestor(s,a)&&(u=a[s.length]),s=s.concat(u),l=Ge.get(e,s)}},parent(e,t){var r=tt.parent(t),n=Ge.get(e,r);if(gt.isText(n))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return n},string:e=>gt.isText(e)?e.text:e.children.map(Ge.string).join(""),*texts(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var[r,n]of Ge.nodes(e,t))gt.isText(r)&&(yield[r,n])}};function Xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xe(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var et={isNodeOperation:e=>et.isOperation(e)&&e.type.endsWith("_node"),isOperation(e){if(!i(e))return!1;switch(e.type){case"insert_node":case"remove_node":return tt.isPath(e.path)&&Ge.isNode(e.node);case"insert_text":case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&tt.isPath(e.path);case"merge_node":return"number"==typeof e.position&&tt.isPath(e.path)&&i(e.properties);case"move_node":return tt.isPath(e.path)&&tt.isPath(e.newPath);case"set_node":return tt.isPath(e.path)&&i(e.properties)&&i(e.newProperties);case"set_selection":return null===e.properties&&ct.isRange(e.newProperties)||null===e.newProperties&&ct.isRange(e.properties)||i(e.properties)&&i(e.newProperties);case"split_node":return tt.isPath(e.path)&&"number"==typeof e.position&&i(e.properties);default:return!1}},isOperationList:e=>Array.isArray(e)&&e.every((e=>et.isOperation(e))),isSelectionOperation:e=>et.isOperation(e)&&e.type.endsWith("_selection"),isTextOperation:e=>et.isOperation(e)&&e.type.endsWith("_text"),inverse(e){switch(e.type){case"insert_node":return Ye(Ye({},e),{},{type:"remove_node"});case"insert_text":return Ye(Ye({},e),{},{type:"remove_text"});case"merge_node":return Ye(Ye({},e),{},{type:"split_node",path:tt.previous(e.path)});case"move_node":var{newPath:t,path:r}=e;if(tt.equals(t,r))return e;if(tt.isSibling(r,t))return Ye(Ye({},e),{},{path:t,newPath:r});var n=tt.transform(r,e),a=tt.transform(tt.next(r),e);return Ye(Ye({},e),{},{path:n,newPath:a});case"remove_node":return Ye(Ye({},e),{},{type:"insert_node"});case"remove_text":return Ye(Ye({},e),{},{type:"insert_text"});case"set_node":var{properties:o,newProperties:i}=e;return Ye(Ye({},e),{},{properties:i,newProperties:o});case"set_selection":var{properties:s,newProperties:l}=e;return Ye(Ye({},e),{},null==s?{properties:l,newProperties:null}:null==l?{properties:null,newProperties:s}:{properties:l,newProperties:s});case"split_node":return Ye(Ye({},e),{},{type:"merge_node",path:tt.next(e.path)})}}},tt={ancestors(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,n=tt.levels(e,t);return n=r?n.slice(1):n.slice(0,-1)},common(e,t){for(var r=[],n=0;n<e.length&&n<t.length;n++){var a=e[n];if(a!==t[n])break;r.push(a)}return r},compare(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},endsAfter(e,t){var r=e.length-1,n=e.slice(0,r),a=t.slice(0,r),o=e[r],i=t[r];return tt.equals(n,a)&&o>i},endsAt(e,t){var r=e.length,n=e.slice(0,r),a=t.slice(0,r);return tt.equals(n,a)},endsBefore(e,t){var r=e.length-1,n=e.slice(0,r),a=t.slice(0,r),o=e[r],i=t[r];return tt.equals(n,a)&&o<i},equals:(e,t)=>e.length===t.length&&e.every(((e,r)=>e===t[r])),hasPrevious:e=>e[e.length-1]>0,isAfter:(e,t)=>1===tt.compare(e,t),isAncestor:(e,t)=>e.length<t.length&&0===tt.compare(e,t),isBefore:(e,t)=>-1===tt.compare(e,t),isChild:(e,t)=>e.length===t.length+1&&0===tt.compare(e,t),isCommon:(e,t)=>e.length<=t.length&&0===tt.compare(e,t),isDescendant:(e,t)=>e.length>t.length&&0===tt.compare(e,t),isParent:(e,t)=>e.length+1===t.length&&0===tt.compare(e,t),isPath:e=>Array.isArray(e)&&(0===e.length||"number"==typeof e[0]),isSibling(e,t){if(e.length!==t.length)return!1;var r=e.slice(0,-1),n=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&tt.equals(r,n)},levels(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,n=[],a=0;a<=e.length;a++)n.push(e.slice(0,a));return r&&n.reverse(),n},next(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},parent(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!tt.isAncestor(t,e)&&!tt.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ae(e,(n=>{var{affinity:a="forward"}=r;if(e&&0!==(null==e?void 0:e.length)){if(null===n)return null;switch(t.type){case"insert_node":var{path:o}=t;(tt.equals(o,n)||tt.endsBefore(o,n)||tt.isAncestor(o,n))&&(n[o.length-1]+=1);break;case"remove_node":var{path:i}=t;if(tt.equals(i,n)||tt.isAncestor(i,n))return null;tt.endsBefore(i,n)&&(n[i.length-1]-=1);break;case"merge_node":var{path:s,position:l}=t;tt.equals(s,n)||tt.endsBefore(s,n)?n[s.length-1]-=1:tt.isAncestor(s,n)&&(n[s.length-1]-=1,n[s.length]+=l);break;case"split_node":var{path:c,position:u}=t;if(tt.equals(c,n)){if("forward"===a)n[n.length-1]+=1;else if("backward"!==a)return null}else tt.endsBefore(c,n)?n[c.length-1]+=1:tt.isAncestor(c,n)&&e[c.length]>=u&&(n[c.length-1]+=1,n[c.length]-=u);break;case"move_node":var{path:d,newPath:f}=t;if(tt.equals(d,f))return;if(tt.isAncestor(d,n)||tt.equals(d,n)){var h=f.slice();return tt.endsBefore(d,f)&&d.length<f.length&&(h[d.length-1]-=1),h.concat(n.slice(d.length))}tt.isSibling(d,f)&&(tt.isAncestor(f,n)||tt.equals(f,n))?tt.endsBefore(d,n)?n[d.length-1]-=1:n[d.length-1]+=1:tt.endsBefore(f,n)||tt.equals(f,n)||tt.isAncestor(f,n)?(tt.endsBefore(d,n)&&(n[d.length-1]-=1),n[f.length-1]+=1):tt.endsBefore(d,n)&&(tt.equals(f,n)&&(n[f.length-1]+=1),n[d.length-1]-=1)}}}))}},rt={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var a=tt.transform(r,t,{affinity:n});e.current=a,null==a&&e.unref()}}};function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function at(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ot={compare(e,t){var r=tt.compare(e.path,t.path);return 0===r?e.offset<t.offset?-1:e.offset>t.offset?1:0:r},isAfter:(e,t)=>1===ot.compare(e,t),isBefore:(e,t)=>-1===ot.compare(e,t),equals:(e,t)=>e.offset===t.offset&&tt.equals(e.path,t.path),isPoint:e=>i(e)&&"number"==typeof e.offset&&tt.isPath(e.path),transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ae(e,(e=>{if(null===e)return null;var{affinity:n="forward"}=r,{path:a,offset:o}=e;switch(t.type){case"insert_node":case"move_node":e.path=tt.transform(a,t,r);break;case"insert_text":tt.equals(t.path,a)&&t.offset<=o&&(e.offset+=t.text.length);break;case"merge_node":tt.equals(t.path,a)&&(e.offset+=t.position),e.path=tt.transform(a,t,r);break;case"remove_text":tt.equals(t.path,a)&&t.offset<=o&&(e.offset-=Math.min(o-t.offset,t.text.length));break;case"remove_node":if(tt.equals(t.path,a)||tt.isAncestor(t.path,a))return null;e.path=tt.transform(a,t,r);break;case"split_node":if(tt.equals(t.path,a)){if(t.position===o&&null==n)return null;(t.position<o||t.position===o&&"forward"===n)&&(e.offset-=t.position,e.path=tt.transform(a,t,at(at({},r),{},{affinity:"forward"})))}else e.path=tt.transform(a,t,r)}}))}},it={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var a=ot.transform(r,t,{affinity:n});e.current=a,null==a&&e.unref()}}},st=["anchor","focus"];function lt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ct={edges(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,{anchor:n,focus:a}=e;return ct.isBackward(e)===r?[n,a]:[a,n]},end(e){var[,t]=ct.edges(e);return t},equals:(e,t)=>ot.equals(e.anchor,t.anchor)&&ot.equals(e.focus,t.focus),includes(e,t){if(ct.isRange(t)){if(ct.includes(e,t.anchor)||ct.includes(e,t.focus))return!0;var[r,n]=ct.edges(e),[a,o]=ct.edges(t);return ot.isBefore(r,a)&&ot.isAfter(n,o)}var[i,s]=ct.edges(e),l=!1,c=!1;return ot.isPoint(t)?(l=ot.compare(t,i)>=0,c=ot.compare(t,s)<=0):(l=tt.compare(t,i.path)>=0,c=tt.compare(t,s.path)<=0),l&&c},intersection(e,t){var r=we(e,st),[n,a]=ct.edges(e),[o,i]=ct.edges(t),s=ot.isBefore(n,o)?o:n,l=ot.isBefore(a,i)?a:i;return ot.isBefore(l,s)?null:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({anchor:s,focus:l},r)},isBackward(e){var{anchor:t,focus:r}=e;return ot.isAfter(t,r)},isCollapsed(e){var{anchor:t,focus:r}=e;return ot.equals(t,r)},isExpanded:e=>!ct.isCollapsed(e),isForward:e=>!ct.isBackward(e),isRange:e=>i(e)&&ot.isPoint(e.anchor)&&ot.isPoint(e.focus),*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=ct.edges(e);return t},transform(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return ae(e,(e=>{if(null===e)return null;var n,a,{affinity:o="inward"}=r;if("inward"===o){var i=ct.isCollapsed(e);ct.isForward(e)?(n="forward",a=i?n:"backward"):(n="backward",a=i?n:"forward")}else"outward"===o?ct.isForward(e)?(n="backward",a="forward"):(n="forward",a="backward"):(n=o,a=o);var s=ot.transform(e.anchor,t,{affinity:n}),l=ot.transform(e.focus,t,{affinity:a});if(!s||!l)return null;e.anchor=s,e.focus=l}))}},ut={transform(e,t){var{current:r,affinity:n}=e;if(null!=r){var a=ct.transform(r,t,{affinity:n});e.current=a,null==a&&e.unref()}}},dt=(e,t)=>{for(var r in e){var n=e[r],a=t[r];if(i(n)&&i(a)){if(!dt(n,a))return!1}else{if(Array.isArray(n)&&Array.isArray(a)){if(n.length!==a.length)return!1;for(var o=0;o<n.length;o++)if(n[o]!==a[o])return!1;return!0}if(n!==a)return!1}}for(var s in t)if(void 0===e[s]&&void 0!==t[s])return!1;return!0},ft=["text"],ht=["anchor","focus"];function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var gt={equals(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{loose:n=!1}=r;function a(e){return we(e,ft)}return dt(n?a(e):e,n?a(t):t)},isText:e=>i(e)&&"string"==typeof e.text,isTextList:e=>Array.isArray(e)&&e.every((e=>gt.isText(e))),isTextProps:e=>void 0!==e.text,matches(e,t){for(var r in t)if("text"!==r&&(!e.hasOwnProperty(r)||e[r]!==t[r]))return!1;return!0},decorations(e,t){var r=[pt({},e)];for(var n of t){var a=we(n,ht),[o,i]=ct.edges(n),s=[],l=0;for(var c of r){var{length:u}=c.text,d=l;if(l+=u,o.offset<=d&&i.offset>=l)Object.assign(c,a),s.push(c);else if(o.offset!==i.offset&&(o.offset===l||i.offset===d)||o.offset>l||i.offset<d||i.offset===d&&0!==d)s.push(c);else{var f=c,h=void 0,v=void 0;if(i.offset<l){var p=i.offset-d;v=pt(pt({},f),{},{text:f.text.slice(p)}),f=pt(pt({},f),{},{text:f.text.slice(0,p)})}if(o.offset>d){var g=o.offset-d;h=pt(pt({},f),{},{text:f.text.slice(0,g)}),f=pt(pt({},f),{},{text:f.text.slice(g)})}Object.assign(f,a),h&&s.push(h),s.push(f),v&&s.push(v)}}r=s}return r}};function mt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var yt={transform(e,t){e.children=oe(e.children);var r=e.selection&&oe(e.selection);try{r=((e,t,r)=>{switch(r.type){case"insert_node":var{path:n,node:a}=r,o=Ge.parent(e,n),i=n[n.length-1];if(i>o.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(o.children.splice(i,0,a),t)for(var[s,l]of ct.points(t))t[l]=ot.transform(s,r);break;case"insert_text":var{path:c,offset:u,text:d}=r;if(0===d.length)break;var f=Ge.leaf(e,c),h=f.text.slice(0,u),v=f.text.slice(u);if(f.text=h+d+v,t)for(var[p,g]of ct.points(t))t[g]=ot.transform(p,r);break;case"merge_node":var{path:m}=r,w=Ge.get(e,m),y=tt.previous(m),b=Ge.get(e,y),E=Ge.parent(e,m),x=m[m.length-1];if(gt.isText(w)&&gt.isText(b))b.text+=w.text;else{if(gt.isText(w)||gt.isText(b))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(m,"] to nodes of different interfaces: ").concat(w," ").concat(b));b.children.push(...w.children)}if(E.children.splice(x,1),t)for(var[O,k]of ct.points(t))t[k]=ot.transform(O,r);break;case"move_node":var{path:P,newPath:C}=r;if(tt.isAncestor(P,C))throw new Error("Cannot move a path [".concat(P,"] to new path [").concat(C,"] because the destination is inside itself."));var D=Ge.get(e,P),N=Ge.parent(e,P),S=P[P.length-1];N.children.splice(S,1);var j=tt.transform(P,r),F=Ge.get(e,tt.parent(j)),B=j[j.length-1];if(F.children.splice(B,0,D),t)for(var[A,M]of ct.points(t))t[M]=ot.transform(A,r);break;case"remove_node":var{path:R}=r,T=R[R.length-1];if(Ge.parent(e,R).children.splice(T,1),t)for(var[_,L]of ct.points(t)){var z=ot.transform(_,r);if(null!=t&&null!=z)t[L]=z;else{var W=void 0,I=void 0;for(var[V,q]of Ge.texts(e)){if(-1!==tt.compare(q,R)){I=[V,q];break}W=[V,q]}var H=!1;W&&I&&(H=tt.equals(I[1],R)?!tt.hasPrevious(I[1]):tt.common(W[1],R).length<tt.common(I[1],R).length),W&&!H?(_.path=W[1],_.offset=W[0].text.length):I?(_.path=I[1],_.offset=0):t=null}}break;case"remove_text":var{path:Z,offset:$,text:U}=r;if(0===U.length)break;var K=Ge.leaf(e,Z),J=K.text.slice(0,$),Q=K.text.slice($+U.length);if(K.text=J+Q,t)for(var[G,X]of ct.points(t))t[X]=ot.transform(G,r);break;case"set_node":var{path:Y,properties:ee,newProperties:te}=r;if(0===Y.length)throw new Error("Cannot set properties on the root node!");var re=Ge.get(e,Y);for(var ne in te){if("children"===ne||"text"===ne)throw new Error('Cannot set the "'.concat(ne,'" property of nodes!'));var ae=te[ne];null==ae?delete re[ne]:re[ne]=ae}for(var oe in ee)te.hasOwnProperty(oe)||delete re[oe];break;case"set_selection":var{newProperties:ie}=r;if(null==ie)t=ie;else{if(null==t){if(!ct.isRange(ie))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(ie)," when there is no current selection."));t=wt({},ie)}for(var se in ie){var le=ie[se];if(null==le){if("anchor"===se||"focus"===se)throw new Error('Cannot remove the "'.concat(se,'" selection property'));delete t[se]}else t[se]=le}}break;case"split_node":var{path:ce,position:ue,properties:de}=r;if(0===ce.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(ce,"] because the root node cannot be split."));var fe,he=Ge.get(e,ce),ve=Ge.parent(e,ce),pe=ce[ce.length-1];if(gt.isText(he)){var ge=he.text.slice(0,ue),me=he.text.slice(ue);he.text=ge,fe=wt(wt({},de),{},{text:me})}else{var we=he.children.slice(0,ue),ye=he.children.slice(ue);he.children=we,fe=wt(wt({},de),{},{children:ye})}if(ve.children.splice(pe+1,0,fe),t)for(var[be,Ee]of ct.points(t))t[Ee]=ot.transform(be,r)}return t})(e,r,t)}finally{e.children=ie(e.children),e.selection=r?l(r)?ie(r):r:null}}},bt=["text"],Et=["children"];function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var kt={insertNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$e.withoutNormalizing(e,(()=>{var{hanging:n=!1,voids:a=!1,mode:o="lowest"}=r,{at:i,match:s,select:l}=r;if(Ge.isNode(t)&&(t=[t]),0!==t.length){var[c]=t;if(i||(i=e.selection?e.selection:e.children.length>0?$e.end(e,[]):[0],l=!0),null==l&&(l=!1),ct.isRange(i))if(n||(i=$e.unhangRange(e,i)),ct.isCollapsed(i))i=i.anchor;else{var[,u]=ct.edges(i),d=$e.pointRef(e,u);Mt.delete(e,{at:i}),i=d.unref()}if(ot.isPoint(i)){null==s&&(s=gt.isText(c)?e=>gt.isText(e):e.isInline(c)?t=>gt.isText(t)||$e.isInline(e,t):t=>$e.isBlock(e,t));var[f]=$e.nodes(e,{at:i.path,match:s,mode:o,voids:a});if(!f)return;var[,h]=f,v=$e.pathRef(e,h),p=$e.isEnd(e,i,h);Mt.splitNodes(e,{at:i,match:s,mode:o,voids:a});var g=v.unref();i=p?tt.next(g):g}var m=tt.parent(i),w=i[i.length-1];if(a||!$e.void(e,{at:m})){for(var y of t){var b=m.concat(w);w++,e.apply({type:"insert_node",path:b,node:y}),i=tt.next(i)}if(i=tt.previous(i),l){var E=$e.end(e,i);E&&Mt.select(e,E)}}}}))},liftNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$e.withoutNormalizing(e,(()=>{var{at:r=e.selection,mode:n="lowest",voids:a=!1}=t,{match:o}=t;if(null==o&&(o=tt.isPath(r)?Dt(e,r):t=>$e.isBlock(e,t)),r){var i=$e.nodes(e,{at:r,match:o,mode:n,voids:a}),s=Array.from(i,(t=>{var[,r]=t;return $e.pathRef(e,r)}));for(var l of s){var c=l.unref();if(c.length<2)throw new Error("Cannot lift node at a path [".concat(c,"] because it has a depth of less than `2`."));var u=$e.node(e,tt.parent(c)),[d,f]=u,h=c[c.length-1],{length:v}=d.children;if(1===v){var p=tt.next(f);Mt.moveNodes(e,{at:c,to:p,voids:a}),Mt.removeNodes(e,{at:f,voids:a})}else if(0===h)Mt.moveNodes(e,{at:c,to:f,voids:a});else if(h===v-1){var g=tt.next(f);Mt.moveNodes(e,{at:c,to:g,voids:a})}else{var m=tt.next(c),w=tt.next(f);Mt.splitNodes(e,{at:m,voids:a}),Mt.moveNodes(e,{at:c,to:w,voids:a})}}}}))},mergeNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$e.withoutNormalizing(e,(()=>{var{match:r,at:n=e.selection}=t,{hanging:a=!1,voids:o=!1,mode:i="lowest"}=t;if(n){if(null==r)if(tt.isPath(n)){var[s]=$e.parent(e,n);r=e=>s.children.includes(e)}else r=t=>$e.isBlock(e,t);if(!a&&ct.isRange(n)&&(n=$e.unhangRange(e,n)),ct.isRange(n))if(ct.isCollapsed(n))n=n.anchor;else{var[,l]=ct.edges(n),c=$e.pointRef(e,l);Mt.delete(e,{at:n}),n=c.unref(),null==t.at&&Mt.select(e,n)}var[u]=$e.nodes(e,{at:n,match:r,voids:o,mode:i}),d=$e.previous(e,{at:n,match:r,voids:o,mode:i});if(u&&d){var[f,h]=u,[v,p]=d;if(0!==h.length&&0!==p.length){var g,m,w=tt.next(p),y=tt.common(h,p),b=tt.isSibling(h,p),E=Array.from($e.levels(e,{at:h}),(e=>{var[t]=e;return t})).slice(y.length).slice(0,-1),x=$e.above(e,{at:h,mode:"highest",match:t=>E.includes(t)&&Pt(e,t)}),O=x&&$e.pathRef(e,x[1]);if(gt.isText(f)&&gt.isText(v)){var k=we(f,bt);m=v.text.length,g=k}else{if(!We.isElement(f)||!We.isElement(v))throw new Error("Cannot merge the node at path [".concat(h,"] with the previous sibling because it is not the same kind: ").concat(JSON.stringify(f)," ").concat(JSON.stringify(v)));k=we(f,Et);m=v.children.length,g=k}b||Mt.moveNodes(e,{at:h,to:w,voids:o}),O&&Mt.removeNodes(e,{at:O.current,voids:o}),We.isElement(v)&&$e.isEmpty(e,v)||gt.isText(v)&&""===v.text&&0!==p[p.length-1]?Mt.removeNodes(e,{at:p,voids:o}):e.apply({type:"merge_node",path:w,position:m,properties:g}),O&&O.unref()}}}}))},moveNodes(e,t){$e.withoutNormalizing(e,(()=>{var{to:r,at:n=e.selection,mode:a="lowest",voids:o=!1}=t,{match:i}=t;if(n){null==i&&(i=tt.isPath(n)?Dt(e,n):t=>$e.isBlock(e,t));var s=$e.pathRef(e,r),l=$e.nodes(e,{at:n,match:i,mode:a,voids:o}),c=Array.from(l,(t=>{var[,r]=t;return $e.pathRef(e,r)}));for(var u of c){var d=u.unref(),f=s.current;0!==d.length&&e.apply({type:"move_node",path:d,newPath:f}),s.current&&tt.isSibling(f,d)&&tt.isAfter(f,d)&&(s.current=tt.next(s.current))}s.unref()}}))},removeNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$e.withoutNormalizing(e,(()=>{var{hanging:r=!1,voids:n=!1,mode:a="lowest"}=t,{at:o=e.selection,match:i}=t;if(o){null==i&&(i=tt.isPath(o)?Dt(e,o):t=>$e.isBlock(e,t)),!r&&ct.isRange(o)&&(o=$e.unhangRange(e,o));var s=$e.nodes(e,{at:o,match:i,mode:a,voids:n}),l=Array.from(s,(t=>{var[,r]=t;return $e.pathRef(e,r)}));for(var c of l){var u=c.unref();if(u){var[d]=$e.node(e,u);e.apply({type:"remove_node",path:u,node:d})}}}}))},setNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$e.withoutNormalizing(e,(()=>{var{match:n,at:a=e.selection}=r,{hanging:o=!1,mode:i="lowest",split:s=!1,voids:l=!1}=r;if(a){if(null==n&&(n=tt.isPath(a)?Dt(e,a):t=>$e.isBlock(e,t)),!o&&ct.isRange(a)&&(a=$e.unhangRange(e,a)),s&&ct.isRange(a)){if(ct.isCollapsed(a)&&$e.leaf(e,a.anchor)[0].text.length>0)return;var c=$e.rangeRef(e,a,{affinity:"inward"}),[u,d]=ct.edges(a),f="lowest"===i?"lowest":"highest",h=$e.isEnd(e,d,d.path);Mt.splitNodes(e,{at:d,match:n,mode:f,voids:l,always:!h});var v=$e.isStart(e,u,u.path);Mt.splitNodes(e,{at:u,match:n,mode:f,voids:l,always:!v}),a=c.unref(),null==r.at&&Mt.select(e,a)}for(var[p,g]of $e.nodes(e,{at:a,match:n,mode:i,voids:l})){var m={},w={};if(0!==g.length){var y=!1;for(var b in t)"children"!==b&&"text"!==b&&t[b]!==p[b]&&(y=!0,p.hasOwnProperty(b)&&(m[b]=p[b]),null!=t[b]&&(w[b]=t[b]));y&&e.apply({type:"set_node",path:g,properties:m,newProperties:w})}}}}))},splitNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$e.withoutNormalizing(e,(()=>{var{mode:r="lowest",voids:n=!1}=t,{match:a,at:o=e.selection,height:i=0,always:s=!1}=t;if(null==a&&(a=t=>$e.isBlock(e,t)),ct.isRange(o)&&(o=Ct(e,o)),tt.isPath(o)){var l=o,c=$e.point(e,l),[u]=$e.parent(e,l);a=e=>e===u,i=c.path.length-l.length+1,o=c,s=!0}if(o){var d=$e.pointRef(e,o,{affinity:"backward"}),[f]=$e.nodes(e,{at:o,match:a,mode:r,voids:n});if(f){var h=$e.void(e,{at:o,mode:"highest"});if(!n&&h){var[v,p]=h;if(We.isElement(v)&&e.isInline(v)){var g=$e.after(e,p);if(!g){var m=tt.next(p);Mt.insertNodes(e,{text:""},{at:m,voids:n}),g=$e.point(e,m)}o=g,s=!0}i=o.path.length-p.length+1,s=!0}var w=$e.pointRef(e,o),y=o.path.length-i,[,b]=f,E=o.path.slice(0,y),x=0===i?o.offset:o.path[y]+0;for(var[O,k]of $e.levels(e,{at:E,reverse:!0,voids:n})){var P=!1;if(k.length<b.length||0===k.length||!n&&$e.isVoid(e,O))break;var C=d.current,D=$e.isEnd(e,C,k);if(s||!d||!$e.isEdge(e,C,k)){P=!0;var N=Ge.extractProps(O);e.apply({type:"split_node",path:k,position:x,properties:N})}x=k[k.length-1]+(P||D?1:0)}if(null==t.at){var S=w.current||$e.end(e,[]);Mt.select(e,S)}d.unref(),w.unref()}}}))},unsetNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Array.isArray(t)||(t=[t]);var n={};for(var a of t)n[a]=null;Mt.setNodes(e,n,r)},unwrapNodes(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$e.withoutNormalizing(e,(()=>{var{mode:r="lowest",split:n=!1,voids:a=!1}=t,{at:o=e.selection,match:i}=t;if(o){null==i&&(i=tt.isPath(o)?Dt(e,o):t=>$e.isBlock(e,t)),tt.isPath(o)&&(o=$e.range(e,o));var s=ct.isRange(o)?$e.rangeRef(e,o):null,l=$e.nodes(e,{at:o,match:i,mode:r,voids:a}),c=Array.from(l,(t=>{var[,r]=t;return $e.pathRef(e,r)})).reverse(),u=function(t){var r=t.unref(),[o]=$e.node(e,r),i=$e.range(e,r);n&&s&&(i=ct.intersection(s.current,i)),Mt.liftNodes(e,{at:i,match:e=>We.isAncestor(o)&&o.children.includes(e),voids:a})};for(var d of c)u(d);s&&s.unref()}}))},wrapNodes(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$e.withoutNormalizing(e,(()=>{var{mode:n="lowest",split:a=!1,voids:o=!1}=r,{match:i,at:s=e.selection}=r;if(s){if(null==i&&(i=tt.isPath(s)?Dt(e,s):e.isInline(t)?t=>$e.isInline(e,t)||gt.isText(t):t=>$e.isBlock(e,t)),a&&ct.isRange(s)){var[l,c]=ct.edges(s),u=$e.rangeRef(e,s,{affinity:"inward"});Mt.splitNodes(e,{at:c,match:i,voids:o}),Mt.splitNodes(e,{at:l,match:i,voids:o}),s=u.unref(),null==r.at&&Mt.select(e,s)}var d=Array.from($e.nodes(e,{at:s,match:e.isInline(t)?t=>$e.isBlock(e,t):e=>$e.isEditor(e),mode:"lowest",voids:o}));for(var[,f]of d){var h=ct.isRange(s)?ct.intersection(s,$e.range(e,f)):s;if(h){var v=Array.from($e.nodes(e,{at:h,match:i,mode:n,voids:o}));if(v.length>0){var p=function(){var[r]=v,n=v[v.length-1],[,a]=r,[,i]=n;if(0===a.length&&0===i.length)return"continue";var s=tt.equals(a,i)?tt.parent(a):tt.common(a,i),l=$e.range(e,a,i),c=$e.node(e,s),[u]=c,d=s.length+1,f=tt.next(i.slice(0,d)),h=Ot(Ot({},t),{},{children:[]});Mt.insertNodes(e,h,{at:f,voids:o}),Mt.moveNodes(e,{at:l,match:e=>We.isAncestor(u)&&u.children.includes(e),to:f.concat(0),voids:o})}();if("continue"===p)continue}}}}}))}},Pt=(e,t)=>{if(We.isElement(t)){var r=t;return!!$e.isVoid(e,t)||1===r.children.length&&Pt(e,r.children[0])}return!$e.isEditor(t)},Ct=(e,t)=>{if(ct.isCollapsed(t))return t.anchor;var[,r]=ct.edges(t),n=$e.pointRef(e,r);return Mt.delete(e,{at:t}),n.unref()},Dt=(e,t)=>{var[r]=$e.node(e,t);return e=>e===r};function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var jt={collapse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{edge:r="anchor"}=t,{selection:n}=e;if(n)if("anchor"===r)Mt.select(e,n.anchor);else if("focus"===r)Mt.select(e,n.focus);else if("start"===r){var[a]=ct.edges(n);Mt.select(e,a)}else if("end"===r){var[,o]=ct.edges(n);Mt.select(e,o)}},deselect(e){var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},move(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{selection:r}=e,{distance:n=1,unit:a="character",reverse:o=!1}=t,{edge:i=null}=t;if(r){"start"===i&&(i=ct.isBackward(r)?"focus":"anchor"),"end"===i&&(i=ct.isBackward(r)?"anchor":"focus");var{anchor:s,focus:l}=r,c={distance:n,unit:a},u={};if(null==i||"anchor"===i){var d=o?$e.before(e,s,c):$e.after(e,s,c);d&&(u.anchor=d)}if(null==i||"focus"===i){var f=o?$e.before(e,l,c):$e.after(e,l,c);f&&(u.focus=f)}Mt.setSelection(e,u)}},select(e,t){var{selection:r}=e;if(t=$e.range(e,t),r)Mt.setSelection(e,t);else{if(!ct.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(JSON.stringify(t)));e.apply({type:"set_selection",properties:r,newProperties:t})}},setPoint(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{selection:n}=e,{edge:a="both"}=r;if(n){"start"===a&&(a=ct.isBackward(n)?"focus":"anchor"),"end"===a&&(a=ct.isBackward(n)?"anchor":"focus");var{anchor:o,focus:i}=n,s="anchor"===a?o:i;Mt.setSelection(e,{["anchor"===a?"anchor":"focus"]:St(St({},s),t)})}},setSelection(e,t){var{selection:r}=e,n={},a={};if(r){for(var o in t)("anchor"===o&&null!=t.anchor&&!ot.equals(t.anchor,r.anchor)||"focus"===o&&null!=t.focus&&!ot.equals(t.focus,r.focus)||"anchor"!==o&&"focus"!==o&&t[o]!==r[o])&&(n[o]=r[o],a[o]=t[o]);Object.keys(n).length>0&&e.apply({type:"set_selection",properties:n,newProperties:a})}}},Ft={delete(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$e.withoutNormalizing(e,(()=>{var{reverse:r=!1,unit:n="character",distance:a=1,voids:o=!1}=t,{at:i=e.selection,hanging:s=!1}=t;if(i){if(ct.isRange(i)&&ct.isCollapsed(i)&&(i=i.anchor),ot.isPoint(i)){var l=$e.void(e,{at:i,mode:"highest"});if(!o&&l){var[,c]=l;i=c}else{var u={unit:n,distance:a};i={anchor:i,focus:r?$e.before(e,i,u)||$e.start(e,[]):$e.after(e,i,u)||$e.end(e,[])},s=!0}}if(tt.isPath(i))Mt.removeNodes(e,{at:i,voids:o});else if(!ct.isCollapsed(i)){if(!s){var[,d]=ct.edges(i),f=$e.end(e,[]);ot.equals(d,f)||(i=$e.unhangRange(e,i,{voids:o}))}var[h,v]=ct.edges(i),p=$e.above(e,{match:t=>$e.isBlock(e,t),at:h,voids:o}),g=$e.above(e,{match:t=>$e.isBlock(e,t),at:v,voids:o}),m=p&&g&&!tt.equals(p[1],g[1]),w=tt.equals(h.path,v.path),y=o?null:$e.void(e,{at:h,mode:"highest"}),b=o?null:$e.void(e,{at:v,mode:"highest"});if(y){var E=$e.before(e,h);E&&p&&tt.isAncestor(p[1],E.path)&&(h=E)}if(b){var x=$e.after(e,v);x&&g&&tt.isAncestor(g[1],x.path)&&(v=x)}var O,k=[];for(var P of $e.nodes(e,{at:i,voids:o})){var[C,D]=P;O&&0===tt.compare(D,O)||(!o&&$e.isVoid(e,C)||!tt.isCommon(D,h.path)&&!tt.isCommon(D,v.path))&&(k.push(P),O=D)}var N=Array.from(k,(t=>{var[,r]=t;return $e.pathRef(e,r)})),S=$e.pointRef(e,h),j=$e.pointRef(e,v);if(!w&&!y){var F=S.current,[B]=$e.leaf(e,F),{path:A}=F,{offset:M}=h,R=B.text.slice(M);R.length>0&&e.apply({type:"remove_text",path:A,offset:M,text:R})}for(var T of N){var _=T.unref();Mt.removeNodes(e,{at:_,voids:o})}if(!b){var L=j.current,[z]=$e.leaf(e,L),{path:W}=L,I=w?h.offset:0,V=z.text.slice(I,v.offset);V.length>0&&e.apply({type:"remove_text",path:W,offset:I,text:V})}!w&&m&&j.current&&S.current&&Mt.mergeNodes(e,{at:j.current,hanging:!0,voids:o});var q=r?S.unref()||j.unref():j.unref()||S.unref();null==t.at&&q&&Mt.select(e,q)}}}))},insertFragment(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$e.withoutNormalizing(e,(()=>{var{hanging:n=!1,voids:a=!1}=r,{at:o=e.selection}=r;if(t.length&&o){if(ct.isRange(o))if(n||(o=$e.unhangRange(e,o)),ct.isCollapsed(o))o=o.anchor;else{var[,i]=ct.edges(o);if(!a&&$e.void(e,{at:i}))return;var s=$e.pointRef(e,i);Mt.delete(e,{at:o}),o=s.unref()}else tt.isPath(o)&&(o=$e.start(e,o));if(a||!$e.void(e,{at:o})){var l=$e.above(e,{at:o,match:t=>$e.isInline(e,t),mode:"highest",voids:a});if(l){var[,c]=l;if($e.isEnd(e,o,c))o=$e.after(e,c);else if($e.isStart(e,o,c)){o=$e.before(e,c)}}var u=$e.above(e,{match:t=>$e.isBlock(e,t),at:o,voids:a}),[,d]=u,f=$e.isStart(e,o,d),h=$e.isEnd(e,o,d),v=f&&h,p=!f||f&&h,g=!h,[,m]=Ge.first({children:t},[]),[,w]=Ge.last({children:t},[]),y=[],b=t=>{var[r,n]=t;return!(0===n.length)&&(!!v||!(p&&tt.isAncestor(n,m)&&We.isElement(r)&&!e.isVoid(r)&&!e.isInline(r))&&!(g&&tt.isAncestor(n,w)&&We.isElement(r)&&!e.isVoid(r)&&!e.isInline(r)))};for(var E of Ge.nodes({children:t},{pass:b}))b(E)&&y.push(E);var x=[],O=[],k=[],P=!0,C=!1;for(var[D]of y)We.isElement(D)&&!e.isInline(D)?(P=!1,C=!0,O.push(D)):P?x.push(D):k.push(D);var[N]=$e.nodes(e,{at:o,match:t=>gt.isText(t)||$e.isInline(e,t),mode:"highest",voids:a}),[,S]=N,j=$e.isStart(e,o,S),F=$e.isEnd(e,o,S),B=$e.pathRef(e,h?tt.next(d):d),A=$e.pathRef(e,F?tt.next(S):S),M=$e.pathRef(e,d);Mt.splitNodes(e,{at:o,match:t=>C?$e.isBlock(e,t):gt.isText(t)||$e.isInline(e,t),mode:C?"lowest":"highest",voids:a});var R=$e.pathRef(e,!j||j&&F?tt.next(S):S);if(Mt.insertNodes(e,x,{at:R.current,match:t=>gt.isText(t)||$e.isInline(e,t),mode:"highest",voids:a}),v&&O.length&&Mt.delete(e,{at:M.unref(),voids:a}),Mt.insertNodes(e,O,{at:B.current,match:t=>$e.isBlock(e,t),mode:"lowest",voids:a}),Mt.insertNodes(e,k,{at:A.current,match:t=>gt.isText(t)||$e.isInline(e,t),mode:"highest",voids:a}),!r.at){var T;T=k.length>0?tt.previous(A.current):O.length>0?tt.previous(B.current):tt.previous(R.current);var _=$e.end(e,T);Mt.select(e,_)}R.unref(),B.unref(),A.unref()}}}))},insertText(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};$e.withoutNormalizing(e,(()=>{var{voids:n=!1}=r,{at:a=e.selection}=r;if(a){if(tt.isPath(a)&&(a=$e.range(e,a)),ct.isRange(a))if(ct.isCollapsed(a))a=a.anchor;else{var o=ct.end(a);if(!n&&$e.void(e,{at:o}))return;var i=$e.pointRef(e,o);Mt.delete(e,{at:a,voids:n}),a=i.unref(),Mt.setSelection(e,{anchor:a,focus:a})}if(n||!$e.void(e,{at:a})){var{path:s,offset:l}=a;t.length>0&&e.apply({type:"insert_text",path:s,offset:l,text:t})}}}))}};function Bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function At(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(r),!0).forEach((function(t){se(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Mt=At(At(At(At({},yt),kt),jt),Ft),Rt=r(6907),Tt=r.n(Rt),_t=r(3493),Lt=r.n(_t);function zt(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function Wt(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function It(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return Wt(r.overflowY,t)||Wt(r.overflowX,t)||function(e){var t=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(e);return!!t&&(t.clientHeight<e.scrollHeight||t.clientWidth<e.scrollWidth)}(e)}return!1}function Vt(e,t,r,n,a,o,i,s){return o<e&&i>t||o>e&&i<t?0:o<=e&&s<=r||i>=t&&s>=r?o-e-n:i>t&&s<r||o<e&&s>r?i-t+a:0}function qt(e,t){var r=window,n=t.scrollMode,a=t.block,o=t.inline,i=t.boundary,s=t.skipOverflowHiddenElements,l="function"==typeof i?i:function(e){return e!==i};if(!zt(e))throw new TypeError("Invalid target");for(var c=document.scrollingElement||document.documentElement,u=[],d=e;zt(d)&&l(d);){if((d=d.parentElement)===c){u.push(d);break}null!=d&&d===document.body&&It(d)&&!It(document.documentElement)||null!=d&&It(d,s)&&u.push(d)}for(var f=r.visualViewport?r.visualViewport.width:innerWidth,h=r.visualViewport?r.visualViewport.height:innerHeight,v=window.scrollX||pageXOffset,p=window.scrollY||pageYOffset,g=e.getBoundingClientRect(),m=g.height,w=g.width,y=g.top,b=g.right,E=g.bottom,x=g.left,O="start"===a||"nearest"===a?y:"end"===a?E:y+m/2,k="center"===o?x+w/2:"end"===o?b:x,P=[],C=0;C<u.length;C++){var D=u[C],N=D.getBoundingClientRect(),S=N.height,j=N.width,F=N.top,B=N.right,A=N.bottom,M=N.left;if("if-needed"===n&&y>=0&&x>=0&&E<=h&&b<=f&&y>=F&&E<=A&&x>=M&&b<=B)return P;var R=getComputedStyle(D),T=parseInt(R.borderLeftWidth,10),_=parseInt(R.borderTopWidth,10),L=parseInt(R.borderRightWidth,10),z=parseInt(R.borderBottomWidth,10),W=0,I=0,V="offsetWidth"in D?D.offsetWidth-D.clientWidth-T-L:0,q="offsetHeight"in D?D.offsetHeight-D.clientHeight-_-z:0;if(c===D)W="start"===a?O:"end"===a?O-h:"nearest"===a?Vt(p,p+h,h,_,z,p+O,p+O+m,m):O-h/2,I="start"===o?k:"center"===o?k-f/2:"end"===o?k-f:Vt(v,v+f,f,T,L,v+k,v+k+w,w),W=Math.max(0,W+p),I=Math.max(0,I+v);else{W="start"===a?O-F-_:"end"===a?O-A+z+q:"nearest"===a?Vt(F,A,S,_,z+q,O,O+m,m):O-(F+S/2)+q/2,I="start"===o?k-M-T:"center"===o?k-(M+j/2)+V/2:"end"===o?k-B+L+V:Vt(M,B,j,T,L+V,k,k+w,w);var H=D.scrollLeft,Z=D.scrollTop;O+=Z-(W=Math.max(0,Math.min(Z+W,D.scrollHeight-S+q))),k+=H-(I=Math.max(0,Math.min(H+I,D.scrollWidth-j+V)))}P.push({el:D,top:W,left:I})}return P}function Ht(e){return e===Object(e)&&0!==Object.keys(e).length}const Zt=function(e,t){var r=!e.ownerDocument.documentElement.contains(e);if(Ht(t)&&"function"==typeof t.behavior)return t.behavior(r?[]:qt(e,t));if(!r){var n=function(e){return!1===e?{block:"end",inline:"nearest"}:Ht(e)?e:{block:"start",inline:"nearest"}}(t);return function(e,t){void 0===t&&(t="auto");var r="scrollBehavior"in document.body.style;e.forEach((function(e){var n=e.el,a=e.top,o=e.left;n.scroll&&r?n.scroll({top:a,left:o,behavior:t}):(n.scrollTop=a,n.scrollLeft=o)}))}(qt(e,n),n.behavior)}};var $t=r(9619),Ut=r(3935);function Kt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Jt(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var Qt=e=>{var{isLast:t,leaf:r,parent:a,text:o}=e,i=Lr(),s=Cn.findPath(i,o),l=tt.parent(s);return i.isVoid(a)?n.createElement(Xt,{length:Ge.string(a).length}):""!==r.text||a.children[a.children.length-1]!==o||i.isInline(a)||""!==$e.string(i,l)?""===r.text?n.createElement(Xt,null):t&&"\n"===r.text.slice(-1)?n.createElement(Gt,{isTrailing:!0,text:r.text}):n.createElement(Gt,{text:r.text}):n.createElement(Xt,{isLineBreak:!0})},Gt=e=>{var{text:t,isTrailing:r=!1}=e,a=(0,n.useRef)(null),o=(0,n.useRef)(0);return a.current&&a.current.textContent!==t&&(o.current+=1),n.createElement("span",{"data-slate-string":!0,ref:a,key:o.current},t,r?"\n":null)},Xt=e=>{var{length:t=0,isLineBreak:r=!1}=e;return n.createElement("span",{"data-slate-zero-width":r?"n":"z","data-slate-length":t},"\ufeff",r?n.createElement("br",null):null)},Yt=new WeakMap,er=new WeakMap,tr=new WeakMap,rr=new WeakMap,nr=new WeakMap,ar=new WeakMap,or=new WeakMap,ir=new WeakMap,sr=new WeakMap,lr=new WeakMap,cr=new WeakMap,ur=new WeakMap,dr=Symbol("placeholder"),fr=e=>{var{leaf:t,isLast:r,text:a,parent:o,renderPlaceholder:i,renderLeaf:s=(e=>n.createElement(vr,Object.assign({},e)))}=e,l=(0,n.useRef)(null);(0,n.useEffect)((()=>{var e=null==l?void 0:l.current,t=document.querySelector('[data-slate-editor="true"]');if(e&&t)return t.style.minHeight="".concat(e.clientHeight,"px"),()=>{t.style.minHeight="auto"}}),[l,t]);var c=n.createElement(Qt,{isLast:r,leaf:t,parent:o,text:a});if(t[dr]){var u={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:l}};c=n.createElement(n.Fragment,null,i(u),c)}return s({attributes:{"data-slate-leaf":!0},children:c,leaf:t,text:a})},hr=n.memo(fr,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&gt.equals(t.leaf,e.leaf)&&t.leaf[dr]===e.leaf[dr])),vr=e=>{var{attributes:t,children:r}=e;return n.createElement("span",Object.assign({},t),r)},pr="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,gr="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),mr="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),wr="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),yr="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),br="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),Er="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),xr="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),Or="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),kr="undefined"!=typeof navigator&&/.*QQBrowser/.test(navigator.userAgent),Pr=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Cr=!xr&&!br&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,Dr=Pr?n.useLayoutEffect:n.useEffect,Nr=["anchor","focus"],Sr=["anchor","focus"],jr=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every((r=>t.hasOwnProperty(r)&&e[r]===t[r])),Fr=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],a=t[r],o=Jt(n,Nr),i=Jt(a,Sr);if(!ct.equals(n,a)||n[dr]!==a[dr]||!jr(o,i))return!1}return!0},Br=e=>{for(var{decorations:t,isLast:r,parent:a,renderPlaceholder:o,renderLeaf:i,text:s}=e,l=Lr(),c=(0,n.useRef)(null),u=gt.decorations(s,t),d=Cn.findKey(l,s),f=[],h=0;h<u.length;h++){var v=u[h];f.push(n.createElement(hr,{isLast:r&&h===u.length-1,key:"".concat(d.id,"-").concat(h),renderPlaceholder:o,leaf:v,text:s,parent:a,renderLeaf:i}))}return Dr((()=>{var e=ir.get(l);c.current?(null==e||e.set(d,c.current),ar.set(s,c.current),nr.set(c.current,s)):(null==e||e.delete(d),ar.delete(s))})),n.createElement("span",{"data-slate-node":"text",ref:c},f)},Ar=n.memo(Br,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.text===e.text&&Fr(t.decorations,e.decorations))),Mr=e=>{var{decorations:t,element:r,renderElement:a=(e=>n.createElement(Tr,Object.assign({},e))),renderPlaceholder:o,renderLeaf:i,selection:s}=e,l=(0,n.useRef)(null),c=Lr(),u=Jr(),d=c.isInline(r),f=Cn.findKey(c,r),h=Vr({decorations:t,node:r,renderElement:a,renderPlaceholder:o,renderLeaf:i,selection:s}),v={"data-slate-node":"element",ref:l};if(d&&(v["data-slate-inline"]=!0),!d&&$e.hasInlines(c,r)){var p=Ge.string(r),g=Tt()(p);"rtl"===g&&(v.dir=g)}if($e.isVoid(c,r)){v["data-slate-void"]=!0,!u&&d&&(v.contentEditable=!1);var m=d?"span":"div",[[w]]=Ge.texts(r);h=u?null:n.createElement(m,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},n.createElement(Ar,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:w})),Yt.set(w,0),er.set(w,r)}return Dr((()=>{var e=ir.get(c);l.current?(null==e||e.set(f,l.current),ar.set(r,l.current),nr.set(l.current,r)):(null==e||e.delete(f),ar.delete(r))})),a({attributes:v,children:h,element:r})},Rr=n.memo(Mr,((e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&Fr(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&ct.equals(e.selection,t.selection)))),Tr=e=>{var{attributes:t,children:r,element:a}=e,o=Lr().isInline(a)?"span":"div";return n.createElement(o,Object.assign({},t,{style:{position:"relative"}}),r)},_r=(0,n.createContext)(null),Lr=()=>{var e=(0,n.useContext)(_r);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},zr=(0,n.createContext)((()=>[])),Wr=(0,n.createContext)(!1),Ir=()=>(0,n.useContext)(Wr),Vr=e=>{for(var{decorations:t,node:r,renderElement:a,renderPlaceholder:o,renderLeaf:i,selection:s}=e,l=(0,n.useContext)(zr),c=Lr(),u=Cn.findPath(c,r),d=[],f=We.isElement(r)&&!c.isInline(r)&&$e.hasInlines(c,r),h=0;h<r.children.length;h++){var v=u.concat(h),p=r.children[h],g=Cn.findKey(c,p),m=$e.range(c,v),w=s&&ct.intersection(m,s),y=l([p,v]);for(var b of t){var E=ct.intersection(b,m);E&&y.push(E)}We.isElement(p)?d.push(n.createElement(Wr.Provider,{key:"provider-".concat(g.id),value:!!w},n.createElement(Rr,{decorations:y,element:p,key:g.id,renderElement:a,renderPlaceholder:o,renderLeaf:i,selection:w}))):d.push(n.createElement(Ar,{decorations:y,key:g.id,isLast:f&&h===r.children.length-1,parent:r,renderPlaceholder:o,renderLeaf:i,text:p})),Yt.set(p,h),er.set(p,r)}return d},qr={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},Hr={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Zr={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},$r=e=>{var t=qr[e],r=Hr[e],n=Zr[e],a=t&&(0,$t.TB)(t),o=r&&(0,$t.TB)(r),i=n&&(0,$t.TB)(n);return e=>!(!a||!a(e))||(!!(gr&&o&&o(e))||!(gr||!i||!i(e)))},Ur={isBold:$r("bold"),isCompose:$r("compose"),isMoveBackward:$r("moveBackward"),isMoveForward:$r("moveForward"),isDeleteBackward:$r("deleteBackward"),isDeleteForward:$r("deleteForward"),isDeleteLineBackward:$r("deleteLineBackward"),isDeleteLineForward:$r("deleteLineForward"),isDeleteWordBackward:$r("deleteWordBackward"),isDeleteWordForward:$r("deleteWordForward"),isExtendBackward:$r("extendBackward"),isExtendForward:$r("extendForward"),isExtendLineBackward:$r("extendLineBackward"),isExtendLineForward:$r("extendLineForward"),isItalic:$r("italic"),isMoveLineBackward:$r("moveLineBackward"),isMoveLineForward:$r("moveLineForward"),isMoveWordBackward:$r("moveWordBackward"),isMoveWordForward:$r("moveWordForward"),isRedo:$r("redo"),isSplitBlock:$r("splitBlock"),isTransposeCharacter:$r("transposeCharacter"),isUndo:$r("undo")},Kr=(0,n.createContext)(!1),Jr=()=>(0,n.useContext)(Kr),Qr=(0,n.createContext)(null),Gr=()=>{var e=(0,n.useContext)(Qr);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var[t]=e;return t},Xr=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,Yr=e=>en(e)&&1===e.nodeType,en=e=>{var t=Xr(e);return!!t&&e instanceof t.Node},tn=e=>{var t=e&&e.anchorNode&&Xr(e.anchorNode);return!!t&&e instanceof t.Selection},rn=e=>en(e)&&3===e.nodeType,nn=(e,t,r)=>{for(var n,{childNodes:a}=e,o=a[t],i=t,s=!1,l=!1;(en(n=o)&&8===n.nodeType||Yr(o)&&0===o.childNodes.length||Yr(o)&&"false"===o.getAttribute("contenteditable"))&&(!s||!l);)i>=a.length?(s=!0,i=t-1,r="backward"):i<0?(l=!0,i=t+1,r="forward"):(o=a[i],t=i,i+="forward"===r?1:-1);return[o,t]},an=(e,t,r)=>{var[n]=nn(e,t,r);return n},on=e=>{var t="";if(rn(e)&&e.nodeValue)return e.nodeValue;if(Yr(e)){for(var r of Array.from(e.childNodes))t+=on(r);var n=getComputedStyle(e).getPropertyValue("display");"block"!==n&&"list"!==n&&"BR"!==e.tagName||(t+="\n")}return t},sn=/data-slate-fragment="(.+?)"/m,ln=e=>{var t=e.getData("text/html"),[,r]=t.match(sn)||[];return r},cn=new WeakMap,un=new WeakMap,dn=e=>{var t=un.get(e);un.delete(e),t&&$e.withoutNormalizing(e,(()=>{t.forEach((t=>{e.apply(t)}))}))},fn=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as"];function hn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(r),!0).forEach((function(t){Kt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var pn=e=>n.createElement(n.Fragment,null,Vr(e)),gn=e=>{var{attributes:t,children:r}=e;return n.createElement("span",Object.assign({},t),r)},mn=()=>[],wn=(e,t)=>{var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),Zt(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect},yn=(e,t)=>en(t)&&Cn.hasDOMNode(e,t),bn=(e,t)=>en(t)&&Cn.hasDOMNode(e,t,{editable:!0}),En=(e,t)=>{var r=yn(e,t)&&Cn.toSlateNode(e,t);return $e.isVoid(e,r)},xn=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},On=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},kn=0;class Pn{constructor(){this.id="".concat(kn++)}}var Cn={getWindow(e){var t=tr.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},findKey(e,t){var r=or.get(t);return r||(r=new Pn,or.set(t,r)),r},findPath(e,t){for(var r=[],n=t;;){var a=er.get(n);if(null==a){if($e.isEditor(n))return r;break}var o=Yt.get(n);if(null==o)break;r.unshift(o),n=a}throw new Error("Unable to find the path for Slate node: ".concat(JSON.stringify(t)))},findDocumentOrShadowRoot(e){var t=Cn.toDOMNode(e,e),r=t.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&null!=r.getSelection?r:t.ownerDocument},isFocused:e=>!!lr.get(e),isReadOnly:e=>!!sr.get(e),blur(e){var t=Cn.toDOMNode(e,e),r=Cn.findDocumentOrShadowRoot(e);lr.set(e,!1),r.activeElement===t&&t.blur()},focus(e){var t=Cn.toDOMNode(e,e),r=Cn.findDocumentOrShadowRoot(e);lr.set(e,!0),r.activeElement!==t&&t.focus({preventScroll:!0})},deselect(e){Cn.toDOMNode(e,e);var{selection:t}=e,r=Cn.findDocumentOrShadowRoot(e).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&Mt.deselect(e)},hasDOMNode(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:a=!1}=n,o=Cn.toDOMNode(e,e);try{r=Yr(t)?t:t.parentElement}catch(e){if(!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&(r.closest("[data-slate-editor]")===o&&(!a||r.isContentEditable||!!r.getAttribute("data-slate-zero-width")))},insertData(e,t){e.insertData(t)},setFragmentData(e,t){e.setFragmentData(t)},toDOMNode(e,t){var r=ir.get(e),n=$e.isEditor(t)?rr.get(e):null==r?void 0:r.get(Cn.findKey(e,t));if(!n)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(JSON.stringify(t)));return n},toDOMPoint(e,t){var r,[n]=$e.node(e,t.path),a=Cn.toDOMNode(e,n);$e.void(e,{at:t})&&(t={path:t.path,offset:0});var o=Array.from(a.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),i=0;for(var s of o){var l=s.childNodes[0];if(null!=l&&null!=l.textContent){var{length:c}=l.textContent,u=s.getAttribute("data-slate-length"),d=i+(null==u?c:parseInt(u,10));if(t.offset<=d){r=[l,Math.min(c,Math.max(0,t.offset-i))];break}i=d}}if(!r)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(JSON.stringify(t)));return r},toDOMRange(e,t){var{anchor:r,focus:n}=t,a=ct.isBackward(t),o=Cn.toDOMPoint(e,r),i=ct.isCollapsed(t)?o:Cn.toDOMPoint(e,n),s=Cn.getWindow(e).document.createRange(),[l,c]=a?i:o,[u,d]=a?o:i,f=!!(Yr(l)?l:l.parentElement).getAttribute("data-slate-zero-width"),h=!!(Yr(u)?u:u.parentElement).getAttribute("data-slate-zero-width");return s.setStart(l,f?1:c),s.setEnd(u,h?1:d),s},toSlateNode(e,t){var r=Yr(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var n=r?nr.get(r):null;if(!n)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return n},findEventRange(e,t){"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:r,clientY:n,target:a}=t;if(null==r||null==n)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var o,i=Cn.toSlateNode(e,t.target),s=Cn.findPath(e,i);if($e.isVoid(e,i)){var l=a.getBoundingClientRect(),c=e.isInline(i)?r-l.left<l.left+l.width-r:n-l.top<l.top+l.height-n,u=$e.point(e,s,{edge:c?"start":"end"}),d=c?$e.before(e,u):$e.after(e,u);if(d)return $e.range(e,d)}var{document:f}=window;if(f.caretRangeFromPoint)o=f.caretRangeFromPoint(r,n);else{var h=f.caretPositionFromPoint(r,n);h&&((o=f.createRange()).setStart(h.offsetNode,h.offset),o.setEnd(h.offsetNode,h.offset))}if(!o)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return Cn.toSlateRange(e,o,{exactMatch:!1})},toSlatePoint(e,t,r){var[n,a]=r?t:(e=>{var[t,r]=e;if(Yr(t)&&t.childNodes.length){var n=r===t.childNodes.length,a=n?r-1:r;for([t,a]=nn(t,a,n?"backward":"forward"),n=a<r;Yr(t)&&t.childNodes.length;){var o=n?t.childNodes.length-1:0;t=an(t,o,n?"backward":"forward")}r=n&&null!=t.textContent?t.textContent.length:0}return[t,r]})(t),o=n.parentNode,i=null,s=0;if(o){var l,c=o.closest('[data-slate-void="true"]'),u=o.closest("[data-slate-leaf]"),d=null;if(u){i=u.closest('[data-slate-node="text"]');var f=Cn.getWindow(e).document.createRange();f.setStart(i,0),f.setEnd(n,a);var h=f.cloneContents();[...Array.prototype.slice.call(h.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(h.querySelectorAll("[contenteditable=false]"))].forEach((e=>{e.parentNode.removeChild(e)})),s=h.textContent.length,d=i}else c&&((u=c.querySelector("[data-slate-leaf]"))?(i=u.closest('[data-slate-node="text"]'),s=(d=u).textContent.length,d.querySelectorAll("[data-slate-zero-width]").forEach((e=>{s-=e.textContent.length}))):s=1);d&&s===d.textContent.length&&(o.hasAttribute("data-slate-zero-width")||wr&&null!==(l=d.textContent)&&void 0!==l&&l.endsWith("\n\n"))&&s--}if(!i){if(r)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var v=Cn.toSlateNode(e,i);return{path:Cn.findPath(e,v),offset:s}},toSlateRange(e,t,r){var n,a,o,i,s,{exactMatch:l}=r;if((tn(t)?t.anchorNode:t.startContainer)&&(tn(t)?(n=t.anchorNode,a=t.anchorOffset,o=t.focusNode,i=t.focusOffset,s=Er&&window.document.activeElement&&window.document.activeElement.shadowRoot?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed):(n=t.startContainer,a=t.startOffset,o=t.endContainer,i=t.endOffset,s=t.collapsed)),null==n||null==o||null==a||null==i)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));var c=Cn.toSlatePoint(e,[n,a],l);if(!c)return null;var u=s?c:Cn.toSlatePoint(e,[o,i],l);if(!u)return null;var d={anchor:c,focus:u};return ct.isExpanded(d)&&ct.isForward(d)&&Yr(o)&&$e.void(e,{at:d.focus,mode:"highest"})&&(d=$e.unhangRange(e,d,{voids:!0})),d},hasRange(e,t){var{anchor:r,focus:n}=t;return $e.hasPath(e,r.path)&&$e.hasPath(e,n.path)}};function Dn(e,t){if(e===t)return null;var r=function(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n))return n;return e.length!==t.length?r:null}(e,t);if(null===r)return null;var n=function(e,t,r){for(var n=e.length,a=t.length,o=Math.min(n,a,r),i=0;i<o;i++)if(e.charAt(n-i-1)!==t.charAt(a-i-1))return i;return e.length!==t.length?o:null}(e,t,Math.min(e.length-r,t.length-r));return null===n?null:{start:r,end:n}}function Nn(e,t){return e.slice(t.start,e.length-t.end)}function Sn(e,t){var r=Cn.toSlateNode(e,t);if(gt.isText(r)){var n=r.text,a=t.textContent;if(a.endsWith("\n")&&(a=a.slice(0,a.length-1)),a!==n){var o=function(e,t){if(void 0===e||void 0===t)return null;var r=Dn(e,t);if(null==r)return null;var n=Nn(t,r),a=Nn(e,r);return{start:r.start,end:e.length-r.end,insertText:n,removeText:a}}(n,a);if(null!==o)return{text:o,path:Cn.findPath(e,r)}}}}function jn(e){try{var t=ur.get(e);t&&t()}catch(e){console.error(e)}}function Fn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}class Bn{constructor(e){this.editor=e,this.flush=e=>{try{this.reconcileMutations(e)}catch(e){console.error(e),jn(this.editor)}},this.reconcileMutations=e=>{var t=function(e,t){var r=[],n=[],a=[],o=[];return t.forEach((t=>{switch(t.type){case"childList":t.addedNodes.length&&t.addedNodes.forEach((e=>{r.push(e)})),t.removedNodes.forEach((e=>{n.push(e)}));break;case"characterData":o.push(t);var{parentNode:i}=t.target;if(!i)return;var s=Sn(e,i);if(!s)return;if(a.some((e=>{var{path:t}=e;return tt.equals(t,s.path)})))return;a.push(s)}})),{addedNodes:r,removedNodes:n,insertedText:a,characterDataMutations:o}}(this.editor,e),{insertedText:r,removedNodes:n}=t;if(((e,t)=>{var{selection:r}=e,{removedNodes:n}=t;return!!r&&ct.isExpanded(r)&&n.length>0})(this.editor,t)){var a=function(e){return e.reduce(((e,t)=>{var{text:r}=t;return"".concat(e).concat(r.insertText)}),"")}(r);this.replaceExpandedSelection(a)}else((e,t)=>{var{addedNodes:r}=t,{selection:n}=e,a=n?Ge.parent(e,n.anchor.path):null,o=a?Cn.toDOMNode(e,a):null;return!!o&&r.some((e=>e instanceof HTMLElement&&e.tagName===(null==o?void 0:o.tagName)))})(this.editor,t)?this.insertBreak():((e,t)=>{var{addedNodes:r,characterDataMutations:n,removedNodes:a}=t;return a.length>0&&0===r.length&&n.length>0})(this.editor,t)?this.removeLeafNodes(n):((e,t)=>{var{removedNodes:r}=t;return r.length>0})(this.editor,t)?this.deleteBackward():((e,t)=>{var{insertedText:r}=t;return r.length>0})(this.editor,t)&&this.insertText(r)},this.insertText=e=>{var{selection:t,marks:r}=this.editor;e.forEach((e=>{var n=e.text.insertText,a=function(e,t,r){var{path:n,text:a}=r,o={anchor:{path:n,offset:a.start},focus:{path:n,offset:a.end}};if(!t||!ct.isCollapsed(t))return o;var{insertText:i,removeText:s}=a;if((1===i.length||1===s.length)&&tt.equals(t.anchor.path,n)){var[l]=Array.from($e.nodes(e,{at:t,match:gt.isText}));if(l){var[c]=l,{anchor:u}=t,d=c.text[u.offset-1],f=c.text[u.offset];if(1===i.length&&i===f)return t;if(1===s.length&&s===d)return{anchor:{path:n,offset:u.offset-1},focus:{path:n,offset:u.offset}}}}return o}(this.editor,t,e);if(r){var o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(r),!0).forEach((function(t){Kt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({text:n},r);Mt.insertNodes(this.editor,o,{match:gt.isText,at:a,select:!0}),this.editor.marks=null}else Mt.insertText(this.editor,n,{at:a})}))},this.insertBreak=()=>{var{selection:e}=this.editor;$e.insertBreak(this.editor),jn(this.editor),e&&setTimeout((()=>{this.editor.selection&&ct.equals(e,this.editor.selection)&&Mt.move(this.editor)}),100)},this.replaceExpandedSelection=e=>{$e.deleteFragment(this.editor),e.length&&$e.insertText(this.editor,e),jn(this.editor)},this.deleteBackward=()=>{$e.deleteBackward(this.editor),Cn.focus(this.editor),jn(this.editor)},this.removeLeafNodes=e=>{for(var t of e){var r=Cn.toSlateNode(this.editor,t);if(r){var n=Cn.findPath(this.editor,r);Mt.delete(this.editor,{at:n}),jn(this.editor)}}},this.editor=e}}var An={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0};function Mn(e){var t=Lr(),[r]=(0,n.useState)((()=>new Bn(t))),{receivedUserInput:a,onUserInput:o}=function(){var e=Lr(),t=(0,n.useRef)(!1),r=(0,n.useRef)(null),a=(0,n.useCallback)((()=>{if(!1===t.current){var n=Cn.getWindow(e);t.current=!0,r.current&&n.cancelAnimationFrame(r.current),r.current=n.requestAnimationFrame((()=>{t.current=!1,r.current=null}))}}),[]);return(0,n.useEffect)((()=>{t.current&&(t.current=!1)})),{receivedUserInput:t,onUserInput:a}}(),i=(0,n.useRef)(null),s=(0,n.useRef)(!1);return function(e,t,r){var[a]=(0,n.useState)((()=>new MutationObserver(t)));Dr((()=>{a.disconnect()})),(0,n.useEffect)((()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return a.observe(e.current,r),a.disconnect.bind(a)}))}(e,(0,n.useCallback)((e=>{a.current&&(s.current=!0,r.flush(e),i.current&&clearTimeout(i.current),i.current=setTimeout((()=>{s.current=!1,i.current=null}),250))}),[]),An),{isReconciling:s,onUserInput:o}}var Rn=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","style","as"];function Tn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(r),!0).forEach((function(t){Kt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ln=(0,n.createContext)(!1),zn=()=>(0,n.useContext)(Ln),Wn=["editor","children","onChange","value"],In=e=>{var{editor:t,children:r,onChange:a,value:o}=e,i=Jt(e,Wn),[s,l]=(0,n.useState)(0),c=(0,n.useMemo)((()=>{if(!Ge.isNodeList(o))throw new Error("[Slate] value is invalid! Expected a list of elements"+"but got: ".concat(JSON.stringify(o)));if(!$e.isEditor(t))throw new Error("[Slate] editor is invalid! you passed:"+"".concat(JSON.stringify(t)));return t.children=o,Object.assign(t,i),[t]}),[s,o,...Object.values(i)]),u=(0,n.useCallback)((()=>{a(t.children),l(s+1)}),[s,a]);cr.set(t,u),(0,n.useEffect)((()=>()=>{cr.set(t,(()=>{}))}),[]);var[d,f]=(0,n.useState)(Cn.isFocused(t));return(0,n.useEffect)((()=>{f(Cn.isFocused(t))})),Dr((()=>{var e=()=>f(Cn.isFocused(t));return document.addEventListener("focus",e,!0),()=>document.removeEventListener("focus",e,!0)}),[]),Dr((()=>{var e=()=>f(Cn.isFocused(t));return document.addEventListener("blur",e,!0),()=>document.removeEventListener("blur",e,!0)}),[]),n.createElement(Qr.Provider,{value:c},n.createElement(_r.Provider,{value:t},n.createElement(Ln.Provider,{value:d},r)))},Vn=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},qn=(e,t,r)=>{var n=Cn.toDOMRange(e,t).getBoundingClientRect(),a=Cn.toDOMRange(e,r).getBoundingClientRect();return Vn(n,a)&&Vn(a,n)},Hn=e=>{var t=e,{apply:r,onChange:n,deleteBackward:a}=t;return ir.set(t,new WeakMap),t.deleteBackward=r=>{if("line"!==r)return a(r);if(e.selection&&ct.isCollapsed(e.selection)){var n=$e.above(e,{match:t=>$e.isBlock(e,t),at:e.selection});if(n){var[,o]=n,i=$e.range(e,o,e.selection.anchor),s=((e,t)=>{var r=$e.range(e,ct.end(t)),n=Array.from($e.positions(e,{at:t})),a=0,o=n.length,i=Math.floor(o/2);if(qn(e,$e.range(e,n[a]),r))return $e.range(e,n[a],r);if(n.length<2)return $e.range(e,n[n.length-1],r);for(;i!==n.length&&i!==a;)qn(e,$e.range(e,n[i]),r)?o=i:a=i,i=Math.floor((a+o)/2);return $e.range(e,n[o],r)})(t,i);ct.isCollapsed(s)||Mt.delete(e,{at:s})}}},t.apply=n=>{if("insert_text"!==n.type&&(cn.set(e,!1),dn(e)),cn.get(e)){var a=un.get(e);a?a.push(n):un.set(e,[n])}else{var o=[];switch(n.type){case"insert_text":case"remove_text":case"set_node":for(var[i,s]of $e.levels(t,{at:n.path})){var l=Cn.findKey(t,i);o.push([s,l])}break;case"insert_node":case"remove_node":case"merge_node":case"split_node":for(var[c,u]of $e.levels(t,{at:tt.parent(n.path)})){var d=Cn.findKey(t,c);o.push([u,d])}break;case"move_node":for(var[f,h]of $e.levels(t,{at:tt.common(tt.parent(n.path),tt.parent(n.newPath))})){var v=Cn.findKey(t,f);o.push([h,v])}}for(var[p,g]of(r(n),o)){var[m]=$e.node(t,p);or.set(m,g)}}},t.setFragmentData=e=>{var{selection:r}=t;if(r){var[n,a]=ct.edges(r),o=$e.void(t,{at:n.path}),i=$e.void(t,{at:a.path});if(!ct.isCollapsed(r)||o){var s=Cn.toDOMRange(t,r),l=s.cloneContents(),c=l.childNodes[0];if(l.childNodes.forEach((e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)})),i){var[u]=i,d=s.cloneRange(),f=Cn.toDOMNode(t,u);d.setEndAfter(f),l=d.cloneContents()}if(o&&(c=l.querySelector("[data-slate-spacer]")),Array.from(l.querySelectorAll("[data-slate-zero-width]")).forEach((e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""})),rn(c)){var h=document.createElement("span");h.style.whiteSpace="pre",h.appendChild(c),l.appendChild(h),c=h}var v=t.getFragment(),p=JSON.stringify(v),g=window.btoa(encodeURIComponent(p));c.setAttribute("data-slate-fragment",g),e.setData("application/x-slate-fragment",g);var m=document.createElement("div");return m.appendChild(l),m.setAttribute("hidden","true"),document.body.appendChild(m),e.setData("text/html",m.innerHTML),e.setData("text/plain",on(m)),document.body.removeChild(m),e}}},t.insertData=e=>{var r=e.getData("application/x-slate-fragment")||ln(e);if(r){var n=decodeURIComponent(window.atob(r)),a=JSON.parse(n);t.insertFragment(a)}else{var o=e.getData("text/plain");if(o){var i=o.split(/\r\n|\r|\n/),s=!1;for(var l of i)s&&Mt.splitNodes(t,{always:!0}),t.insertText(l),s=!0}}},t.onChange=()=>{Ut.unstable_batchedUpdates((()=>{var e=cr.get(t);e&&e(),n()}))},t},Zn=mr?e=>{var{autoFocus:t,decorate:r=mn,onDOMBeforeInput:a,placeholder:o,readOnly:i=!1,renderElement:s,renderLeaf:l,renderPlaceholder:c=(e=>n.createElement(gn,Object.assign({},e))),style:u={},as:d="div"}=e,f=Jt(e,Rn),h=Gr(),v=(0,n.useRef)(null),p=Mn(v);sr.set(h,i);var g=(0,n.useMemo)((()=>({isUpdatingSelection:!1,latestElement:null})),[]),[m,w]=(0,n.useState)(0),y=(0,n.useCallback)((()=>{w((e=>e+1))}),[m]);Dr((()=>{var e;v.current&&(e=Xr(v.current))?(tr.set(h,e),rr.set(h,v.current),ar.set(h,v.current),nr.set(v.current,h),ur.set(h,y)):(ar.delete(h),ur.delete(h));try{var{selection:t}=h,r=Cn.findDocumentOrShadowRoot(h).getSelection();if(!r||!Cn.isFocused(h))return;var n="None"!==r.type;if(!t&&!n)return;var a=rr.get(h),o=!1;if(a.contains(r.anchorNode)&&a.contains(r.focusNode)&&(o=!0),n&&o&&t){var i=Cn.toSlateRange(h,r,{exactMatch:!0});if(i&&ct.equals(i,t))return}if(t&&!Cn.hasRange(h,t))return void(h.selection=Cn.toSlateRange(h,r,{exactMatch:!1}));var s=Cn.toDOMNode(h,h);g.isUpdatingSelection=!0;var l=t&&Cn.toDOMRange(h,t);if(l){ct.isBackward(t)?r.setBaseAndExtent(l.endContainer,l.endOffset,l.startContainer,l.startOffset):r.setBaseAndExtent(l.startContainer,l.startOffset,l.endContainer,l.endOffset);var c=l.startContainer.parentElement;c.getBoundingClientRect=l.getBoundingClientRect.bind(l),Zt(c,{scrollMode:"if-needed",boundary:s}),delete c.getBoundingClientRect}else r.removeAllRanges();setTimeout((()=>{g.isUpdatingSelection=!1}))}catch(e){g.isUpdatingSelection=!1}})),(0,n.useEffect)((()=>{v.current&&t&&v.current.focus()}),[t]);var b=(0,n.useCallback)((e=>{i||!bn(h,e.target)||On(e,a)||p.onUserInput()}),[i,a]);Dr((()=>{var e=v.current;return null==e||e.addEventListener("beforeinput",b),()=>null==e?void 0:e.removeEventListener("beforeinput",b)}),[m,a]);var E=(0,n.useCallback)(Lt()((()=>{try{if(!i&&!g.isUpdatingSelection&&!p.isReconciling.current){var e=Cn.findDocumentOrShadowRoot(h),{activeElement:t}=e,r=Cn.toDOMNode(h,h),n=e.getSelection();if(t===r?(g.latestElement=t,lr.set(h,!0)):lr.delete(h),!n)return Mt.deselect(h);var{anchorNode:a,focusNode:o}=n,s=bn(h,a)||En(h,a),l=bn(h,o)||En(h,o);if(s&&l){var c=Cn.toSlateRange(h,n,{exactMatch:!1});Mt.select(h,c)}else Mt.deselect(h)}}catch(e){}}),100),[i]);Dr((()=>{var e=Cn.getWindow(h);return e.document.addEventListener("selectionchange",E),()=>{e.document.removeEventListener("selectionchange",E)}}));var x=r([h,[]]);if(o&&1===h.children.length&&1===Array.from(Ge.texts(h)).length&&""===Ge.string(h)){var O=$e.start(h,[]);x.push({[dr]:!0,placeholder:o,anchor:O,focus:O})}return n.createElement(Kr.Provider,{value:i},n.createElement(zr.Provider,{value:r},n.createElement(d,Object.assign({key:m,role:i?void 0:"textbox"},f,{spellCheck:f.spellCheck,autoCorrect:f.autoCorrect,autoCapitalize:f.autoCapitalize,"data-slate-editor":!0,"data-slate-node":"value",contentEditable:!i||void 0,suppressContentEditableWarning:!0,ref:v,style:_n({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},u),onCopy:(0,n.useCallback)((e=>{bn(h,e.target)&&!xn(e,f.onCopy)&&(e.preventDefault(),Cn.setFragmentData(h,e.clipboardData))}),[f.onCopy]),onCut:(0,n.useCallback)((e=>{if(!i&&bn(h,e.target)&&!xn(e,f.onCut)){e.preventDefault(),Cn.setFragmentData(h,e.clipboardData);var{selection:t}=h;if(t)if(ct.isExpanded(t))$e.deleteFragment(h);else{var r=Ge.parent(h,t.anchor.path);$e.isVoid(h,r)&&Mt.delete(h)}}}),[i,f.onCut]),onFocus:(0,n.useCallback)((e=>{if(!i&&!g.isUpdatingSelection&&bn(h,e.target)&&!xn(e,f.onFocus)){var t=Cn.findDocumentOrShadowRoot(h);g.latestElement=t.activeElement,lr.set(h,!0)}}),[i,f.onFocus]),onBlur:(0,n.useCallback)((e=>{if(!i&&!g.isUpdatingSelection&&bn(h,e.target)&&!xn(e,f.onBlur)){var t=Cn.findDocumentOrShadowRoot(h);if(g.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===Cn.toDOMNode(h,h)||Yr(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&en(r)&&Cn.hasDOMNode(h,r)){var n=Cn.toSlateNode(h,r);if(We.isElement(n)&&!h.isVoid(n))return}lr.delete(h)}}}}),[i,f.onBlur]),onPaste:(0,n.useCallback)((e=>{e.clipboardData=(e=>{if(!e.getData("application/x-slate-fragment")){var t=ln(e);if(t){var r=new DataTransfer;return e.types.forEach((t=>{r.setData(t,e.getData(t))})),r.setData("application/x-slate-fragment",t),r}}return e})(e.clipboardData),!bn(h,e.target)||xn(e,f.onPaste)||i||(e.preventDefault(),Cn.insertData(h,e.clipboardData))}),[i,f.onPaste])}),Vr({decorations:x,node:h,renderElement:s,renderPlaceholder:c,renderLeaf:l,selection:h.selection}))))}:e=>{var{autoFocus:t,decorate:r=mn,onDOMBeforeInput:a,placeholder:o,readOnly:i=!1,renderElement:s,renderLeaf:l,renderPlaceholder:c=(e=>n.createElement(gn,Object.assign({},e))),scrollSelectionIntoView:u=wn,style:d={},as:f="div"}=e,h=Jt(e,fn),v=Gr(),[p,g]=(0,n.useState)(!1),m=(0,n.useRef)(null);sr.set(v,i);var w=(0,n.useMemo)((()=>({isComposing:!1,hasInsertPrefixInCompositon:!1,isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null})),[]);Dr((()=>{var e;m.current&&(e=Xr(m.current))?(tr.set(v,e),rr.set(v,m.current),ar.set(v,m.current),nr.set(m.current,v)):ar.delete(v);var{selection:t}=v,r=Cn.findDocumentOrShadowRoot(v).getSelection();if(!w.isComposing&&r&&Cn.isFocused(v)){var n="None"!==r.type;if(t||n){var a=rr.get(v),o=!1;if(a.contains(r.anchorNode)&&a.contains(r.focusNode)&&(o=!0),n&&o&&t){var i=Cn.toSlateRange(v,r,{exactMatch:!1});if(i&&ct.equals(i,t))return}if(!t||Cn.hasRange(v,t)){w.isUpdatingSelection=!0;var s=t&&Cn.toDOMRange(v,t);s?(ct.isBackward(t)?r.setBaseAndExtent(s.endContainer,s.endOffset,s.startContainer,s.startOffset):r.setBaseAndExtent(s.startContainer,s.startOffset,s.endContainer,s.endOffset),u(v,s)):r.removeAllRanges(),setTimeout((()=>{s&&wr&&Cn.toDOMNode(v,v).focus();w.isUpdatingSelection=!1}))}else v.selection=Cn.toSlateRange(v,r,{exactMatch:!1})}}})),(0,n.useEffect)((()=>{m.current&&t&&m.current.focus()}),[t]);var y=(0,n.useCallback)((e=>{if(!i&&bn(v,e.target)&&!On(e,a)){var{selection:t}=v,{inputType:r}=e,n=e.dataTransfer||e.data||void 0;if("insertCompositionText"===r||"deleteCompositionText"===r)return;var o=!1;if("insertText"===r&&t&&ct.isCollapsed(t)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==t.anchor.offset){o=!0,v.marks&&(o=!1);var{anchor:s}=t,l=$e.above(v,{at:s,match:e=>$e.isInline(v,e),mode:"highest"});if(l){var[,c]=l;$e.isEnd(v,t.anchor,c)&&(o=!1)}}if(o||e.preventDefault(),!r.startsWith("delete")||r.startsWith("deleteBy")){var[u]=e.getTargetRanges();if(u){var d=Cn.toSlateRange(v,u,{exactMatch:!1});t&&ct.equals(t,d)||Mt.select(v,d)}}if(t&&ct.isExpanded(t)&&r.startsWith("delete")){var f=r.endsWith("Backward")?"backward":"forward";return void $e.deleteFragment(v,{direction:f})}switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":$e.deleteFragment(v);break;case"deleteContent":case"deleteContentForward":$e.deleteForward(v);break;case"deleteContentBackward":$e.deleteBackward(v);break;case"deleteEntireSoftLine":$e.deleteBackward(v,{unit:"line"}),$e.deleteForward(v,{unit:"line"});break;case"deleteHardLineBackward":$e.deleteBackward(v,{unit:"block"});break;case"deleteSoftLineBackward":$e.deleteBackward(v,{unit:"line"});break;case"deleteHardLineForward":$e.deleteForward(v,{unit:"block"});break;case"deleteSoftLineForward":$e.deleteForward(v,{unit:"line"});break;case"deleteWordBackward":$e.deleteBackward(v,{unit:"word"});break;case"deleteWordForward":$e.deleteForward(v,{unit:"word"});break;case"insertLineBreak":case"insertParagraph":$e.insertBreak(v);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===r&&(w.isComposing&&g(!1),w.isComposing=!1);var h=Cn.getWindow(v);n instanceof h.DataTransfer?Cn.insertData(v,n):"string"==typeof n&&(o?function(e,t){var{onFlushed:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=cn.get(e);cn.set(e,!0);try{t()}finally{void 0!==n&&cn.set(e,n)}un.get(e)||null==r||r()}(v,(()=>$e.insertText(v,n)),{onFlushed:()=>e.preventDefault()}):$e.insertText(v,n))}}}),[i,a]);Dr((()=>(m.current&&Cr&&m.current.addEventListener("beforeinput",y),()=>{m.current&&Cr&&m.current.removeEventListener("beforeinput",y)})),[y]);var b=(0,n.useCallback)(Lt()((()=>{if(!(i||w.isComposing||w.isUpdatingSelection||w.isDraggingInternally)){var e=Cn.findDocumentOrShadowRoot(v),{activeElement:t}=e,r=Cn.toDOMNode(v,v),n=e.getSelection();if(t===r?(w.latestElement=t,lr.set(v,!0)):lr.delete(v),!n)return Mt.deselect(v);var{anchorNode:a,focusNode:o}=n,s=bn(v,a)||En(v,a),l=bn(v,o)||En(v,o);if(s&&l){var c=Cn.toSlateRange(v,n,{exactMatch:!1});Mt.select(v,c)}else Mt.deselect(v)}}),100),[i]),E=(0,n.useCallback)((()=>setTimeout(b)),[b]);Dr((()=>{var e=Cn.getWindow(v);return e.document.addEventListener("selectionchange",E),()=>{e.document.removeEventListener("selectionchange",E)}}),[E]);var x=r([v,[]]);if(o&&1===v.children.length&&1===Array.from(Ge.texts(v)).length&&""===Ge.string(v)&&!p){var O=$e.start(v,[]);x.push({[dr]:!0,placeholder:o,anchor:O,focus:O})}return n.createElement(Kr.Provider,{value:i},n.createElement(zr.Provider,{value:r},n.createElement(f,Object.assign({"data-gramm":!1,role:i?void 0:"textbox"},h,{spellCheck:!!Cr&&h.spellCheck,autoCorrect:Cr?h.autoCorrect:"false",autoCapitalize:Cr?h.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!i||void 0,suppressContentEditableWarning:!0,ref:m,style:vn({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},d),onBeforeInput:(0,n.useCallback)((e=>{if(!Cr&&!i&&!xn(e,h.onBeforeInput)&&bn(v,e.target)&&(e.preventDefault(),!w.isComposing)){var t=e.data;$e.insertText(v,t)}}),[i]),onInput:(0,n.useCallback)((e=>{dn(v)}),[]),onBlur:(0,n.useCallback)((e=>{if(!i&&!w.isUpdatingSelection&&bn(v,e.target)&&!xn(e,h.onBlur)){var t=Cn.findDocumentOrShadowRoot(v);if(w.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(!(r===Cn.toDOMNode(v,v)||Yr(r)&&r.hasAttribute("data-slate-spacer"))){if(null!=r&&en(r)&&Cn.hasDOMNode(v,r)){var n=Cn.toSlateNode(v,r);if(We.isElement(n)&&!v.isVoid(n))return}if(yr){var a=t.getSelection();null==a||a.removeAllRanges()}lr.delete(v)}}}}),[i,h.onBlur]),onClick:(0,n.useCallback)((e=>{if(!i&&yn(v,e.target)&&!xn(e,h.onClick)&&en(e.target)){var t=Cn.toSlateNode(v,e.target),r=Cn.findPath(v,t),n=$e.start(v,r),a=$e.end(v,r),o=$e.void(v,{at:n}),s=$e.void(v,{at:a});if(o&&s&&tt.equals(o[1],s[1])){var l=$e.range(v,n);Mt.select(v,l)}}}),[i,h.onClick]),onCompositionEnd:(0,n.useCallback)((e=>{if(bn(v,e.target)&&!xn(e,h.onCompositionEnd)&&(w.isComposing&&g(!1),w.isComposing=!1,yr||Or||pr||kr||!e.data||$e.insertText(v,e.data),v.selection&&ct.isCollapsed(v.selection))){var t=v.selection.anchor.path,r=Ge.leaf(v,t);w.hasInsertPrefixInCompositon&&(w.hasInsertPrefixInCompositon=!1,$e.withoutNormalizing(v,(()=>{var e=r.text.replace(/^\uFEFF/,"");Mt.delete(v,{distance:r.text.length,reverse:!0}),Mt.insertText(v,e)})))}}),[h.onCompositionEnd]),onCompositionUpdate:(0,n.useCallback)((e=>{bn(v,e.target)&&!xn(e,h.onCompositionUpdate)&&(!w.isComposing&&g(!0),w.isComposing=!0)}),[h.onCompositionUpdate]),onCompositionStart:(0,n.useCallback)((e=>{if(bn(v,e.target)&&!xn(e,h.onCompositionStart)){var{selection:t,marks:r}=v;if(t){if(ct.isExpanded(t))return void $e.deleteFragment(v);var n=$e.above(v,{match:e=>$e.isInline(v,e),mode:"highest"});if(n){var[,a]=n;if($e.isEnd(v,t.anchor,a)){var o=$e.after(v,a);Mt.setSelection(v,{anchor:o,focus:o})}}r&&(w.hasInsertPrefixInCompositon=!0,Mt.insertNodes(v,vn({text:"\ufeff"},r),{select:!0}))}}}),[h.onCompositionStart]),onCopy:(0,n.useCallback)((e=>{bn(v,e.target)&&!xn(e,h.onCopy)&&(e.preventDefault(),Cn.setFragmentData(v,e.clipboardData))}),[h.onCopy]),onCut:(0,n.useCallback)((e=>{if(!i&&bn(v,e.target)&&!xn(e,h.onCut)){e.preventDefault(),Cn.setFragmentData(v,e.clipboardData);var{selection:t}=v;if(t)if(ct.isExpanded(t))$e.deleteFragment(v);else{var r=Ge.parent(v,t.anchor.path);$e.isVoid(v,r)&&Mt.delete(v)}}}),[i,h.onCut]),onDragOver:(0,n.useCallback)((e=>{if(yn(v,e.target)&&!xn(e,h.onDragOver)){var t=Cn.toSlateNode(v,e.target);$e.isVoid(v,t)&&e.preventDefault()}}),[h.onDragOver]),onDragStart:(0,n.useCallback)((e=>{if(yn(v,e.target)&&!xn(e,h.onDragStart)){var t=Cn.toSlateNode(v,e.target),r=Cn.findPath(v,t);if($e.isVoid(v,t)||$e.void(v,{at:r,voids:!0})){var n=$e.range(v,r);Mt.select(v,n)}w.isDraggingInternally=!0,Cn.setFragmentData(v,e.dataTransfer)}}),[h.onDragStart]),onDrop:(0,n.useCallback)((e=>{if(!i&&yn(v,e.target)&&!xn(e,h.onDrop)){e.preventDefault();var t=v.selection,r=Cn.findEventRange(v,e),n=e.dataTransfer;Mt.select(v,r),w.isDraggingInternally&&(t&&Mt.delete(v,{at:t}),w.isDraggingInternally=!1),Cn.insertData(v,n),Cn.isFocused(v)||Cn.focus(v)}}),[i,h.onDrop]),onDragEnd:(0,n.useCallback)((e=>{!i&&w.isDraggingInternally&&yn(v,e.target)&&!xn(e,h.onDragEnd)&&(w.isDraggingInternally=!1)}),[i,h.onDragEnd]),onFocus:(0,n.useCallback)((e=>{if(!i&&!w.isUpdatingSelection&&bn(v,e.target)&&!xn(e,h.onFocus)){var t=Cn.toDOMNode(v,v),r=Cn.findDocumentOrShadowRoot(v);if(w.latestElement=r.activeElement,wr&&e.target!==t)return void t.focus();lr.set(v,!0)}}),[i,h.onFocus]),onKeyDown:(0,n.useCallback)((e=>{if(!i&&!w.isComposing&&bn(v,e.target)&&!xn(e,h.onKeyDown)){var{nativeEvent:t}=e,{selection:r}=v,n=v.children[null!==r?r.focus.path[0]:0],a="rtl"===Tt()(Ge.string(n));if(Ur.isRedo(t)){e.preventDefault();var o=v;return void("function"==typeof o.redo&&o.redo())}if(Ur.isUndo(t)){e.preventDefault();var s=v;return void("function"==typeof s.undo&&s.undo())}if(Ur.isMoveLineBackward(t))return e.preventDefault(),void Mt.move(v,{unit:"line",reverse:!0});if(Ur.isMoveLineForward(t))return e.preventDefault(),void Mt.move(v,{unit:"line"});if(Ur.isExtendLineBackward(t))return e.preventDefault(),void Mt.move(v,{unit:"line",edge:"focus",reverse:!0});if(Ur.isExtendLineForward(t))return e.preventDefault(),void Mt.move(v,{unit:"line",edge:"focus"});if(Ur.isMoveBackward(t))return e.preventDefault(),void(r&&ct.isCollapsed(r)?Mt.move(v,{reverse:!a}):Mt.collapse(v,{edge:"start"}));if(Ur.isMoveForward(t))return e.preventDefault(),void(r&&ct.isCollapsed(r)?Mt.move(v,{reverse:a}):Mt.collapse(v,{edge:"end"}));if(Ur.isMoveWordBackward(t))return e.preventDefault(),r&&ct.isExpanded(r)&&Mt.collapse(v,{edge:"focus"}),void Mt.move(v,{unit:"word",reverse:!a});if(Ur.isMoveWordForward(t))return e.preventDefault(),r&&ct.isExpanded(r)&&Mt.collapse(v,{edge:"focus"}),void Mt.move(v,{unit:"word",reverse:a});if(Cr){if((Er||yr)&&r&&(Ur.isDeleteBackward(t)||Ur.isDeleteForward(t))&&ct.isCollapsed(r)){var l=Ge.parent(v,r.anchor.path);if(We.isElement(l)&&$e.isVoid(v,l)&&$e.isInline(v,l))return e.preventDefault(),void $e.deleteBackward(v,{unit:"block"})}}else{if(Ur.isBold(t)||Ur.isItalic(t)||Ur.isTransposeCharacter(t))return void e.preventDefault();if(Ur.isSplitBlock(t))return e.preventDefault(),void $e.insertBreak(v);if(Ur.isDeleteBackward(t))return e.preventDefault(),void(r&&ct.isExpanded(r)?$e.deleteFragment(v,{direction:"backward"}):$e.deleteBackward(v));if(Ur.isDeleteForward(t))return e.preventDefault(),void(r&&ct.isExpanded(r)?$e.deleteFragment(v,{direction:"forward"}):$e.deleteForward(v));if(Ur.isDeleteLineBackward(t))return e.preventDefault(),void(r&&ct.isExpanded(r)?$e.deleteFragment(v,{direction:"backward"}):$e.deleteBackward(v,{unit:"line"}));if(Ur.isDeleteLineForward(t))return e.preventDefault(),void(r&&ct.isExpanded(r)?$e.deleteFragment(v,{direction:"forward"}):$e.deleteForward(v,{unit:"line"}));if(Ur.isDeleteWordBackward(t))return e.preventDefault(),void(r&&ct.isExpanded(r)?$e.deleteFragment(v,{direction:"backward"}):$e.deleteBackward(v,{unit:"word"}));if(Ur.isDeleteWordForward(t))return e.preventDefault(),void(r&&ct.isExpanded(r)?$e.deleteFragment(v,{direction:"forward"}):$e.deleteForward(v,{unit:"word"}))}}}),[i,h.onKeyDown]),onPaste:(0,n.useCallback)((e=>{i||!bn(v,e.target)||xn(e,h.onPaste)||Cr&&!(e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length)(e.nativeEvent)||(e.preventDefault(),Cn.insertData(v,e.clipboardData))}),[i,h.onPaste])}),n.createElement(pn,{decorations:x,node:v,renderElement:s,renderPlaceholder:c,renderLeaf:l,selection:v.selection}))))},$n={isHistory:e=>i(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||et.isOperationList(e.redos[0]))&&(0===e.undos.length||et.isOperationList(e.undos[0]))},Un=(new WeakMap,new WeakMap),Kn=new WeakMap,Jn={isHistoryEditor:e=>$n.isHistory(e.history)&&$e.isEditor(e),isMerging:e=>Kn.get(e),isSaving:e=>Un.get(e),redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var r=Jn.isMerging(e);Kn.set(e,!1),t(),Kn.set(e,r)},withoutSaving(e,t){var r=Jn.isSaving(e);Un.set(e,!1),t(),Un.set(e,r)}},Qn=(e,t)=>"set_selection"===e.type||(!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!tt.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!tt.equals(e.path,t.path))),Gn=(e,t)=>"set_selection"!==e.type||null!=e.properties&&null!=e.newProperties,Xn=(e,t)=>!(!t||"set_selection"!==e.type||"set_selection"!==t.type),Yn=e=>"set_selection"!==e.type,ea=r(5193),ta=r(8170),ra=r(546),na=r(953),aa=r(666);const oa=(e,t)=>{const r=$e.marks(e);return!!r&&!0===r[t]},ia=(e,t)=>{oa(e,t)?$e.removeMark(e,t):$e.addMark(e,t,!0)};r(3318);const sa="rich-text__button",la=({format:e,children:t})=>{const r=Gr();return n.createElement("button",{type:"button",className:[sa,oa(r,e)&&`${sa}__button--active`].filter(Boolean).join(" "),onMouseDown:t=>{t.preventDefault(),ia(r,e)}},t)},ca=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic bold-icon"},n.createElement("path",{className:"fill",d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"}),n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),ua=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic inline-code-icon"},n.createElement("path",{className:"fill",d:"M7.375 16.781l1.25-1.562L4.601 12l4.024-3.219-1.25-1.562-5 4a1 1 0 000 1.562l5 4zm9.25-9.562l-1.25 1.562L19.399 12l-4.024 3.219 1.25 1.562 5-4a1 1 0 000-1.562l-5-4zM14.976 3.216l-4 18-1.953-.434 4-18z"})),da=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic italic-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"})),fa=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic strikethrough-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"})),ha=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic underline-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"})),va={bold:{Button:()=>n.createElement(la,{format:"bold"},n.createElement(ca,null)),Leaf:({attributes:e,children:t})=>n.createElement("strong",{...e},t)},code:{Button:()=>n.createElement(la,{format:"code"},n.createElement(ua,null)),Leaf:({attributes:e,children:t})=>n.createElement("code",{...e},t)},italic:{Button:()=>n.createElement(la,{format:"italic"},n.createElement(da,null)),Leaf:({attributes:e,children:t})=>n.createElement("em",{...e},t)},strikethrough:{Button:()=>n.createElement(la,{format:"strikethrough"},n.createElement(fa,null)),Leaf:({attributes:e,children:t})=>n.createElement("del",{...e},t)},underline:{Button:()=>n.createElement(la,{format:"underline"},n.createElement(ha,null)),Leaf:({attributes:e,children:t})=>n.createElement("u",{...e},t)}},pa=(e,t)=>{const[r]=$e.nodes(e,{match:e=>We.isElement(e)&&e.type===t});return!!r},ga=["ol","ul"],ma=(e,t)=>{const r=pa(e,t),n=ga.includes(t);let a=t;if(r?a="p":n&&(a="li"),e.blurSelection&&Mt.select(e,e.blurSelection),Mt.unwrapNodes(e,{match:e=>We.isElement(e)&&ga.includes(e.type),split:!0}),Mt.setNodes(e,{type:a}),!r&&n){const r={type:t,children:[]};Mt.wrapNodes(e,r)}Cn.focus(e)},wa="rich-text__button",ya=({format:e,children:t,onClick:r,className:a})=>{const o=Gr(),i=(0,n.useCallback)((t=>{t.preventDefault(),ma(o,e)}),[o,e]);return n.createElement("button",{type:"button",className:[wa,a,pa(o,e)&&`${wa}__button--active`].filter(Boolean).join(" "),onClick:r||i},t)},ba=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h1-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-5 14h-2V9h-2V7h4v10z"})),Ea={Button:()=>n.createElement(ya,{format:"h1"},n.createElement(ba,null)),Element:({attributes:e,children:t})=>n.createElement("h1",{...e},t)},xa=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h2-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 8a2 2 0 01-2 2h-2v2h4v2H9v-4a2 2 0 012-2h2V9H9V7h4a2 2 0 012 2v2z"})),Oa={Button:()=>n.createElement(ya,{format:"h2"},n.createElement(xa,null)),Element:({attributes:e,children:t})=>n.createElement("h2",{...e},t)},ka=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h3-icon"},n.createElement("path",{fill:"none",d:"M.01 0h24v24h-24z"}),n.createElement("path",{className:"fill",d:"M19.01 3h-14c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 7.5c0 .83-.67 1.5-1.5 1.5.83 0 1.5.67 1.5 1.5V15a2 2 0 01-2 2h-4v-2h4v-2h-2v-2h2V9h-4V7h4a2 2 0 012 2v1.5z"})),Pa={Button:()=>n.createElement(ya,{format:"h3"},n.createElement(ka,null)),Element:({attributes:e,children:t})=>n.createElement("h3",{...e},t)},Ca=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h4-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 14h-2v-4H9V7h2v4h2V7h2v10z"})),Da={Button:()=>n.createElement(ya,{format:"h4"},n.createElement(Ca,null)),Element:({attributes:e,children:t})=>n.createElement("h4",{...e},t)},Na=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h5-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h2a2 2 0 012 2v2a2 2 0 01-2 2H9v-2h4v-2H9V7h6v2z"})),Sa={Button:()=>n.createElement(ya,{format:"h5"},n.createElement(Na,null)),Element:({attributes:e,children:t})=>n.createElement("h5",{...e},t)},ja=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic h6-icon"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M11 15h2v-2h-2v2zm8-12H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 6h-4v2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V9a2 2 0 012-2h4v2z"})),Fa={Button:()=>n.createElement(ya,{format:"h6"},n.createElement(ja,null)),Element:({attributes:e,children:t})=>n.createElement("h6",{...e},t)},Ba=(e,t,r)=>{(e=>{const[t]=$e.nodes(e,{match:e=>We.isElement(e)&&"link"===e.type});return!!t})(e)&&(e=>{Mt.unwrapNodes(e,{match:e=>We.isElement(e)&&"link"===e.type})})(e);const{selection:n,blurSelection:a}=e;a&&Mt.select(e,a);const o=n||a,i=o&&ct.isCollapsed(o),s={type:"link",url:t,newTab:r,children:i?[{text:t}]:[]};i?Mt.insertNodes(e,s):(Mt.wrapNodes(e,s,{split:!0}),Mt.collapse(e,{edge:"end"}))},Aa=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic link"},n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),n.createElement("path",{className:"fill",d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}));var Ma=r(5050),Ra=r(4479),Ta=r(6128);r(3404);const _a="rich-text-link",La={Button:()=>{const e=Gr();return n.createElement(ya,{format:"link",onClick:()=>Ba(e)},n.createElement(Aa,null))},Element:({attributes:e,children:t,element:r})=>{const a=Gr(),[o,i]=(0,n.useState)(!1),[s,l]=(0,n.useState)(!r.url),[c,u]=(0,n.useState)(r.url),[d,f]=(0,n.useState)(Boolean(r.newTab));(0,n.useEffect)((()=>{const e=Cn.findPath(a,r);Mt.setNodes(a,{url:c,newTab:d},{at:e})}),[c,d,a,r]);const h=(0,n.useCallback)((e=>{l(e)}),[]);return n.createElement("span",{className:_a,...e},n.createElement("span",{style:{userSelect:"none"},contentEditable:!1},n.createElement(Ma.Z,{initActive:void 0===c,buttonType:"none",size:"small",color:"dark",horizontalAlign:"center",forceOpen:s,onToggleOpen:h,render:({close:e})=>n.createElement(n.Fragment,null,n.createElement("div",{className:"rich-text-link__url-wrap"},n.createElement("input",{value:c||"",className:"rich-text-link__url",placeholder:"Enter a URL",onChange:e=>{const{value:t}=e.target;t&&o&&i(!1),u(t)},onKeyDown:t=>{"Enter"===t.key&&(t.preventDefault(),e())}}),n.createElement(Ra.Z,{className:"rich-text-link__confirm",buttonStyle:"none",icon:"chevron",onClick:t=>{t.preventDefault(),c?e():i(!0)}}),o&&n.createElement(aa.Z,{showError:o,message:"Please enter a valid URL."})),n.createElement(Ra.Z,{className:["rich-text-link__new-tab",d&&"rich-text-link__new-tab--checked"].filter(Boolean).join(" "),buttonStyle:"none",onClick:()=>f(!d)},n.createElement(Ta.Z,null),"Open link in new tab"))})),n.createElement("button",{className:["rich-text-link__button",s&&"rich-text-link__button--open"].filter(Boolean).join(" "),type:"button",onClick:()=>l(!0)},t))},plugins:[e=>{const t=e,{isInline:r}=t;return t.isInline=e=>"link"===e.type||r(e),t}]},za=La,Wa=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic ordered-list-icon"},n.createElement("path",{className:"fill",d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"}),n.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),Ia={Button:()=>n.createElement(ya,{format:"ol"},n.createElement(Wa,null)),Element:({attributes:e,children:t})=>n.createElement("ol",{...e},t)},Va=()=>n.createElement("svg",{viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"graphic unordered-list-icon"},n.createElement("path",{className:"fill",d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),n.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"})),qa={Button:()=>n.createElement(ya,{format:"ul"},n.createElement(Va,null)),Element:({attributes:e,children:t})=>n.createElement("ul",{...e},t)},Ha={Element:({attributes:e,children:t})=>n.createElement("li",{...e},t)},Za=e=>{const t=e,{isVoid:r}=t;return t.isVoid=e=>"relationship"===e.type||r(e),t};var $a=r(9243);r(3981);const Ua=()=>n.createElement("svg",{className:"icon icon--relationship",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},n.createElement("path",{d:"M19.0597 14.9691L19.0597 19.0946L6.01681 19.0946L6.01681 6.03028L10.0948 6.03028",className:"stroke",strokeWidth:"2"}),n.createElement("path",{d:"M19.0597 11.0039L19.0597 6.00387L14.0597 6.00387",className:"stroke",strokeWidth:"2"}),n.createElement("line",{x1:"18.7061",y1:"6.40767",x2:"13.0493",y2:"12.0645",className:"stroke",strokeWidth:"2"}));var Ka=r(7489);r(6654);const Ja="rich-text-relationship",Qa={depth:0},Ga=e=>{var t;const{attributes:r,children:a,element:o}=e,{relationTo:i,value:s}=o,{collections:l,serverURL:c,routes:{api:u}}=(0,$a.useConfig)(),[d]=(0,n.useState)((()=>l.find((e=>e.slug===i)))),f=Ir(),h=zn(),[{data:v}]=(0,Ka.Z)(`${c}${u}/${d.slug}/${null==s?void 0:s.id}`,{initialParams:Qa});return n.createElement("div",{className:[Ja,f&&h&&`${Ja}--selected`].filter(Boolean).join(" "),contentEditable:!1,...r},n.createElement(Ua,null),n.createElement("div",{className:`${Ja}__wrap`},n.createElement("div",{className:`${Ja}__label`},d.labels.singular," ","Relationship"),n.createElement("h5",null,v[(null===(t=null==d?void 0:d.admin)||void 0===t?void 0:t.useAsTitle)||"id"])),a)};var Xa=r(1851),Ya=r(8572),eo=r(9599),to=r(6268),ro=r(3636),no=r(4012),ao=r(1757),oo=r(7670);const io=(e,t)=>e.reduce(((e,r)=>{var n,a,o,i;return(null===(o=null===(a=null===(n=null==t?void 0:t.collections)||void 0===n?void 0:n[r.slug])||void 0===a?void 0:a.read)||void 0===o?void 0:o.permission)&&(null===(i=null==r?void 0:r.admin)||void 0===i?void 0:i.enableRichTextRelationship)?[...e,{label:r.labels.plural,value:r.slug}]:e}),[]),so=()=>{const{collections:e}=(0,$a.useConfig)(),{permissions:t}=(0,$a.useAuth)(),[r,a]=(0,n.useState)((()=>io(e,t))),{getData:o}=(0,no.ey)(),{relationTo:i}=o();return(0,n.useEffect)((()=>{a(io(e,t))}),[e,t]),n.createElement(n.Fragment,null,n.createElement(oo.Z,{required:!0,label:"Relation To",name:"relationTo",options:r}),i&&n.createElement(ao.Z,{label:"Related Document",name:"value",relationTo:i,required:!0}))};var lo=r(1278);r(8723);const co={},uo="relationship-rich-text-button",fo={Button:({path:e})=>{const{open:t,closeAll:r}=(0,Xa.useModal)(),a=Gr(),{serverURL:o,routes:{api:i},collections:s}=(0,$a.useConfig)(),[l,c]=(0,n.useState)(!1),[u,d]=(0,n.useState)(!1),[f]=(0,n.useState)((()=>s.find((({admin:{enableRichTextRelationship:e}})=>e)))),h=`${e}-add-relationship`,v=(0,n.useCallback)((async(e,{relationTo:t,value:n})=>{d(!0);const s=await lo.E.get(`${o}${i}/${t}/${n}?depth=0`),l=await s.json();((e,{value:t,relationTo:r})=>{const n=[{type:"relationship",value:t,relationTo:r,children:[{text:" "}]},{type:"p",children:[{text:""}]}];e.blurSelection&&Mt.select(e,e.blurSelection),Mt.insertNodes(e,n),Cn.focus(e)})(a,{value:{id:l.id},relationTo:t}),r(),c(!1),d(!1)}),[a,r,i,o]);return(0,n.useEffect)((()=>{l&&t(h)}),[l,t,h]),f?n.createElement(n.Fragment,null,n.createElement(ya,{className:uo,format:"relationship",onClick:()=>c(!0)},n.createElement(Ua,null)),l&&n.createElement(Xa.Modal,{slug:h,className:"relationship-rich-text-button__modal"},n.createElement(eo.Z,null,n.createElement("header",{className:"relationship-rich-text-button__header"},n.createElement("h3",null,"Add Relationship"),n.createElement(Ra.Z,{buttonStyle:"none",onClick:()=>{r(),c(!1)}},n.createElement(ro.Z,null))),n.createElement(Ya.Z,{onSubmit:v,initialData:co,disabled:u},n.createElement(so,null),n.createElement(to.Z,null,"Add relationship"))))):null},Element:Ga,plugins:[Za]},ho=e=>{const t=e,{isVoid:r}=t;return t.isVoid=e=>"upload"===e.type||r(e),t};var vo=r(8499),po=r(5643),go=r(7656),mo=r(1280),wo=r(4912),yo=r(6628),bo=r(254),Eo=r(4267);r(2835),r(5601);const xo="rich-text-upload",Oo="rich-text-upload-modal",ko={depth:0},Po=({attributes:e,children:t,element:r,path:a})=>{const{relationTo:o,value:i}=r,{closeAll:s,currentModal:l,open:c}=(0,Xa.useModal)(),{collections:u,serverURL:d,routes:{api:f}}=(0,$a.useConfig)(),[h]=(0,n.useState)((()=>u.filter((({admin:{enableRichTextRelationship:e},upload:t})=>Boolean(t)&&e)))),[v,p]=(0,n.useState)(!1),[g,m]=(0,n.useState)((()=>u.find((e=>e.slug===o)))),[w,y]=(0,n.useState)({label:g.labels.singular,value:g.slug}),[b,E]=(0,n.useState)(g),[x,O]=(0,n.useState)((()=>(0,bo.Z)(b))),[k,P]=(0,n.useState)(),[C,D]=(0,n.useState)(null),[N,S]=(0,n.useState)(null),[j,F]=(0,n.useState)(null),B=Lr(),A=Ir(),M=zn(),R=`${a}-edit-upload`,T=l===R,_=h.length>1,[{data:L}]=(0,Ka.Z)(`${d}${f}/${g.slug}/${null==i?void 0:i.id}`,{initialParams:ko}),z=T?`${d}${f}/${b.slug}`:null,[{data:W},{setParams:I}]=(0,Ka.Z)(z,{}),V=(0,po.Z)(g,L),q=(0,n.useCallback)((e=>{const t={type:"upload",value:{id:e.id},relationTo:b.slug,children:[{text:" "}]},n=Cn.findPath(B,r);Mt.setNodes(B,t,{at:n}),s()}),[s,B,r,b]);return(0,n.useEffect)((()=>{O((0,bo.Z)(b)),P(b.admin.pagination.defaultLimit)}),[b]),(0,n.useEffect)((()=>{v&&R&&c(R)}),[v,c,R]),(0,n.useEffect)((()=>{const e={};j&&(e.page=j),N&&(e.where=N),C&&(e.sort=C),k&&(e.limit=k),I(e)}),[I,j,C,N,k]),(0,n.useEffect)((()=>{E(u.find((({slug:e})=>w.value===e)))}),[w,u]),n.createElement("div",{className:[xo,A&&M&&`${xo}--selected`].filter(Boolean).join(" "),contentEditable:!1,...e},n.createElement("div",{className:`${xo}__thumbnail`},V&&n.createElement("img",{src:V,alt:null==L?void 0:L.filename}),!V&&n.createElement(vo.Z,null)),n.createElement("div",{className:`${xo}__wrap`},n.createElement("div",{className:`${xo}__label`},g.labels.singular),n.createElement("h5",null,null==L?void 0:L.filename)),n.createElement(Ra.Z,{icon:"edit",round:!0,buttonStyle:"icon-label",iconStyle:"with-border",className:`${xo}__button`,onClick:e=>{e.preventDefault(),p(!0)}}),t,v&&n.createElement(Xa.Modal,{className:Oo,slug:R},T&&n.createElement(eo.Z,{width:"wide"},n.createElement("header",{className:`${Oo}__header`},n.createElement("h1",null,"Choose"," ",b.labels.singular),n.createElement(Ra.Z,{icon:"x",round:!0,buttonStyle:"icon-label",iconStyle:"with-border",onClick:()=>{s(),p(!1)}})),_&&n.createElement("div",{className:`${Oo}__select-collection-wrap`},n.createElement(na.Z,{label:"Select a Collection to Browse"}),n.createElement(wo.Z,{className:`${xo}__select-collection`,value:w,onChange:y,options:h.map((e=>({label:e.labels.singular,value:e.slug})))})),n.createElement(mo.Z,{collection:{...b,fields:x},enableColumns:!1,enableSort:!0,modifySearchQuery:!1,handleSortChange:D,handleWhereChange:S}),n.createElement(go.Z,{docs:null==W?void 0:W.docs,collection:b,onCardClick:e=>{q(e),m(b),p(!1),s()}}),n.createElement("div",{className:`${Oo}__page-controls`},n.createElement(yo.Z,{limit:W.limit,totalPages:W.totalPages,page:W.page,hasPrevPage:W.hasPrevPage,hasNextPage:W.hasNextPage,prevPage:W.prevPage,nextPage:W.nextPage,numberOfNeighbors:1,onChange:F,disableHistoryChange:!0}),(null==W?void 0:W.totalDocs)>0&&n.createElement(n.Fragment,null,n.createElement("div",{className:`${Oo}__page-info`},W.page,"-",W.totalPages>1?W.limit:W.totalDocs," ","of"," ",W.totalDocs),n.createElement(Eo.Z,{collection:b,limit:k,modifySearchParams:!1,handleChange:P}))))))};r(1168);const Co=()=>n.createElement("svg",{className:"icon icon--upload",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},n.createElement("path",{d:"M20.06,5.12h-15v15h15Zm-2,2v7L15.37,11l-3.27,4.1-2-1.58-3,3.74V7.12Z",className:"fill"}),n.createElement("circle",{cx:"9.69",cy:"9.47",r:"0.97",className:"fill"}));r(9622);const Do="upload-rich-text-button",No="rich-text-upload-modal",So=({path:e})=>{const{open:t,closeAll:r,currentModal:a}=(0,Xa.useModal)(),o=Gr(),{serverURL:i,routes:{api:s},collections:l}=(0,$a.useConfig)(),[c]=(0,n.useState)((()=>l.filter((({admin:{enableRichTextRelationship:e},upload:t})=>Boolean(t)&&e)))),[u,d]=(0,n.useState)(!1),[f,h]=(0,n.useState)((()=>{const e=l.find((({admin:{enableRichTextRelationship:e},upload:t})=>Boolean(t)&&e));if(e)return{label:e.labels.singular,value:e.slug}})),[v,p]=(0,n.useState)((()=>l.find((({admin:{enableRichTextRelationship:e},upload:t})=>Boolean(t)&&e)))),[g,m]=(0,n.useState)((()=>v?(0,bo.Z)(v):void 0)),[w,y]=(0,n.useState)(),[b,E]=(0,n.useState)(null),[x,O]=(0,n.useState)(null),[k,P]=(0,n.useState)(null),C=`${e}-add-upload`,D=c.length>1,N=a===C,S=N?`${i}${s}/${v.slug}`:null,[{data:j},{setParams:F}]=(0,Ka.Z)(S,{});return(0,n.useEffect)((()=>{v&&m((0,bo.Z)(v))}),[v]),(0,n.useEffect)((()=>{u&&t(C)}),[u,t,C]),(0,n.useEffect)((()=>{const e={};k&&(e.page=k),x&&(e.where=x),b&&(e.sort=b),w&&(e.limit=w),F(e)}),[F,k,b,x,w]),(0,n.useEffect)((()=>{f&&p(l.find((({slug:e})=>f.value===e)))}),[f,l]),v?n.createElement(n.Fragment,null,n.createElement(ya,{className:Do,format:"upload",onClick:()=>d(!0)},n.createElement(Co,null)),u&&n.createElement(Xa.Modal,{className:No,slug:C},N&&n.createElement(eo.Z,{width:"wide"},n.createElement("header",{className:"rich-text-upload-modal__header"},n.createElement("h1",null,"Add"," ",v.labels.singular),n.createElement(Ra.Z,{icon:"x",round:!0,buttonStyle:"icon-label",iconStyle:"with-border",onClick:()=>{r(),d(!1)}})),D&&n.createElement("div",{className:"rich-text-upload-modal__select-collection-wrap"},n.createElement(na.Z,{label:"Select a Collection to Browse"}),n.createElement(wo.Z,{className:"upload-rich-text-button__select-collection",value:f,onChange:h,options:c.map((e=>({label:e.labels.singular,value:e.slug})))})),n.createElement(mo.Z,{collection:{...v,fields:g},enableColumns:!1,enableSort:!0,modifySearchQuery:!1,handleSortChange:E,handleWhereChange:O}),n.createElement(go.Z,{docs:null==j?void 0:j.docs,collection:v,onCardClick:e=>{((e,{value:t,relationTo:r})=>{const n=[{type:"upload",value:t,relationTo:r,children:[{text:" "}]},{type:"p",children:[{text:""}]}];e.blurSelection&&Mt.select(e,e.blurSelection),Mt.insertNodes(e,n),Cn.focus(e)})(o,{value:{id:e.id},relationTo:v.slug}),d(!1),r()}}),n.createElement("div",{className:"rich-text-upload-modal__page-controls"},n.createElement(yo.Z,{limit:j.limit,totalPages:j.totalPages,page:j.page,hasPrevPage:j.hasPrevPage,hasNextPage:j.hasNextPage,prevPage:j.prevPage,nextPage:j.nextPage,numberOfNeighbors:1,onChange:P,disableHistoryChange:!0}),(null==j?void 0:j.totalDocs)>0&&n.createElement(n.Fragment,null,n.createElement("div",{className:"rich-text-upload-modal__page-info"},j.page,"-",j.totalPages>1?j.limit:j.totalDocs," ","of"," ",j.totalDocs),n.createElement(Eo.Z,{collection:v,limit:w,modifySearchParams:!1,handleChange:y})))))):null},jo={h1:Ea,h2:Oa,h3:Pa,h4:Da,h5:Sa,h6:Fa,link:za,ol:Ia,ul:qa,li:Ha,relationship:fo,upload:{Button:So,Element:Po,plugins:[ho]}},Fo={"mod+b":"bold","mod+i":"italic","mod+u":"underline","mod+`":"code"},Bo=(e,t)=>"function"==typeof t?t(e):e,Ao=(e,t)=>t.reduce(((e,t)=>{if("object"==typeof t&&Array.isArray(t.plugins))return t.plugins.reduce(Bo,e);if("string"==typeof t){if(jo[t]&&jo[t].plugins)return jo[t].plugins.reduce(Bo,e);if(va[t]&&va[t].plugins)return va[t].plugins.reduce(Bo,e)}return e}),e);var Mo=r(2077),Ro=r(1417),To=r(7070);function _o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Lo=new WeakMap,zo=new WeakMap;class Wo{}class Io extends Wo{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();var{offset:t,path:r}=e;this.offset=t,this.path=r}}class Vo extends Wo{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();var{offset:t,path:r}=e;this.offset=t,this.path=r}}var qo=e=>zo.get(e);function Ho(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ho(Object(r),!0).forEach((function(t){_o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ho(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $o=new WeakSet,Uo=e=>{var t=[],r=e=>{if(null!=e){var n=t[t.length-1];if("string"==typeof e){var a={text:e};$o.add(a),e=a}if(gt.isText(e)){var o=e;gt.isText(n)&&$o.has(n)&&$o.has(o)&&gt.equals(n,o,{loose:!0})?n.text+=o.text:t.push(o)}else if(We.isElement(e))t.push(e);else{if(!(e instanceof Wo))throw new Error("Unexpected hyperscript child object: ".concat(e));var i=t[t.length-1];gt.isText(i)||(r(""),i=t[t.length-1]),e instanceof Io?((e,t)=>{var r=e.text.length;Lo.set(e,[r,t])})(i,e):e instanceof Vo&&((e,t)=>{var r=e.text.length;zo.set(e,[r,t])})(i,e)}}};for(var n of e.flat(1/0))r(n);return t};function Ko(e,t,r){return Zo(Zo({},t),{},{children:Uo(r)})}function Jo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(r),!0).forEach((function(t){_o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Go={anchor:function(e,t,r){return new Io(t)},cursor:function(e,t,r){return[new Io(t),new Vo(t)]},editor:function(e,t,r){var n,a=[];for(var o of r)ct.isRange(o)?n=o:a.push(o);var i,s=Uo(a),l={},c=ge();for(var[u,d]of(Object.assign(c,t),c.children=s,Ge.texts(c))){var f=(i=u,Lo.get(i)),h=qo(u);if(null!=f){var[v]=f;l.anchor={path:d,offset:v}}if(null!=h){var[p]=h;l.focus={path:d,offset:p}}}if(l.anchor&&!l.focus)throw new Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<anchor />`. For collapsed selections, use `<cursor />` instead.");if(!l.anchor&&l.focus)throw new Error("Slate hyperscript ranges must have both `<anchor />` and `<focus />` defined if one is defined, but you only defined `<focus />`. For collapsed selections, use `<cursor />` instead.");return null!=n?c.selection=n:ct.isRange(l)&&(c.selection=l),c},element:Ko,focus:function(e,t,r){return new Vo(t)},fragment:function(e,t,r){return Uo(r)},selection:function(e,t,r){var n=r.find((e=>e instanceof Io)),a=r.find((e=>e instanceof Vo));if(!n||null==n.offset||null==n.path)throw new Error("The <selection> hyperscript tag must have an <anchor> tag as a child with `path` and `offset` attributes defined.");if(!a||null==a.offset||null==a.path)throw new Error("The <selection> hyperscript tag must have a <focus> tag as a child with `path` and `offset` attributes defined.");return Zo({anchor:{offset:n.offset,path:n.path},focus:{offset:a.offset,path:a.path}},t)},text:function(e,t,r){var n=Uo(r);if(n.length>1)throw new Error("The <text> hyperscript tag must only contain a single node's worth of children.");var[a]=n;if(null==a&&(a={text:""}),!gt.isText(a))throw new Error("\n    The <text> hyperscript tag can only contain text content as children.");return $o.delete(a),Object.assign(a,t),a}},Xo=e=>function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),o=2;o<n;o++)a[o-2]=arguments[o];var s=e[t];if(!s)throw new Error("No hyperscript creator found for tag: <".concat(t,">"));null==r&&(r={}),i(r)||(a=[r].concat(a),r={});var l=s(t,r,a=a.filter((e=>Boolean(e))).flat());return l},Yo=e=>{var t={},r=function(r){var n=e[r];if("object"!=typeof n)throw new Error("Properties specified for a hyperscript shorthand should be an object, but for the custom element <".concat(r,">  tag you passed: ").concat(n));t[r]=(e,t,r)=>Ko(0,Qo(Qo({},n),t),r)};for(var n in e)r(n);return t},ei=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{elements:t={}}=e,r=Yo(t),n=Qo(Qo(Qo({},Go),r),e.creators),a=Xo(n);return a}();const ti={A:e=>({type:"link",newTab:"_blank"===e.getAttribute("target"),url:e.getAttribute("href")}),BLOCKQUOTE:()=>({type:"blockquote"}),H1:()=>({type:"h1"}),H2:()=>({type:"h2"}),H3:()=>({type:"h3"}),H4:()=>({type:"h4"}),H5:()=>({type:"h5"}),H6:()=>({type:"h6"}),IMG:e=>({type:"image",url:e.getAttribute("src")}),LI:()=>({type:"li"}),OL:()=>({type:"ol"}),P:()=>({type:"p"}),PRE:()=>({type:"code"}),UL:()=>({type:"ul"})},ri={CODE:()=>({code:!0}),DEL:()=>({strikethrough:!0}),EM:()=>({italic:!0}),I:()=>({italic:!0}),S:()=>({strikethrough:!0}),STRONG:()=>({bold:!0}),U:()=>({underline:!0})},ni=e=>{if(3===e.nodeType)return e.textContent;if(1!==e.nodeType)return null;if("BR"===e.nodeName)return"\n";const{nodeName:t}=e;let r=e;"PRE"===t&&e.childNodes[0]&&"CODE"===e.childNodes[0].nodeName&&([r]=e.childNodes);const n=Array.from(r.childNodes).map(ni).flat();if("BODY"===e.nodeName)return ei("fragment",{},n);if(ti[t]){const r=ti[t](e);return ei("element",r,n)}if(ri[t]){const r=ri[t](e);return n.map((e=>ei("text",r,e)))}return n},ai=e=>{const{insertData:t}=e,r=e;return r.insertData=e=>{if(!e.types.includes("application/x-slate-fragment")){const t=e.getData("text/html");if(t){const e=(new DOMParser).parseFromString(t,"text/html"),n=ni(e.body);return void Mt.insertFragment(r,n)}}t(e)},r},oi=(e,t)=>{const r=[...e];return(e.indexOf("ul")>-1||e.indexOf("ol")>-1)&&r.push("li"),r.reduce(((e,r)=>"object"==typeof r&&r.name?{...e,[r.name]:r}:"string"==typeof r&&t[r]?{...e,[r]:t[r]}:e),{})},ii=["h1","h2","h3","h4","h5","h6"],si=e=>{const t=e;return t.shouldBreakOutOnEnter=e=>ii.includes(String(e.type)),t};r(3329);const li=["h1","h2","h3","h4","h5","h6","ul","ol","link","relationship","upload"],ci=["bold","italic","underline","strikethrough","code"],ui="rich-text",di=(0,ra.Z)((e=>{const{path:t,name:r,required:o,validate:i=ea.richText,label:s,admin:l,admin:{readOnly:c,style:u,width:d,placeholder:f,description:h,hideGutter:v,condition:p}={}}=e,g=(null==l?void 0:l.elements)||li,m=(null==l?void 0:l.leaves)||ci,w=t||r,[y,b]=(0,n.useState)(!1),[E,x]=(0,n.useState)({}),[O,k]=(0,n.useState)({}),P=(0,n.useCallback)((({attributes:e,children:t,element:r})=>{const a=E[null==r?void 0:r.type],o=null==a?void 0:a.Element;return o?n.createElement(o,{attributes:e,element:r,path:w},t):n.createElement("div",{...e},t)}),[E,w]),C=(0,n.useCallback)((({attributes:e,children:t,leaf:r})=>{var a;const o=Object.keys(O).find((e=>r[e]));if(null===(a=O[o])||void 0===a?void 0:a.Leaf){const{Leaf:a}=O[o];return n.createElement(a,{attributes:e,leaf:r,path:w},t)}return n.createElement("span",{...e},t)}),[O,w]),D=(0,n.useCallback)((e=>i(e,{required:o})),[i,o]),N=(0,ta.Z)({path:w,validate:D,stringify:!0,condition:p}),{value:S,showError:j,setValue:F,errorMessage:B}=N,A=[ui,"field-type",j&&"error",c&&`${ui}--read-only`].filter(Boolean).join(" "),M=(0,n.useMemo)((()=>{let e=si((e=>{var t=e,{apply:r}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:e}=t,{redos:r}=e;if(r.length>0){var n=r[r.length-1];Jn.withoutSaving(t,(()=>{$e.withoutNormalizing(t,(()=>{for(var e of n)t.apply(e)}))})),e.redos.pop(),e.undos.push(n)}},t.undo=()=>{var{history:e}=t,{undos:r}=e;if(r.length>0){var n=r[r.length-1];Jn.withoutSaving(t,(()=>{$e.withoutNormalizing(t,(()=>{var e=n.map(et.inverse).reverse();for(var r of e)t.apply(r)}))})),e.redos.push(n),e.undos.pop()}},t.apply=e=>{var{operations:n,history:a}=t,{undos:o}=a,i=o[o.length-1],s=i&&i[i.length-1],l=Xn(e,s),c=Jn.isSaving(t),u=Jn.isMerging(t);if(null==c&&(c=Gn(e)),c){if(null==u&&(u=null!=i&&(0!==n.length||Qn(e,s)||l)),i&&u)l&&i.pop(),i.push(e);else{var d=[e];o.push(d)}for(;o.length>100;)o.shift();Yn(e)&&(a.redos=[])}r(e)},t})(Hn(ge())));return e=Ao(e,g),e=Ao(e,m),e=ai(e),e}),[g,m]),R=(0,n.useCallback)((()=>{M.blurSelection=M.selection}),[M]);if((0,n.useEffect)((()=>{if(!y){const e=oi(g,jo),t=oi(m,va);x(e),k(t),b(!0)}}),[y,g,m]),!y)return null;let T=S;if("string"==typeof T)try{T=JSON.parse(T)}catch(e){}return T||(T=Mo.default),n.createElement("div",{className:A,style:{...u,width:d}},n.createElement("div",{className:`${ui}__wrap`},!v&&n.createElement(Ro.Z,null),n.createElement(aa.Z,{showError:j,message:B}),n.createElement(na.Z,{htmlFor:w,label:s,required:o}),n.createElement(In,{editor:M,value:T,onChange:e=>{e!==Mo.default&&e!==S&&F(e)}},n.createElement("div",{className:`${ui}__wrapper`},n.createElement("div",{className:`${ui}__toolbar`},g.map(((e,t)=>{let r;"object"==typeof e&&(null==e?void 0:e.name)&&(r=e.name),"string"==typeof e&&(r=e);const a=E[r],o=null==a?void 0:a.Button;return o?n.createElement(o,{key:t,path:w}):null})),m.map(((e,t)=>{let r;"object"==typeof e&&(null==e?void 0:e.name)&&(r=e.name),"string"==typeof e&&(r=e);const a=O[r],o=null==a?void 0:a.Button;return o?n.createElement(o,{key:t,path:w}):null}))),n.createElement(Zn,{className:`${ui}__editor`,renderElement:P,renderLeaf:C,placeholder:f,spellCheck:!0,readOnly:c,onBlur:R,onKeyDown:e=>{if("Enter"===e.key)if(e.shiftKey)e.preventDefault(),M.insertText("\n");else{const t=Ge.descendant(M,M.selection.anchor.path.slice(0,-1));if(We.isElement(t)&&M.shouldBreakOutOnEnter(t)){e.preventDefault();const t=Ge.descendant(M,M.selection.anchor.path);gt.isText(t)&&String(t.text).length===M.selection.anchor.offset?Mt.insertNodes(M,{type:"p",children:[{text:""}]}):(Mt.splitNodes(M),Mt.setNodes(M,{type:"p"}))}}if("Backspace"===e.key){const e=Ge.descendant(M,M.selection.anchor.path.slice(0,-1));if(We.isElement(e)&&"li"===e.type){const e=Ge.descendant(M,M.selection.anchor.path);gt.isText(e)&&1===String(e.text).length&&(Mt.unwrapNodes(M,{match:e=>We.isElement(e)&&ga.includes(e.type),split:!0}),Mt.setNodes(M,{type:"p"}))}else M.isVoid(e)&&Mt.removeNodes(M)}Object.keys(Fo).forEach((t=>{if((0,a.ZP)(t,e)){e.preventDefault();ia(M,Fo[t])}}))}}))),n.createElement(To.Z,{value:S,description:h})))}))},9619:(e,t)=>{"use strict";for(var r="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),n={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},a={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},o={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=1;i<20;i++)o["f"+i]=111+i;function s(e,t,r){t&&!("byKey"in t)&&(r=t,t=null),Array.isArray(e)||(e=[e]);var n=e.map((function(e){return l(e,t)})),a=function(e){return n.some((function(t){return c(t,e)}))};return null==r?a:a(r)}function l(e,t){var r=t&&t.byKey,a={},o=(e=e.replace("++","+add")).split("+"),i=o.length;for(var s in n)a[n[s]]=!1;var l=!0,c=!1,f=void 0;try{for(var h,v=o[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){var p=h.value,g=p.endsWith("?")&&p.length>1;g&&(p=p.slice(0,-1));var m=d(p),w=n[m];1!==i&&w||(r?a.key=m:a.which=u(p)),w&&(a[w]=!g||null)}}catch(e){c=!0,f=e}finally{try{!l&&v.return&&v.return()}finally{if(c)throw f}}return a}function c(e,t){for(var r in e){var n=e[r],a=void 0;if(null!=n&&((null!=(a="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&a!==n))return!1}return!0}function u(e){return e=d(e),o[e]||e.toUpperCase().charCodeAt(0)}function d(e){return e=e.toLowerCase(),e=a[e]||e}t.TB=function(e,t){return s(e,{byKey:!0},t)}}}]);