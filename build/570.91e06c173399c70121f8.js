"use strict";(self.webpackChunkpayload_starter_typescript=self.webpackChunkpayload_starter_typescript||[]).push([[570],{9410:(e,t,a)=>{a.d(t,{Z:()=>o});var l=a(7294);a(2926);const r=()=>l.createElement("svg",{className:"icon icon--copy",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},l.createElement("rect",{x:"6.5",y:"10",width:"8",height:"8",className:"stroke"}),l.createElement("path",{d:"M10 9.98438V6.5H18V14.5H14",className:"stroke"}));var n=a(579);a(8362);const o=({value:e,defaultMessage:t="copy",successMessage:a="copied"})=>{const o=(0,l.useRef)(null),[i,s]=(0,l.useState)(!1),[c,d]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{i&&!c&&setTimeout((()=>{s(!1)}),1500)}),[i,c]),e?l.createElement("button",{onMouseEnter:()=>{d(!0),s(!1)},onMouseLeave:()=>{d(!1),s(!1)},type:"button",className:"copy-to-clipboard",onClick:()=>{o&&o.current&&(o.current.select(),o.current.setSelectionRange(0,e.length+1),document.execCommand("copy"),s(!0))}},l.createElement(r,null),l.createElement(n.Z,null,i&&a,!i&&t),l.createElement("textarea",{readOnly:!0,value:e,ref:o})):null}},9580:(e,t,a)=>{a.d(t,{Z:()=>v});var l=a(7294),r=a(8133),n=a(3559),o=a(4479),i=a(9243),s=a(9410),c=a(5976);a(5228);const d="file-meta",u=e=>{const{filename:t,filesize:a,width:r,height:n,mimeType:o,staticURL:u,url:m}=e,{serverURL:p}=(0,i.useConfig)(),v=m||`${p}${u}/${t}`;return l.createElement("div",{className:d},l.createElement("div",{className:"file-meta__url"},l.createElement("a",{href:v,target:"_blank",rel:"noopener noreferrer"},t),l.createElement(s.Z,{value:v,defaultMessage:"Copy URL"})),l.createElement("div",{className:"file-meta__size-type"},(0,c.Z)(a),r&&n&&l.createElement(l.Fragment,null," - ",r,"x",n),o&&l.createElement(l.Fragment,null," - ",o)))};var m=a(5821);a(516);const p="file-details",v=e=>{var t;const{doc:a,collection:i,handleRemove:s}=e,{upload:{staticURL:c}}=i,{filename:d,filesize:v,width:h,height:E,mimeType:f,sizes:y,url:g}=a,[b,w]=(0,l.useState)(!1),Z=y&&(null===(t=Object.keys(y))||void 0===t?void 0:t.length)>0;return l.createElement("div",{className:p},l.createElement("header",null,l.createElement(n.Z,{doc:a,collection:i}),l.createElement("div",{className:"file-details__main-detail"},l.createElement(u,{staticURL:c,filename:d,filesize:v,width:h,height:E,mimeType:f,url:g}),Z&&l.createElement(o.Z,{className:"file-details__toggle-more-info"+(b?" open":""),buttonStyle:"none",onClick:()=>w(!b)},!b&&l.createElement(l.Fragment,null,"More info",l.createElement(m.Z,null)),b&&l.createElement(l.Fragment,null,"Less info",l.createElement(m.Z,null)))),s&&l.createElement(o.Z,{icon:"x",round:!0,buttonStyle:"icon-label",iconStyle:"with-border",onClick:s,className:"file-details__remove"})),Z&&l.createElement(r.Z,{className:"file-details__more-info",height:b?"auto":0},l.createElement("ul",{className:"file-details__sizes"},Object.entries(y).map((([e,t])=>(null==t?void 0:t.filename)?l.createElement("li",{key:e},l.createElement("div",{className:"file-details__size-label"},e),l.createElement(u,{...t,mimeType:f,staticURL:c})):null)))))}},7070:(e,t,a)=>{a.d(t,{Z:()=>n});var l=a(7294),r=a(2049);a(4120);const n=e=>{const{description:t,value:a}=e;if((0,r.isComponent)(t)){const e=t;return l.createElement(e,{value:a})}return t?l.createElement("div",{className:"field-description"},"function"==typeof t?t({value:a}):t):null}},2049:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.isComponent=void 0;const r=l(a(7294));t.isComponent=function(e){return r.default.isValidElement(e)}},161:(e,t,a)=>{a.d(t,{S:()=>i,p:()=>s});var l=a(7294),r=a(727);const n=(0,l.createContext)(!1),{Provider:o}=n,i=({children:e,allow:t})=>{const{breakpoints:{m:a}}=(0,r.useWindowInfo)();return l.createElement(o,{value:t&&!a},e)},s=()=>(0,l.useContext)(n)},1417:(e,t,a)=>{a.d(t,{Z:()=>o});var l=a(7294),r=a(161);a(3317);const n="field-type-gutter",o=({children:e,variant:t="left",verticalAlignment:a="sticky",className:o,dragHandleProps:i={}})=>{const s=(0,r.p)(),c=[n,`${n}--${t}`,`${n}--v-align-${a}`,s&&`${n}--negative-gutter`,o&&o].filter(Boolean).join(" ");return l.createElement("div",{className:c,...i},l.createElement("div",{className:`${n}__content-container`},l.createElement("div",{className:`${n}__content`},e)))}},1439:(e,t,a)=>{a.d(t,{Z:()=>u,q:()=>d});var l=a(7294),r=a(2143);const n=({root:e=null,rootMargin:t="0px",threshold:a=0}={})=>{const[r,n]=(0,l.useState)(),[o,i]=(0,l.useState)(null),s=(0,l.useRef)(new window.IntersectionObserver((([e])=>n(e)),{root:e,rootMargin:t,threshold:a}));return(0,l.useEffect)((()=>{const{current:e}=s;return e.disconnect(),o&&e.observe(o),()=>e.disconnect()}),[o]),[i,r]};var o=a(3780);const i="render-fields",s={rootMargin:"1000px"},c=(0,l.createContext)({}),d=()=>(0,l.useContext)(c),u=e=>{var t;const{fieldSchema:a,fieldTypes:u,filter:m,permissions:p,readOnly:v,operation:h,className:E}=e,[f,y]=(0,l.useState)(!1),[g,b]=n(s),w=Boolean(null==b?void 0:b.isIntersecting),Z=(null===(t=null==b?void 0:b.boundingClientRect)||void 0===t?void 0:t.top)<0,C=w||Z,{operation:$}=d(),N=h||$,[_,k]=(0,l.useState)({operation:N});(0,l.useEffect)((()=>{k({operation:N})}),[N]),(0,l.useEffect)((()=>{C&&!f&&y(!0)}),[C,f]);const S=[i,E].filter(Boolean).join(" ");return a?l.createElement("div",{ref:g,className:S},f&&l.createElement(c.Provider,{value:_},a.map(((e,t)=>{var a,n,i,s,c,d,h,E;const f=(0,o.fieldIsPresentationalOnly)(e);let y=u[e.type];if(f||!(null==e?void 0:e.hidden)&&!0!==(null===(a=null==e?void 0:e.admin)||void 0===a?void 0:a.disabled)){if(m&&"function"==typeof m&&m(e)||!m){if(f)return l.createElement(y,{...e,key:t});(null===(n=null==e?void 0:e.admin)||void 0===n?void 0:n.hidden)&&(y=u.hidden);const a=(0,o.fieldAffectsData)(e),m=a?null==p?void 0:p[e.name]:p;let{admin:{readOnly:g}={}}=e;if(v&&(g=!0),a&&!1!==(null===(s=null===(i=null==p?void 0:p[null==e?void 0:e.name])||void 0===i?void 0:i.read)||void 0===s?void 0:s.permission)||!a)return a&&!1===(null===(d=null===(c=null==p?void 0:p[null==e?void 0:e.name])||void 0===c?void 0:c[N])||void 0===d?void 0:d.permission)&&(g=!0),y?l.createElement(r.Z,{key:t,CustomComponent:null===(E=null===(h=null==e?void 0:e.admin)||void 0===h?void 0:h.components)||void 0===E?void 0:E.Field,DefaultComponent:y,componentProps:{...e,path:e.path||(a?e.name:void 0),fieldTypes:u,admin:{...e.admin||{},readOnly:g},permissions:m}}):l.createElement("div",{className:"missing-field",key:t},"No matched field found for"," ",'"',e.label,'"')}return null}return null})))):null}},5212:(e,t,a)=>{a.d(t,{Z:()=>u});var l=a(7294),r=a(8170),n=a(546),o=a(666),i=a(5193),s=a(6128),c=a(7070);a(4198);const d="checkbox",u=(0,n.Z)((e=>{const{name:t,path:a,required:n,validate:u=i.checkbox,label:m,onChange:p,disableFormData:v,admin:{readOnly:h,style:E,width:f,description:y,condition:g}={}}=e,b=a||t,w=(0,l.useCallback)((e=>u(e,{required:n})),[u,n]),{value:Z,showError:C,errorMessage:$,setValue:N}=(0,r.Z)({path:b,validate:w,disableFormData:v,condition:g});return l.createElement("div",{className:["field-type",d,C&&"error",Z&&`${d}--checked`,h&&`${d}--read-only`].filter(Boolean).join(" "),style:{...E,width:f}},l.createElement("div",{className:`${d}__error-wrap`},l.createElement(o.Z,{showError:C,message:$})),l.createElement("input",{type:"checkbox",name:b,id:b,checked:Boolean(Z),readOnly:!0}),l.createElement("button",{type:"button",onClick:h?void 0:()=>{N(!Z),"function"==typeof p&&p(!Z)}},l.createElement("span",{className:`${d}__input`},l.createElement(s.Z,null)),l.createElement("span",{className:`${d}__label`},m)),l.createElement(c.Z,{value:Z,description:y}))}))},4007:(e,t,a)=>{a.d(t,{Z:()=>s});var l=a(7294),r=a(8170),n=a(953),o=a(666),i=a(4012);a(5751);const s=()=>{const{getField:e}=(0,i.ey)(),t=e("password"),a=(0,l.useCallback)((e=>e===(null==t?void 0:t.value)||"Passwords do not match."),[t]),{value:s,showError:c,setValue:d,errorMessage:u}=(0,r.Z)({path:"confirm-password",disableFormData:!0,validate:a,enableDebouncedValue:!0}),m=["field-type","confirm-password",c&&"error"].filter(Boolean).join(" ");return l.createElement("div",{className:m},l.createElement(o.Z,{showError:c,message:u}),l.createElement(n.Z,{htmlFor:"confirm-password",label:"Confirm Password",required:!0}),l.createElement("input",{value:s||"",onChange:d,type:"password",autoComplete:"off",id:"confirm-password",name:"confirm-password"}))}},8571:(e,t,a)=>{a.d(t,{Z:()=>d});var l=a(7294),r=a(546),n=a(8170),o=a(953),i=a(666),s=a(7070),c=a(5193);a(5786);const d=(0,r.Z)((e=>{const{name:t,path:a,required:r,validate:d=c.email,admin:{readOnly:u,style:m,width:p,placeholder:v,autoComplete:h,description:E,condition:f}={},label:y}=e,g=a||t,b=(0,l.useCallback)((e=>d(e,{required:r})),[d,r]),w=(0,n.Z)({path:g,validate:b,enableDebouncedValue:!0,condition:f}),{value:Z,showError:C,setValue:$,errorMessage:N}=w,_=["field-type","email",C&&"error",u&&"read-only"].filter(Boolean).join(" ");return l.createElement("div",{className:_,style:{...m,width:p}},l.createElement(i.Z,{showError:C,message:N}),l.createElement(o.Z,{htmlFor:g,label:y,required:r}),l.createElement("input",{value:Z||"",onChange:$,disabled:Boolean(u),placeholder:v,type:"email",id:g,name:g,autoComplete:h}),l.createElement(s.Z,{value:Z,description:E}))}))},4020:(e,t,a)=>{a.d(t,{Z:()=>n});var l=a(7294),r=a(8170);const n=(0,a(546).Z)((e=>{const{name:t,path:a,value:n,modifyForm:o=!0}=e,i=a||t,{value:s,setValue:c}=(0,r.Z)({path:i});return(0,l.useEffect)((()=>{void 0!==n&&c(n,o)}),[n,c,o]),l.createElement("input",{type:"hidden",value:s||"",onChange:c,name:i})}))},6067:(e,t,a)=>{a.d(t,{Z:()=>c});var l=a(7294),r=a(8170),n=a(953),o=a(666),i=a(546),s=a(5193);a(8108);const c=(0,i.Z)((e=>{const{path:t,name:a,required:i,validate:c=s.password,style:d,width:u,autoComplete:m,label:p}=e,v=t||a,h=(0,l.useCallback)((e=>c(e,{required:i})),[c,i]),{value:E,showError:f,formProcessing:y,setValue:g,errorMessage:b}=(0,r.Z)({path:v,validate:h,enableDebouncedValue:!0}),w=["field-type","password",f&&"error"].filter(Boolean).join(" ");return l.createElement("div",{className:w,style:{...d,width:u}},l.createElement(o.Z,{showError:f,message:b}),l.createElement(n.Z,{htmlFor:v,label:p,required:i}),l.createElement("input",{value:E||"",onChange:g,disabled:y,type:"password",autoComplete:m,id:v,name:v}))}))},1757:(e,t,a)=>{a.d(t,{Z:()=>f});var l=a(7294),r=a(9243),n=a(546),o=a(4912),i=a(8170),s=a(953),c=a(666),d=a(7070),u=a(5193),m=a(4012);const p=e=>e.reduce(((e,t)=>t.options?[...e,...p(t.options)]:[...e,t.id]),[]),v=(e,t)=>{switch(t.type){case"CLEAR":return t.required?[]:[{value:"null",label:"None"}];case"ADD":{const{hasMultipleRelations:a,collection:l,relation:r,data:n}=t,o=l.admin.useAsTitle||"id",i=p(e);if(!a)return[...e,...n.docs.reduce(((e,t)=>-1===i.indexOf(t.id)?(i.push(t.id),[...e,{label:t[o],value:t.id}]):e),[])];const s=[...e],c=s.find((e=>e.label===l.labels.plural)),d=n.docs.reduce(((e,t)=>-1===i.indexOf(t.id)?(i.push(t.id),[...e,{label:t[o],relationTo:r,value:t.id}]):e),[]);return c?c.options=[...c.options,...d]:s.push({label:l.labels.plural,options:d,value:void 0}),s}default:return e}};var h=a(5185);a(4414);const E="relationship",f=(0,n.Z)((e=>{const{relationTo:t,validate:a=u.relationship,path:n,name:p,required:f,label:y,hasMany:g,admin:{readOnly:b,style:w,width:Z,description:C,condition:$}={}}=e,{serverURL:N,routes:{api:_},collections:k}=(0,r.useConfig)(),S=(0,m.KP)(),M=Array.isArray(t),[q,x]=(0,l.useReducer)(v,f?[]:[{value:"null",label:"None"}]),[L,O]=(0,l.useState)(-1),[T,P]=(0,l.useState)(1),[B,F]=(0,l.useState)(""),[j,D]=(0,l.useState)(""),[V,R]=(0,l.useState)(!1),A=(0,h.Z)(B,300),z=(0,l.useCallback)((e=>a(e,{required:f})),[a,f]),{value:U,showError:I,errorMessage:H,setValue:G}=(0,i.Z)({path:n||p,validate:z,condition:$}),K=(0,l.useCallback)(((e,t)=>{const a=k.find((e=>e.slug===t));x({type:"ADD",data:e,relation:t,hasMultipleRelations:M,collection:a})}),[k,M]),W=(0,l.useCallback)((async({lastFullyLoadedRelation:e,lastLoadedPage:a,search:l})=>{let r=void 0!==a?a:1;const n=void 0!==e?e:-1,o=Array.isArray(t)?t:[t],i=-1===n?o:o.slice(n+1);let s=0;j||i.reduce((async(e,t)=>{var a;if(await e,s<10){const e=k.find((e=>e.slug===t)),n=(null===(a=null==e?void 0:e.admin)||void 0===a?void 0:a.useAsTitle)||"id",i=l?`&where[${n}][like]=${l}`:"",c=await fetch(`${N}${_}/${t}?limit=10&page=${r}&depth=0${i}`);if(c.ok){const e=await c.json();e.docs.length>0&&(s+=e.docs.length,K(e,t),P(e.page),e.nextPage||(O(o.indexOf(t)),o.indexOf(t)+1<o.length&&(r=1)))}else D("An error has occurred.")}}),Promise.resolve())}),[K,_,k,N,j,t]),Q=(0,l.useCallback)((()=>{if(U){if(g)return Array.isArray(U)?U.map((e=>{if(M){let t;return q.forEach((a=>{a.options&&a.options.some((a=>(null==a?void 0:a.value)===e.value&&(t=a,!0)))})),t}return q.find((t=>t.value===e))})):void 0;if(M){let e;const t=U;return q.forEach((a=>{(null==a?void 0:a.options)&&a.options.some((a=>(null==a?void 0:a.value)===t.value&&(e=a,!0)))})),e}return q.find((e=>e.value===U))}}),[g,M,U,q]),Y=(0,l.useCallback)((e=>{B!==e&&F(e)}),[B]),J=(0,l.useCallback)((async(e,t)=>{if(!j&&"null"!==e){const a=await fetch(`${N}${_}/${t}/${e}?depth=0`);if(a.ok){const e=await a.json();K({docs:[e]},t)}else console.error(`There was a problem loading the document with ID of ${e}.`)}}),[K,_,j,N]);(0,l.useEffect)((()=>{x({type:"CLEAR",required:f}),R(!0),P(1),O(-1),W({search:A})}),[W,A,t,f]),(0,l.useEffect)((()=>{if(U&&V)if(g){(Q()||[]).forEach(((e,a)=>{e||(M?J(U[a].value,U[a].relationTo):J(U[a],t))}))}else{if(!Q())if(M){const e=U;J(e.value,e.relationTo)}else J(U,t)}}),[J,Q,g,M,t,U,V]);const X=["field-type",E,I&&"error",j&&"error-loading",b&&`${E}--read-only`].filter(Boolean).join(" "),ee=Q()||U;return l.createElement("div",{className:X,style:{...w,width:Z}},l.createElement(c.Z,{showError:I,message:H}),l.createElement(s.Z,{htmlFor:n,label:y,required:f}),!j&&l.createElement(o.Z,{isDisabled:b,onInputChange:Y,onChange:b?void 0:e=>{G(g?e?e.map((e=>M?{relationTo:e.relationTo,value:e.value}:e.value)):null:M?{relationTo:e.relationTo,value:e.value}:e.value)},onMenuScrollToBottom:()=>{W({lastFullyLoadedRelation:L,lastLoadedPage:T+1,search:B})},value:ee,showError:I,disabled:S,options:q,isMulti:g}),j&&l.createElement("div",{className:`${E}__error-loading`},j),l.createElement(d.Z,{value:U,description:C}))}))},7670:(e,t,a)=>{a.d(t,{Z:()=>m});var l=a(7294),r=a(546),n=a(8170),o=a(5193),i=a(953),s=a(666),c=a(7070),d=a(4912);a(3665);const u=e=>{const{showError:t,errorMessage:a,readOnly:r,path:n,label:o,required:u,value:m,onChange:p,description:v,style:h,width:E,options:f,hasMany:y}=e,g=["field-type","select",t&&"error",r&&"read-only"].filter(Boolean).join(" ");let b;return b=y&&Array.isArray(m)?m.map((e=>f.find((t=>t.value===e)))):f.find((e=>e.value===m)),l.createElement("div",{className:g,style:{...h,width:E}},l.createElement(s.Z,{showError:t,message:a}),l.createElement(i.Z,{htmlFor:n,label:o,required:u}),l.createElement(d.Z,{onChange:p,value:b,showError:t,isDisabled:r,options:f,isMulti:y}),l.createElement(c.Z,{value:m,description:v}))},m=(0,r.Z)((e=>{const{path:t,name:a,required:r,validate:i=o.select,label:s,options:c,hasMany:d,admin:{readOnly:m,style:p,width:v,description:h,condition:E}={}}=e,f=t||a,[y]=(0,l.useState)((e=>e.map((e=>"object"==typeof e&&e.value?e:{label:e,value:e})))(c)),g=(0,l.useCallback)((e=>i(e,{required:r,options:y})),[i,r,y]),{value:b,showError:w,setValue:Z,errorMessage:C}=(0,n.Z)({path:f,validate:g,condition:E}),$=(0,l.useCallback)((e=>{if(!m){let t;t=d?Array.isArray(e)?e.map((e=>e.value)):[]:e.value,Z(t)}}),[m,d,Z]);return l.createElement(u,{path:f,onChange:$,value:b,name:a,options:y,label:s,showError:w,errorMessage:C,description:h,style:p,width:v,hasMany:d})}))},2570:(e,t,a)=>{a.d(t,{Z:()=>he});var l=a(7294),r=a(829);const n=(0,l.lazy)((()=>Promise.all([a.e(532),a.e(16)]).then(a.bind(a,9016)))),o=e=>l.createElement(l.Suspense,{fallback:l.createElement(r.Z,null)},l.createElement(n,{...e}));var i=a(8571),s=a(4020),c=a(8170),d=a(546),u=a(5193),m=a(953),p=a(666),v=a(7070);a(9226);const h=e=>{const{showError:t,errorMessage:a,placeholder:r,readOnly:n,path:o,label:i,required:s,value:c,onChange:d,description:u,style:h,width:E}=e,f=["field-type","text",t&&"error",n&&"read-only"].filter(Boolean).join(" ");return l.createElement("div",{className:f,style:{...h,width:E}},l.createElement(p.Z,{showError:t,message:a}),l.createElement(m.Z,{htmlFor:o,label:i,required:s}),l.createElement("input",{value:c||"",onChange:d,disabled:n,placeholder:r,type:"text",id:o,name:o}),l.createElement(v.Z,{value:c,description:u}))},E=(0,d.Z)((e=>{const{path:t,name:a,required:r,validate:n=u.text,label:o,admin:{placeholder:i,readOnly:s,style:d,width:m,description:p,condition:v}={}}=e,E=t||a,f=(0,c.Z)({path:E,validate:n,enableDebouncedValue:!0,condition:v}),{value:y,showError:g,setValue:b,errorMessage:w}=f;return l.createElement(h,{path:E,name:a,onChange:e=>{b(e.target.value)},showError:g,errorMessage:w,required:r,label:o,value:y,placeholder:i,readOnly:s,style:d,width:m,description:p})}));var f=a(2626);a(1695);const y="date-time-field",g=(0,d.Z)((e=>{const{path:t,name:a,required:r,validate:n=u.date,label:o,admin:{placeholder:i,readOnly:s,style:d,width:h,date:E,description:g,condition:b}={}}=e,w=t||a,Z=(0,l.useCallback)((e=>n(e,{required:r})),[n,r]),{value:C,showError:$,errorMessage:N,setValue:_}=(0,c.Z)({path:w,validate:Z,condition:b}),k=["field-type",y,$&&`${y}--has-error`,s&&"read-only"].filter(Boolean).join(" ");return l.createElement("div",{className:k,style:{...d,width:h}},l.createElement("div",{className:`${y}__error-wrap`},l.createElement(p.Z,{showError:$,message:N})),l.createElement(m.Z,{htmlFor:w,label:o,required:r}),l.createElement("div",{className:`${y}__input-wrapper`},l.createElement(f.Z,{...E,placeholder:i,readOnly:s,onChange:s?void 0:_,value:C})),l.createElement(v.Z,{value:C,description:g}))}));var b=a(6067),w=a(4007),Z=a(1757);a(5536);const C=e=>{const{path:t,required:a,readOnly:r,style:n,width:o,placeholder:i,description:s,label:c,showError:d,value:u,errorMessage:h,onChange:E,rows:f}=e,y=["field-type","textarea",d&&"error",r&&"read-only"].filter(Boolean).join(" ");return l.createElement("div",{className:y,style:{...n,width:o}},l.createElement(p.Z,{showError:d,message:h}),l.createElement(m.Z,{htmlFor:t,label:c,required:a}),l.createElement("textarea",{value:u||"",onChange:E,disabled:r,placeholder:i,id:t,name:t,rows:f}),l.createElement(v.Z,{value:u,description:s}))},$=(0,d.Z)((e=>{const{path:t,name:a,required:r,validate:n=u.textarea,admin:{readOnly:o,style:i,width:s,placeholder:d,rows:m,description:p,condition:v}={},label:h,minLength:E,maxLength:f}=e,y=t||a,g=(0,l.useCallback)((e=>n(e,{minLength:E,maxLength:f,required:r})),[n,f,E,r]),{value:b,showError:w,setValue:Z,errorMessage:$}=(0,c.Z)({path:y,validate:g,enableDebouncedValue:!0,condition:v});return l.createElement(C,{path:y,name:a,onChange:e=>{Z(e.target.value)},showError:w,errorMessage:$,required:r,label:h,value:b,placeholder:d,readOnly:o,style:i,width:s,description:p,rows:m})}));var N=a(7670);a(5712);const _=(0,d.Z)((e=>{const{name:t,path:a,required:r,validate:n=u.number,label:o,max:i,min:s,admin:{readOnly:d,style:h,width:E,step:f,placeholder:y,description:g,condition:b}={}}=e,w=a||t,Z=(0,l.useCallback)((e=>n(e,{min:s,max:i,required:r})),[n,i,s,r]),{value:C,showError:$,setValue:N,errorMessage:_}=(0,c.Z)({path:w,validate:Z,enableDebouncedValue:!0,condition:b}),k=(0,l.useCallback)((e=>{const t=parseFloat(e.target.value);Number.isNaN(t)?N(""):N(t)}),[N]),S=["field-type","number",$&&"error",d&&"read-only"].filter(Boolean).join(" ");return l.createElement("div",{className:S,style:{...h,width:E}},l.createElement(p.Z,{showError:$,message:_}),l.createElement(m.Z,{htmlFor:w,label:o,required:r}),l.createElement("input",{value:"number"==typeof C?C:"",onChange:k,disabled:d,placeholder:y,type:"number",id:w,name:w,step:f}),l.createElement(v.Z,{value:C,description:g}))}));var k=a(5212);const S=(0,l.lazy)((()=>Promise.all([a.e(532),a.e(444)]).then(a.bind(a,4444)))),M=e=>l.createElement(l.Suspense,{fallback:l.createElement(r.Z,null)},l.createElement(S,{...e}));a(7376);const q="radio-input",x=e=>{const{isSelected:t,option:a,onChange:r,path:n}=e,o=[q,t&&`${q}--is-selected`].filter(Boolean).join(" "),i=`${n}-${a.value}`;return l.createElement("label",{htmlFor:i},l.createElement("div",{className:o},l.createElement("input",{id:i,type:"radio",checked:t,onChange:()=>"function"==typeof r?r(a.value):null}),l.createElement("span",{className:`${q}__styled-radio`}),l.createElement("span",{className:`${q}__label`},a.label)))};var L=a(3780);a(6129);const O="radio-group",T=(0,d.Z)((e=>{const{name:t,path:a,required:r,validate:n=u.radio,label:o,admin:{readOnly:i,layout:s="horizontal",style:d,width:h,description:E,condition:f}={},options:y}=e,g=a||t,b=(0,l.useCallback)((e=>n(e,{required:r,options:y})),[n,r,y]),{value:w,showError:Z,errorMessage:C,setValue:$}=(0,c.Z)({path:g,validate:b,condition:f}),N=["field-type",O,`${O}--layout-${s}`,Z&&"error",i&&`${O}--read-only`].filter(Boolean).join(" ");return l.createElement("div",{className:N,style:{...d,width:h}},l.createElement("div",{className:`${O}__error-wrap`},l.createElement(p.Z,{showError:Z,message:C})),l.createElement(m.Z,{htmlFor:g,label:o,required:r}),l.createElement("ul",{className:`${O}--group`},y.map((e=>{let t="";t=(0,L.optionIsObject)(e)?e.value:e;const a=String(t)===String(w);return l.createElement("li",{key:`${g} - ${t}`},l.createElement(x,{path:g,isSelected:a,option:(0,L.optionIsObject)(e)?e:{label:e,value:e},onChange:i?void 0:$}))}))),l.createElement(v.Z,{value:w,description:E}))}));a(2879);const P="point",B=(0,d.Z)((e=>{const{name:t,path:a,required:r,validate:n=u.point,label:o,admin:{readOnly:i,style:s,width:d,step:h,placeholder:E,description:f,condition:y}={}}=e,g=a||t,b=(0,l.useCallback)((e=>n(e,{required:r})),[n,r]),{value:w=[null,null],showError:Z,setValue:C,errorMessage:$}=(0,c.Z)({path:g,validate:b,enableDebouncedValue:!0,condition:y}),N=(0,l.useCallback)(((e,t)=>{let a=parseFloat(e.target.value);Number.isNaN(a)&&(a=e.target.value);const l=[...w];l[t]=a,C(l)}),[C,w]),_=["field-type",P,Z&&"error",i&&"read-only"].filter(Boolean).join(" ");return l.createElement("div",{className:_,style:{...s,width:d}},l.createElement(p.Z,{showError:Z,message:$}),l.createElement("ul",{className:`${P}__wrap`},l.createElement("li",null,l.createElement(m.Z,{htmlFor:`${g}.longitude`,label:`${o} - Longitude`,required:r}),l.createElement("input",{value:w&&"number"==typeof w[0]?w[0]:"",onChange:e=>N(e,0),disabled:i,placeholder:E,type:"number",id:`${g}.longitude`,name:`${g}.longitude`,step:h})),l.createElement("li",null,l.createElement(m.Z,{htmlFor:`${g}.latitude`,label:`${o} - Latitude`,required:r}),l.createElement("input",{value:w&&"number"==typeof w[1]?w[1]:"",onChange:e=>N(e,1),disabled:i,placeholder:E,type:"number",id:`${g}.latitude`,name:`${g}.latitude`,step:h}))),l.createElement(v.Z,{value:w,description:f}))})),F=(0,l.lazy)((()=>Promise.all([a.e(532),a.e(828),a.e(977)]).then(a.bind(a,6977)))),j=e=>l.createElement(l.Suspense,{fallback:l.createElement(r.Z,null)},l.createElement(F,{...e}));var D=a(1439),V=a(1417),R=a(161);a(8655);const A="group",z=(0,d.Z)((e=>{const{label:t,fields:a,name:r,path:n,fieldTypes:o,admin:{readOnly:i,style:s,width:c,hideGutter:d,description:u},permissions:m}=e,p=n||r;return l.createElement("div",{className:["field-type",A,!t&&`${A}--no-label`].filter(Boolean).join(" "),style:{...s,width:c}},!d&&l.createElement(V.Z,null),l.createElement("div",{className:`${A}__content-wrapper`},(t||u)&&l.createElement("header",{className:`${A}__header`},t&&l.createElement("h3",{className:`${A}__title`},t),l.createElement(v.Z,{value:null,description:u})),l.createElement("div",{className:`${A}__fields-wrapper`},l.createElement(R.S,{allow:!1},l.createElement(D.Z,{permissions:null==m?void 0:m.fields,readOnly:i,fieldTypes:o,fieldSchema:a.map((e=>({...e,path:`${p}${(0,L.fieldAffectsData)(e)?`.${e.name}`:""}`})))})))))})),U=(0,l.lazy)((()=>Promise.all([a.e(532),a.e(828),a.e(892)]).then(a.bind(a,6892)))),I=e=>l.createElement(l.Suspense,{fallback:l.createElement(r.Z,null)},l.createElement(U,{...e}));a(1745);const H=(0,d.Z)((e=>{const{fields:t,fieldTypes:a,path:r,permissions:n,admin:{readOnly:o}}=e;return l.createElement(D.Z,{readOnly:o,className:"field-type row",permissions:null==n?void 0:n.fields,fieldTypes:a,fieldSchema:t.map((e=>({...e,path:`${r?`${r}.`:""}${(0,L.fieldAffectsData)(e)?e.name:""}`})))})}));var G=a(9243),K=a(1851),W=a(4479),Q=a(9580),Y=a(9599),J=a(8572),X=a(6268),ee=a(6054);a(2805);const te="add-upload-modal",ae=e=>{var t,a;const{collection:r,collection:{admin:{description:n}={}}={},slug:o,fieldTypes:i,setValue:s}=e,{permissions:c}=(0,G.useAuth)(),{serverURL:d,routes:{api:u}}=(0,G.useConfig)(),{closeAll:m}=(0,K.useModal)(),p=(0,l.useCallback)((e=>{m(),s(e.doc)}),[m,s]),v=[te].filter(Boolean).join(" "),h=null===(a=null===(t=null==c?void 0:c.collections)||void 0===t?void 0:t[r.slug])||void 0===a?void 0:a.fields;return l.createElement(K.Modal,{className:v,slug:o},l.createElement(Y.Z,{width:"wide"},l.createElement(J.Z,{method:"post",action:`${d}${u}/${r.slug}`,onSuccess:p,disableSuccessStatus:!0},l.createElement("header",{className:`${te}__header`},l.createElement("div",null,l.createElement("h1",null,"New"," ",r.labels.singular),l.createElement(X.Z,null,"Save"),l.createElement(W.Z,{icon:"x",round:!0,buttonStyle:"icon-label",iconStyle:"with-border",onClick:m})),n&&l.createElement("div",{className:`${te}__sub-header`},n)),l.createElement(ee.Z,{collection:r}),l.createElement(R.S,{allow:!0},l.createElement(D.Z,{permissions:h,readOnly:!1,fieldTypes:i,fieldSchema:r.fields})))))};var le=a(7489),re=a(1280),ne=a(6628),oe=a(7656),ie=a(4267),se=a(254);a(389);const ce="select-existing-upload-modal",de=e=>{const{setValue:t,collection:a,collection:{slug:r,admin:{description:n,pagination:{defaultLimit:o}}={}}={},slug:i}=e,{serverURL:s,routes:{api:c}}=(0,G.useConfig)(),{closeAll:d,currentModal:u}=(0,K.useModal)(),[m]=(0,l.useState)((()=>(0,se.Z)(a))),[p,v]=(0,l.useState)(o),[h,E]=(0,l.useState)(null),[f,y]=(0,l.useState)(null),[g,b]=(0,l.useState)(null),w=[ce].filter(Boolean).join(" "),Z=u===i,C=Z?`${s}${c}/${r}`:null,[{data:$},{setParams:N}]=(0,le.Z)(C,{});return(0,l.useEffect)((()=>{const e={};g&&(e.page=g),f&&(e.where=f),h&&(e.sort=h),p&&(e.limit=p),N(e)}),[N,g,h,f,p]),l.createElement(K.Modal,{className:w,slug:i},Z&&l.createElement(Y.Z,{width:"wide"},l.createElement("header",{className:`${ce}__header`},l.createElement("div",null,l.createElement("h1",null," ","Select existing"," ",a.labels.singular),l.createElement(W.Z,{icon:"x",round:!0,buttonStyle:"icon-label",iconStyle:"with-border",onClick:d})),n&&l.createElement("div",{className:`${ce}__sub-header`},n)),l.createElement(re.Z,{collection:{...a,fields:m},enableColumns:!1,enableSort:!0,modifySearchQuery:!1,handleSortChange:E,handleWhereChange:y}),l.createElement(oe.Z,{docs:null==$?void 0:$.docs,collection:a,onCardClick:e=>{t(e),d()}}),l.createElement("div",{className:`${ce}__page-controls`},l.createElement(ne.Z,{limit:$.limit,totalPages:$.totalPages,page:$.page,hasPrevPage:$.hasPrevPage,hasNextPage:$.hasNextPage,prevPage:$.prevPage,nextPage:$.nextPage,numberOfNeighbors:1,onChange:b,disableHistoryChange:!0}),(null==$?void 0:$.totalDocs)>0&&l.createElement(l.Fragment,null,l.createElement("div",{className:`${ce}__page-info`},$.page,"-",$.totalPages>1?$.limit:$.totalDocs," ","of"," ",$.totalDocs),l.createElement(ie.Z,{collection:a,limit:p,modifySearchParams:!1,handleChange:v})))))};a(349);const ue="upload",me=e=>{const{path:t,required:a,readOnly:r,style:n,width:o,description:i,label:s,relationTo:c,fieldTypes:d,value:u,onChange:h,showError:E,serverURL:f="http://localhost:3000",api:y="/api",collection:g,errorMessage:b}=e,{toggle:w}=(0,K.useModal)(),Z=`${t}-add`,C=`${t}-select-existing`,[$,N]=(0,l.useState)(void 0),[_,k]=(0,l.useState)(!1),S=["field-type",ue,E&&"error",r&&"read-only"].filter(Boolean).join(" ");return(0,l.useEffect)((()=>{if("string"==typeof u&&""!==u){(async()=>{const e=await fetch(`${f}${y}/${c}/${u}`);if(e.ok){const t=await e.json();N(t)}else k(!0),N(void 0)})()}else N(void 0)}),[u,c,y,f]),l.createElement("div",{className:S,style:{...n,width:o}},l.createElement(p.Z,{showError:E,message:b}),l.createElement(m.Z,{htmlFor:t,label:s,required:a}),(null==g?void 0:g.upload)&&l.createElement(l.Fragment,null,$&&!_&&l.createElement(Q.Z,{collection:g,doc:$,handleRemove:()=>{h(null)}}),(!$||_)&&l.createElement("div",{className:`${ue}__wrap`},l.createElement(W.Z,{buttonStyle:"secondary",onClick:()=>{w(Z)}},"Upload new"," ",g.labels.singular),l.createElement(W.Z,{buttonStyle:"secondary",onClick:()=>{w(C)}},"Choose from existing")),l.createElement(ae,{collection:g,slug:Z,fieldTypes:d,setValue:h}),l.createElement(de,{collection:g,slug:C,setValue:h,addModalSlug:Z}),l.createElement(v.Z,{value:$,description:i})))},pe=(0,d.Z)((e=>{const{collections:t,serverURL:a,routes:{api:r}}=(0,G.useConfig)(),{path:n,name:o,required:i,admin:{readOnly:s,style:d,width:m,description:p,condition:v}={},label:h,validate:E=u.upload,relationTo:f,fieldTypes:y}=e,g=t.find((e=>e.slug===f)),b=(0,l.useCallback)((e=>E(e,{required:i})),[E,i]),w=(0,c.Z)({path:n,validate:b,condition:v}),{value:Z,showError:C,setValue:$,errorMessage:N}=w,_=(0,l.useCallback)((e=>{const t=(null==e?void 0:e.id)||e;$(t)}),[$]);return g.upload?l.createElement(me,{path:n,value:Z,onChange:_,description:p,label:h,required:i,showError:C,serverURL:a,api:r,errorMessage:N,readOnly:s,style:d,width:m,collection:g,fieldTypes:y,name:o,relationTo:f}):null})),ve=(0,d.Z)((e=>{const{admin:{components:{Field:t}}}=e;return t?l.createElement(t,{...e}):null})),he={code:o,email:i.Z,hidden:s.Z,text:E,date:g,password:b.Z,confirmPassword:w.Z,relationship:Z.Z,textarea:$,select:N.Z,number:_,checkbox:k.Z,richText:M,point:B,radio:T,blocks:j,group:z,array:I,row:H,upload:pe,ui:ve}},6128:(e,t,a)=>{a.d(t,{Z:()=>r});var l=a(7294);a(5809);const r=()=>l.createElement("svg",{className:"icon icon--check",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 25"},l.createElement("path",{d:"M10.6092 16.0192L17.6477 8.98076",className:"stroke",strokeLinecap:"square",strokeLinejoin:"bevel"}),l.createElement("path",{d:"M7.35229 12.7623L10.6092 16.0192",className:"stroke",strokeLinecap:"square",strokeLinejoin:"bevel"}))},6054:(e,t,a)=>{a.d(t,{Z:()=>u});var l=a(7294),r=a(8170),n=a(4479),o=a(9580),i=a(666);a(5307);const s="file-field",c=e=>{e.preventDefault(),e.stopPropagation()},d=e=>!(!e&&void 0!==e)||"A file is required.",u=e=>{var t,a;const u=(0,l.useRef)(null),m=(0,l.useRef)(null),[p,v]=(0,l.useState)(!1),[h,E]=(0,l.useState)(!1),[f,y]=(0,l.useState)(0),[g,b]=(0,l.useState)(!1),{data:w={},collection:Z}=e,{filename:C}=w,{value:$,setValue:N,showError:_,errorMessage:k}=(0,r.Z)({path:"file",validate:d}),S=(0,l.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),y((e=>e+1)),e.dataTransfer.items&&e.dataTransfer.items.length>0&&E(!0)}),[]),M=(0,l.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),y((e=>e-1)),f>1||E(!1)}),[f]),q=(0,l.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),E(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0?(N(e.dataTransfer.files[0]),E(!1),e.dataTransfer.clearData(),y(0)):E(!1)}),[N]),x=(0,l.useCallback)((()=>{var e,t;v(!1),N((null===(t=null===(e=null==u?void 0:u.current)||void 0===e?void 0:e.files)||void 0===t?void 0:t[0])||null)}),[u,N]);(0,l.useEffect)((()=>{p&&(u.current.click(),v(!1))}),[p,u,v]),(0,l.useEffect)((()=>{const e=m.current;return e?(e.addEventListener("dragenter",S),e.addEventListener("dragleave",M),e.addEventListener("dragover",c),e.addEventListener("drop",q),()=>{e.removeEventListener("dragenter",S),e.removeEventListener("dragleave",M),e.removeEventListener("dragover",c),e.removeEventListener("drop",q)}):()=>null}),[S,M,q,$]),(0,l.useEffect)((()=>{b(!1)}),[w]);const L=[s,h&&`${s}--dragging`,"field-type"].filter(Boolean).join(" ");return l.createElement("div",{className:L},l.createElement(i.Z,{showError:_,message:k}),C&&!g&&l.createElement(o.Z,{doc:w,collection:Z,handleRemove:()=>{b(!0),N(null)}}),(!C||g)&&l.createElement("div",{className:`${s}__upload`},$&&l.createElement("div",{className:`${s}__file-selected`},l.createElement("span",{className:`${s}__filename`},$.name),l.createElement(n.Z,{icon:"x",round:!0,buttonStyle:"icon-label",iconStyle:"with-border",onClick:()=>{N(null)}})),!$&&l.createElement(l.Fragment,null,l.createElement("div",{className:`${s}__drop-zone`,ref:m},l.createElement(n.Z,{size:"small",buttonStyle:"secondary",onClick:()=>v(!0)},"Select a file"),l.createElement("span",{className:`${s}__drag-label`},"or drag and drop a file here"))),l.createElement("input",{ref:u,type:"file",accept:null===(a=null===(t=null==Z?void 0:Z.upload)||void 0===t?void 0:t.mimeTypes)||void 0===a?void 0:a.join(","),onChange:x})))}},5976:(e,t)=>{t.Z=function(e,t=0){if(0===e)return"0 bytes";const a=t<0?0:t,l=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/1024**l).toFixed(a))}${[" bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][l]}`}}}]);