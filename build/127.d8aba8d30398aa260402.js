"use strict";(self.webpackChunkpayload_starter_typescript=self.webpackChunkpayload_starter_typescript||[]).push([[127],{9127:(e,a,l)=>{l.r(a),l.d(a,{default:()=>$});var t=l(7294),i=l(5977),s=l(9243),n=l(5091),d=l(7489),o=l(5074),r=l(684),c=l(2143),m=l(9546),p=l(8584),u=l(8572),b=l(4983),E=l(6268),_=l(1439),g=l(9410),v=l(8380),f=l(2570),h=l(854),N=(l(8446),l(8019));const Z="global-edit",y=e=>{var a;const{admin:{dateFormat:l}}=(0,s.useConfig)(),{global:i,data:n,onSave:d,permissions:o,action:r,apiURL:c,initialState:y}=e,{fields:w,preview:S,label:$,admin:{description:k}={}}=i,C=null===(a=null==o?void 0:o.update)||void 0===a?void 0:a.permission;return t.createElement("div",{className:Z},t.createElement(u.Z,{className:"global-edit__form",method:"post",action:r,onSuccess:d,disabled:!C,initialState:y},t.createElement("div",{className:"global-edit__main"},t.createElement(v.Z,{title:$,description:$,keywords:`${$}, Payload, CMS`}),t.createElement(p.Z,null),t.createElement(h.Z,null),t.createElement("div",{className:"global-edit__edit"},t.createElement("header",{className:"global-edit__header"},t.createElement("h1",null,"Edit"," ",$),k&&t.createElement("div",{className:"global-edit__sub-header"},t.createElement(N.Z,{description:k}))),t.createElement(_.Z,{operation:"update",readOnly:!C,permissions:o.fields,filter:e=>!e.admin.position||e.admin.position&&"sidebar"!==e.admin.position,fieldTypes:f.Z,fieldSchema:w}))),t.createElement("div",{className:"global-edit__sidebar-wrap"},t.createElement("div",{className:"global-edit__sidebar"},t.createElement("div",{className:"global-edit__sidebar-sticky-wrap"},t.createElement("div",{className:"global-edit__document-actions"+(S?" global-edit__document-actions--with-preview":"")},t.createElement(b.Z,{generatePreviewURL:S,data:n}),C&&t.createElement(E.Z,null,"Save")),t.createElement("div",{className:"global-edit__sidebar-fields"},t.createElement(_.Z,{operation:"update",readOnly:!C,permissions:o.fields,filter:e=>"sidebar"===e.admin.position,fieldTypes:f.Z,fieldSchema:w})),n&&t.createElement("ul",{className:"global-edit__meta"},n&&t.createElement("li",{className:"global-edit__api-url"},t.createElement("span",{className:"global-edit__label"},"API URL"," ",t.createElement(g.Z,{value:c})),t.createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer"},c)),n.updatedAt&&t.createElement("li",null,t.createElement("div",{className:"global-edit__label"},"Last Modified"),t.createElement("div",null,(0,m.default)(new Date(n.updatedAt),l)))))))))};var w=l(3864),S=l(161);const $=e=>{var a;const{state:l}=(0,i.TH)(),m=(0,i.k6)(),p=(0,r.bU)(),{setStepNav:u}=(0,n.FP)(),{permissions:b}=(0,s.useAuth)(),[E,_]=(0,t.useState)({}),{serverURL:g,routes:{admin:v,api:f}}=(0,s.useConfig)(),{global:h}=e,{slug:N,label:Z,fields:$,admin:{components:{views:{Edit:k}={}}={}}={}}=h,[{data:C}]=(0,d.Z)(`${g}${f}/globals/${N}`,{initialParams:{"fallback-locale":"null",depth:0}}),L=(null==l?void 0:l.data)||C;(0,t.useEffect)((()=>{u([{label:Z}])}),[u,Z]),(0,t.useEffect)((()=>{(async()=>{const e=await(0,w.Z)($,L);_(e)})()}),[L,$]);const P=null===(a=null==b?void 0:b.globals)||void 0===a?void 0:a[N];return t.createElement(o.a4,{slug:N,type:"global"},t.createElement(S.S,{allow:!0},t.createElement(c.Z,{DefaultComponent:y,CustomComponent:k,componentProps:{data:L,permissions:P,initialState:E,global:h,onSave:e=>{m.push(`${v}/globals/${h.slug}`,{status:{message:e.message,type:"success"},data:e.doc})},apiURL:`${g}${f}/globals/${N}?depth=0`,action:`${g}${f}/globals/${N}?locale=${p}&depth=0&fallback-locale=null`}})))}}}]);